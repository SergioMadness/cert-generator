{"version":3,"sources":["cert.js"],"names":["defaultData","userData","scale","elements","$","workspace","control","request","XMLHttpRequest","renderWorkspace","data","i","setElement","setControl","key","css","background","image","bgSize","find","val","bgPosition","position","width","elem","top","left","color","font-family","textAlign","text","fontSize","line-height","lineHeight","fontStyle","text-align","font-style","positionTop","setWorkspaceZoom","zoom","-moz-transform","setBorder","switcher","element","addEventListener","e","classList","toggle","setTop","style","value","setLeft","setWidth","setFontFamily","target","setFontSize","setLineHeight","setColor","setFontStyle","weight","fontWeight","setTextAlign","switcherTop","Math","switcherWidth","switcherLeft","containment","drag","event","ui","resizable","ceil","handles","resize","maxWidth","size","readFile","file","onLoadCallback","reader","FileReader","onload","createPreviewPdf","h","w","getX","height","paperW","paperH","orientation","getY","getW","pageOrientation","getFont","content","table","widths","body","border","margin","absolutePosition","x","y","innerHTML","pdfMake","createPdf","docDefinition","getBase64","attr","click","open","status","console","log","data1","responseText","onerror","send","this","files","setBgSize","setBgPosition","each","on","querySelector","setDragResize","elem1","remove","key1","getAttribute","contains","add"],"mappings":"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","file":"../cert.js","sourcesContent":["// GLOBALS\r\nlet defaultData = {},\r\n    userData = {},\r\n    scale = 1;\r\nconst elements = [{\r\n        workspace: $('.cert-name'),\r\n        control: $('#control-name'),\r\n    },\r\n    {\r\n        workspace: $('.cert-number'),\r\n        control: $('#control-number'),\r\n    },\r\n    {\r\n        workspace: $('.cert-course'),\r\n        control: $('#control-course'),\r\n    },\r\n    {\r\n        workspace: $('.cert-date'),\r\n        control: $('#control-date'),\r\n    },\r\n    {\r\n        workspace: $('.cert-duration'),\r\n        control: $('#control-duration'),\r\n    },\r\n];\r\n\r\n// GETTING DATA\r\n// $.getJSON(\"https://gk061090.github.io/cert-generator/json/data.json\")\r\n//     .done(function (json) {\r\n//         console.log(json);\r\n//         userData = defaultData = json;\r\n//     })\r\n//     .fail(function (jqxhr, textStatus, error) {\r\n//         var err = textStatus + \", \" + error;\r\n//         console.log(\"Request Failed: \" + err);\r\n//     });\r\n\r\n// $.getJSON(\"https://bioinfobot.github.io/data/2017-05.json\")\r\n// .done(function( data ) {\r\n//    console.log(data)\r\n// });\r\n\r\nvar request = new XMLHttpRequest();\r\nrequest.open('GET', 'https://bioinfobot.github.io/data/2017-05.json', true);\r\n\r\nrequest.onload = function() {\r\n  if (request.status >= 200 && request.status < 400) {\r\n    // Success!\r\n    var data1 = JSON.parse(request.responseText);\r\n    console.log(data1)\r\n  } else {\r\n    // We reached our target server, but it returned an error\r\n    console.log('nothing')\r\n  }\r\n};\r\n\r\nrequest.onerror = function() {\r\n  // There was a connection error of some sort\r\n  console.log('error')\r\n};\r\n\r\nrequest.send();\r\n\r\n\r\n\r\n$(document).ready(function () {\r\n    renderWorkspace(defaultData);\r\n    // default zoom by workspace width\r\n    scale = ($('.cert-wokrspace__content').width() / $('.cert-wokrspace').width());\r\n    setWorkspaceZoom(scale);\r\n\r\n    // bg picker\r\n    $('#fileBg').on('change', function (e) {\r\n        readFile(this.files[0], function (e) {\r\n            $('.cert-wokrspace__content').css('background-image', `url(\"${e.target.result}\")`);\r\n            userData.background.image = e.target.result;\r\n        });\r\n        setBgSize();\r\n        setBgPosition();\r\n    });\r\n    $('#control-bg').find('.control-bg-size').on('change', setBgSize);\r\n    $('#control-bg').find('.control-bg-position').on('change', setBgPosition);\r\n\r\n    $.each(elements, function (key, elem) {\r\n        // TOGGLE ACCORDITION\r\n        elem.workspace[0].addEventListener('click', function () {\r\n            $('.cert-controls .card-header a')[key + 1].click();\r\n        });\r\n        // ACCORDITION (PANEL) CONTROLS\r\n        setBorder(elem.control[0].querySelector('.control-hidder'), elem.workspace[0]);\r\n        setTop(elem.control[0].querySelector('.control-top'), elem.workspace[0]);\r\n        setLeft(elem.control[0].querySelector('.control-left'), elem.workspace[0]);\r\n        setWidth(elem.control[0].querySelector('.control-width'), elem.workspace[0]);\r\n        setFontFamily(elem.control[0].querySelector('.control-font-family'), elem.workspace[0]);\r\n        setFontSize(elem.control[0].querySelector('.control-font-size'), elem.workspace[0]);\r\n        setLineHeight(elem.control[0].querySelector('.control-line-height'), elem.workspace[0]);\r\n        setColor(elem.control[0].querySelector('.control-color'), elem.workspace[0]);\r\n        setFontStyle(elem.control[0].querySelector('.control-font-style'), elem.workspace[0]);\r\n        setTextAlign(elem.control[0].querySelector('.control-text-align'), elem.workspace[0]);\r\n        // DRAG AND RESIZE\r\n        setDragResize($(elem.workspace[0]), $(elem.control[0]).find('.control-top'), $(elem.control[0]).find('.control-left'), $(elem.control[0]).find('.control-width'));\r\n    });\r\n    $.each($('.cert-controls .card-header a'), function (key, elem) {\r\n        elem.addEventListener('click', function () {\r\n            $.each(elements, function (key1, elem1) {\r\n                elem1.workspace[0].classList.remove('cert-active');\r\n            });\r\n\r\n            if (elem.getAttribute('aria-expanded') === 'false' && key >= 1) {\r\n                if (elements[key - 1].workspace[0].classList.contains('cert-bordered')) {\r\n                    elements[key - 1].workspace[0].classList.add('cert-active');\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    // Create PDF\r\n    $('#preview').click(function () {\r\n        createPreviewPdf()\r\n    });\r\n});\r\n\r\n/*\r\n * CONTROLS EVENTS\r\n */\r\n\r\n// WORKSPACE CONTROLS\r\n// resize workspace\r\n$('.cert-wokrspace__zoom').click(function () {\r\n    if (scale <= 3) {\r\n        scale += 0.5;\r\n        setWorkspaceZoom(scale);\r\n    }\r\n});\r\n// reset workspace\r\n$('.cert-wokrspace__reset').click(function () {\r\n    scale = ($('.cert-wokrspace__content').width() / $('.cert-wokrspace').width());\r\n    setWorkspaceZoom(scale);\r\n});\r\n// reset original\r\n$('.cert-wokrspace__original').click(function () {\r\n    setWorkspaceZoom(1);\r\n    scale = 1;\r\n});\r\n// set landscape\r\n$('.cert-wokrspace__landscape').click(function () {\r\n    $('.cert-wokrspace__content').css({\r\n        'height': '793.7px',\r\n        'width': '1122.5px'\r\n    });\r\n    userData.orientation = 'landscape';\r\n});\r\n// set portrait\r\n$('.cert-wokrspace__portrait').click(function () {\r\n    $('.cert-wokrspace__content').css({\r\n        'height': '1122.5px',\r\n        'width': '793.7px'\r\n    });\r\n    userData.orientation = 'portrait';\r\n});\r\n\r\n\r\n/*\r\n * FUNCTIONS\r\n */\r\n// SET DEFAULT DATA INTO WORKSPACE\r\nfunction renderWorkspace(data) {\r\n    let i = 0;\r\n    for (let key in data) {\r\n        if (typeof data[key] === \"object\") {\r\n            // set workspace\r\n            if (key !== \"background\") {\r\n                setElement(elements[i].workspace, data[key]);\r\n                setControl(elements[i].control, data[key]);\r\n                i++;\r\n            } else {\r\n                $('.cert-wokrspace__content').css('background-image', `url(\"${data.background.image}\")`);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// background\r\nfunction setBgSize() {\r\n    let bgSize;\r\n    switch ($('#control-bg').find('.control-bg-size').val()) {\r\n        case 'По ширине':\r\n            bgSize = '100% auto';\r\n            break;\r\n        case 'По высоте':\r\n            bgSize = 'auto 100%';\r\n            break;\r\n    }\r\n    $('.cert-wokrspace__content').css('background-size', bgSize);\r\n    userData.background.size = $('#control-bg').find('.control-bg-size').val();\r\n};\r\n\r\nfunction setBgPosition() {\r\n    let bgPosition;\r\n    switch ($('#control-bg').find('.control-bg-position').val()) {\r\n        case 'Верх / Лево':\r\n            bgPosition = 'top left';\r\n            break;\r\n        case 'Верх / Центр':\r\n            bgPosition = 'top center';\r\n            break;\r\n        case 'Верх / Право':\r\n            bgPosition = 'top right';\r\n            break;\r\n        case 'Право / Центр':\r\n            bgPosition = 'center right';\r\n            break;\r\n        case 'Право / Низ':\r\n            bgPosition = 'bottom right';\r\n            break;\r\n        case 'Низ / Центр':\r\n            bgPosition = 'bottom center';\r\n            break;\r\n        case 'Низ / Лево':\r\n            bgPosition = 'bottom left';\r\n            break;\r\n        case 'Лево / Центр':\r\n            bgPosition = 'center left';\r\n            break;\r\n        case 'Центр':\r\n            bgPosition = 'center center';\r\n            break;\r\n    }\r\n    $('.cert-wokrspace__content').css('background-position', bgPosition);\r\n    userData.background.position = $('#control-bg').find('.control-bg-position').val();\r\n};\r\n\r\n// set css and text\r\nfunction setElement(elem, data) {\r\n    elem.css({\r\n        'top': `${data.positionTop}px`,\r\n        'left': `${data.positionLeft}px`,\r\n        'width': `${data.width}px`,\r\n        'font-family': data.fontFamily,\r\n        'font-size': `${data.fontSize}px`,\r\n        'line-height': data.lineHeight,\r\n        'color': data.color,\r\n        'text-align': data.textAlign,\r\n    }).text(data.value);\r\n    // set font-style and font-weight\r\n    switch (data.fontStyle) {\r\n        case 'По умолчанию':\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'normal'\r\n            });\r\n            break;\r\n        case 'Жирный':\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'bold'\r\n            });\r\n            break;\r\n        case 'Курсив':\r\n            elem.css({\r\n                'font-style': 'italic',\r\n                'font-weight': 'normal'\r\n            });\r\n            break;\r\n        case 'Жирный + курсив':\r\n            elem.css({\r\n                'font-style': 'italic',\r\n                'font-weight': 'bold'\r\n            });\r\n            break;\r\n        default:\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'normal'\r\n            });\r\n    }\r\n    // set alignment\r\n    switch (data.textAlign) {\r\n        case 'По левому краю':\r\n            elem.css('text-align', 'left');\r\n            break;\r\n        case 'По правому краю':\r\n            elem.css('text-align', 'right');\r\n            break;\r\n        case 'По центру':\r\n            elem.css('text-align', 'center');\r\n            break;\r\n        case 'По ширине':\r\n            elem.css('text-align', 'justify');\r\n            break;\r\n        default:\r\n            elem.css('text-align', 'left');\r\n            break;\r\n    }\r\n};\r\n// set controls values\r\nfunction setControl(elem, data) {\r\n    elem.find(\".control-top\").val(data.positionTop);\r\n    elem.find(\".control-left\").val(data.positionLeft);\r\n    elem.find(\".control-width\").val(data.width);\r\n    elem.find(\".control-font-family\").val(data.fontFamily);\r\n    elem.find(\".control-font-size\").val(data.fontSize);\r\n    elem.find(\".control-line-height\").val(data.lineHeight);\r\n    elem.find(\".control-color\").val(data.color);\r\n    elem.find(\".control-font-style\").val(data.fontStyle);\r\n    elem.find(\".control-text-align\").val(data.textAlign);\r\n};\r\n// set workspace zoom\r\nfunction setWorkspaceZoom(scale) {\r\n    $('.cert-wokrspace__content').css({\r\n        'zoom': 1 / scale,\r\n        '-moz-transform': 1 / scale\r\n    });\r\n};\r\n\r\n// functions for control panel\r\n// show border for workspace block\r\nfunction setBorder(switcher, element) {\r\n    switcher.addEventListener('click', function (e) {\r\n        element.classList.toggle('cert-bordered');\r\n        element.classList.toggle('cert-active');\r\n    });\r\n};\r\n// top position\r\nfunction setTop(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.top = e.target.value + 'px';\r\n    });\r\n};\r\n// left position\r\nfunction setLeft(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.left = e.target.value + 'px';\r\n    });\r\n};\r\n// width\r\nfunction setWidth(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.width = e.target.value + 'px';\r\n    });\r\n};\r\n// font family\r\nfunction setFontFamily(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.fontFamily = e.target.value;\r\n    });\r\n};\r\n// font size\r\nfunction setFontSize(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.fontSize = e.target.value + 'px';\r\n    });\r\n};\r\n// line height\r\nfunction setLineHeight(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.lineHeight = e.target.value;\r\n    });\r\n};\r\n// color picker\r\nfunction setColor(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.color = e.target.value;\r\n    });\r\n};\r\n// font style\r\nfunction setFontStyle(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        let style = 'normal',\r\n            weight = 'normal';\r\n        switch (e.target.value) {\r\n            case 'По умолчанию':\r\n                style = 'normal';\r\n                weight = 'normal';\r\n                break;\r\n            case 'Жирный':\r\n                style = 'normal';\r\n                weight = 'bold';\r\n                break;\r\n            case 'Курсив':\r\n                style = 'italic';\r\n                weight = 'normal';\r\n                break;\r\n            case 'Жирный + курсив':\r\n                style = 'italic';\r\n                weight = 'bold';\r\n                break;\r\n            default:\r\n                style = 'normal';\r\n                weight = 'normal';\r\n        }\r\n        element.style.fontStyle = style;\r\n        element.style.fontWeight = weight;\r\n    });\r\n};\r\n// text align\r\nfunction setTextAlign(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        let textAlign = 'left';\r\n        switch (e.target.value) {\r\n            case 'По левому краю':\r\n                textAlign = 'left';\r\n                break;\r\n            case 'По правому краю':\r\n                textAlign = 'right';\r\n                break;\r\n            case 'По центру':\r\n                textAlign = 'center';\r\n                break;\r\n            case 'По ширине':\r\n                textAlign = 'justify';\r\n                break;\r\n        }\r\n        element.style.textAlign = textAlign;\r\n    });\r\n};\r\n\r\n// drag and resize\r\nfunction setDragResize(element, switcherTop, switcherLeft, switcherWidth) {\r\n    element.draggable({\r\n        containment: 'parent',\r\n        drag: function (event, ui) {\r\n            switcherTop.val(Math.ceil(ui.position.top));\r\n            switcherLeft.val(Math.ceil(ui.position.left));\r\n        }\r\n    });\r\n    element.resizable({\r\n        handles: 'e, w',\r\n        containment: 'parent',\r\n        resize: function (event, ui) {\r\n            event.target.style.maxWidth = `${Math.ceil(ui.size.width)}px`;\r\n            switcherWidth.val(Math.ceil(ui.size.width));\r\n        }\r\n    });\r\n};\r\n\r\n// read file (for set background)\r\nfunction readFile(file, onLoadCallback) {\r\n    var reader = new FileReader();\r\n    reader.onload = onLoadCallback;\r\n    reader.readAsDataURL(file);\r\n}\r\n\r\n// create pdf\r\nfunction createPreviewPdf() {\r\n    // page size A4: [595.28, 841.89],\r\n    // https://github.com/bpampuch/pdfmake/blob/7b5675d5b9d5d7b815bd721e00504b16560a6382/src/standardPageSizes.js\r\n    const w = $('.cert-wokrspace__content').width(),\r\n        h = $('.cert-wokrspace__content').height(),\r\n        paperW = (userData.orientation == 'landscape') ? 841.89 : 595.28,\r\n        paperH = (userData.orientation == 'landscape') ? 595.28 : 841.89;\r\n\r\n    function getX(elem) {\r\n        return elem.position().left / w * paperW;\r\n    };\r\n\r\n    function getY(elem) {\r\n        return elem.position().top / h * paperH;\r\n    };\r\n\r\n    function getW(elem) {\r\n        return elem.width() / w * paperW;\r\n    };\r\n\r\n    function getFont(elem) {\r\n        return elem.css('')\r\n    };\r\n\r\n    function getBgW() {      \r\n        return (userData.background.size === 'По ширине') ? paperW : '';\r\n    }\r\n    function getBgH() {\r\n        return (userData.background.size === 'По высоте') ? paperH : '';\r\n    }\r\n\r\n    function getBgX() {\r\n        let bgPosition;\r\n        switch (userData.background.position) {\r\n            case 'Верх / Лево':\r\n                bgPosition = 'top left';\r\n                break;\r\n            case 'Верх / Центр':\r\n                bgPosition = 'top center';\r\n                break;\r\n            case 'Верх / Право':\r\n                bgPosition = 'top right';\r\n                break;\r\n            case 'Право / Центр':\r\n                bgPosition = 'center right';\r\n                break;\r\n            case 'Право / Низ':\r\n                bgPosition = 'bottom right';\r\n                break;\r\n            case 'Низ / Центр':\r\n                bgPosition = 'bottom center';\r\n                break;\r\n            case 'Низ / Лево':\r\n                bgPosition = 'bottom left';\r\n                break;\r\n            case 'Лево / Центр':\r\n                bgPosition = 'center left';\r\n                break;\r\n            case 'Центр':\r\n                bgPosition = 'center center';\r\n                break;\r\n            default:\r\n                bgPosition = 'top left';\r\n                break;\r\n        }\r\n        console.log(bgPosition);\r\n        return 0;\r\n\r\n    };\r\n\r\n    // !!! НУЖНО ИСПРАВИТЬ РАЗМЕРЫ ФОНА\r\n    const docDefinition = {\r\n        info: {\r\n            title: 'certificate',\r\n        },\r\n        pageSize: 'A4',\r\n        pageOrientation: userData.orientation,\r\n        background: [{\r\n            image: userData.background.image,\r\n            width: getBgW(),\r\n            height: getBgH(),\r\n        }],\r\n        content: [{\r\n                table: {\r\n                    widths: [getW($('.cert-name'))],\r\n                    body: [\r\n                        [{\r\n                            fontSize: 24,\r\n                            text: $('.cert-name').text(),\r\n                            border: [false, false, false, false],\r\n                            margin: [-5, -5, -5, -5],\r\n\r\n                        }]\r\n                    ],\r\n                },\r\n                absolutePosition: {\r\n                    x: getX($('.cert-name')),\r\n                    y: getY($('.cert-name'))\r\n                },\r\n            },\r\n            {\r\n                text: $('.cert-number').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-number')),\r\n                    y: getY($('.cert-number'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-course').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-course')),\r\n                    y: getY($('.cert-course'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-date').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-date')),\r\n                    y: getY($('.cert-date'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-duration').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-duration')),\r\n                    y: getY($('.cert-duration'))\r\n                }\r\n            }\r\n        ],\r\n    };\r\n\r\n    $('#previewFancyLink')[0].innerHTML = `<a data-fancybox data-type=\"iframe\" data-src=\"\" href=\"javascript:;\"></a>`;\r\n    pdfMake.createPdf(docDefinition).getBase64((data) => {\r\n        $('#previewFancyLink a').attr('data-src', `data:application/pdf;base64,${data}`).click();\r\n    });\r\n\r\n    // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n}"]}