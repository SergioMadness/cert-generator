{"version":3,"sources":["cert.js"],"names":["defaultData","userData","loadedImg","scale","resetData","fontFamily","fontSize","lineHeight","color","fontStyle","textAlign","value","maxStr","number","positionTop","positionLeft","width","course","date","duration","background","image","size","orientation","elements","workspace","$","control","data","renderWorkspace","elem","key","_typeof","setElement","i","css","setBgSize","val","bgSize","find","bgX","bgY","setWorkspaceZoom","zoom","setBorder","switcher","top","setTop","addEventListener","element","style","target","font-size","line-height","text-align","font-style","calcViewFont","font-weight","e","setFontSize","parseInt","weight","setTextAlign","setLeft","setWidth","setValue","text","handles","containment","setDragResize","switcherTop","setLineHeight","ceil","position","left","ui","switcherLeft","setColor","resizable","switcherWidth","readFile","reader","w","h","paperW","paperH","fontWeight","getW","getFontFamily","getFontWeight","getFontStyle","rgb2hex","rgb","hex","match","setMaxStr","getColor","getAlignment","info","draggable","pageSize","pageOrientation","Math","getBgW","height","getBgH","absolutePosition","x","Number","content","table","widths","body","getFontSize","font","bold","getLineHeight","file","onLoadCallback","FileReader","italics","alignment","margin","getX","y","getY","toString","slice","border","pdfMake","fonts","Roboto","normal","bolditalics","Montserrat","createPdf","docDefinition","inputValue","numStr","Open Sans","Lora","innerHTML","getBase64","attr","click","fail","textStatus","jQuery","extend","error","err","document","fr","on","img","this","files","src","result","setBgPosition","each","setFontFamily","querySelector","setFontStyle","getAttribute","createPreviewPdf","console","key1","elem1","classList","remove","contains","add","setControl","log"],"mappings":"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","file":"../cert.js","sourcesContent":["// GLOBALS\r\nlet defaultData = {},\r\n  userData = {},\r\n  loadedImg = {},\r\n  scale = 1,\r\n  resetData = {\r\n    \"name\": {\r\n      \"positionTop\": \"50\",\r\n      \"positionLeft\": \"50\",\r\n      \"width\": \"500\",\r\n      \"fontFamily\": \"Roboto\",\r\n      \"fontSize\": \"20\",\r\n      \"lineHeight\": \"1.25\",\r\n      \"color\": \"#ff0000\",\r\n      \"fontStyle\": \"Жирный\",\r\n      \"textAlign\": \"По левому краю\",\r\n      \"value\": \"Иванов Иван Иванович\",\r\n      \"maxStr\": \"2\"\r\n    },\r\n    \"number\": {\r\n      \"positionTop\": \"50\",\r\n      \"positionLeft\": \"600\",\r\n      \"width\": \"500\",\r\n      \"fontFamily\": \"Roboto\",\r\n      \"fontSize\": \"20\",\r\n      \"lineHeight\": \"1.25\",\r\n      \"color\": \"#0000ff\",\r\n      \"fontStyle\": \"Жирный\",\r\n      \"textAlign\": \"По левому краю\",\r\n      \"value\": \"000-0000-000-01\",\r\n      \"maxStr\": \"1\"\r\n    },\r\n    \"course\": {\r\n      \"positionTop\": \"300\",\r\n      \"positionLeft\": \"50\",\r\n      \"width\": \"500\",\r\n      \"fontFamily\": \"Roboto\",\r\n      \"fontSize\": \"30\",\r\n      \"lineHeight\": \"1.25\",\r\n      \"color\": \"#00ff00\",\r\n      \"fontStyle\": \"По умолчанию\",\r\n      \"textAlign\": \"По левому краю\",\r\n      \"value\": \"Технология блокчейн в сельском хозяйстве\",\r\n      \"maxStr\": \"2\"\r\n    },\r\n    \"date\": {\r\n      \"positionTop\": \"600\",\r\n      \"positionLeft\": \"50\",\r\n      \"width\": \"500\",\r\n      \"fontFamily\": \"Roboto\",\r\n      \"fontSize\": \"20\",\r\n      \"lineHeight\": \"1.25\",\r\n      \"color\": \"#ff0000\",\r\n      \"fontStyle\": \"По умолчанию\",\r\n      \"textAlign\": \"По левому краю\",\r\n      \"value\": \"Дата окончания: 30.02.2007\",\r\n      \"maxStr\": \"1\"\r\n    },\r\n    \"duration\": {\r\n      \"positionTop\": \"700\",\r\n      \"positionLeft\": \"50\",\r\n      \"width\": \"500\",\r\n      \"fontFamily\": \"Roboto\",\r\n      \"fontSize\": \"20\",\r\n      \"lineHeight\": \"1.25\",\r\n      \"color\": \"#0000ff\",\r\n      \"fontStyle\": \"По умолчанию\",\r\n      \"textAlign\": \"По левому краю\",\r\n      \"value\": \"Продолжительность: 2 часа\",\r\n      \"maxStr\": \"1\"\r\n    },\r\n    \"background\": {\r\n      \"image\": \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAAQABAAD/4QOaRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAAagEoAAMAAAABAAIAAAExAAIAAAAdAAAAcgEyAAIAAAAUAAAAkIdpAAQAAAABAAAApAAAANAAACcQAAAnEAAAJxAAACcQQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKQAAMjAxODowNToyOSAxOTowNzoyMgAAA6ABAAMAAAAB//8AAKACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAAAAAAAGAQMAAwAAAAEABgAAARoABQAAAAEAAAEeARsABQAAAAEAAAEmASgAAwAAAAEAAgAAAgEABAAAAAEAAAEuAgIABAAAAAEAAAJjAAAAAAAAAEgAAAABAAAASAAAAAH/2P/bAEMACAYGBwYFCAcHBwkJCAoMFA0MCwsMGRITDxQdGh8eHRocHCAkLicgIiwjHBwoNyksMDE0NDQfJzk9ODI8LjM0Mv/bAEMBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/AABEIAAEAAQMBIQACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APf6KAP/2QD/7QtoUGhvdG9zaG9wIDMuMAA4QklNBCUAAAAAABAAAAAAAAAAAAAAAAAAAAAAOEJJTQQ6AAAAAAD3AAAAEAAAAAEAAAAAAAtwcmludE91dHB1dAAAAAUAAAAAUHN0U2Jvb2wBAAAAAEludGVlbnVtAAAAAEludGUAAAAASW1nIAAAAA9wcmludFNpeHRlZW5CaXRib29sAAAAAAtwcmludGVyTmFtZVRFWFQAAAABAAAAAAAPcHJpbnRQcm9vZlNldHVwT2JqYwAAABUEHwQwBEAEMAQ8BDUEQgRABEsAIARGBDIENQRCBD4EPwRABD4EMQRLAAAAAAAKcHJvb2ZTZXR1cAAAAAEAAAAAQmx0bmVudW0AAAAMYnVpbHRpblByb29mAAAACXByb29mQ01ZSwA4QklNBDsAAAAAAi0AAAAQAAAAAQAAAAAAEnByaW50T3V0cHV0T3B0aW9ucwAAABcAAAAAQ3B0bmJvb2wAAAAAAENsYnJib29sAAAAAABSZ3NNYm9vbAAAAAAAQ3JuQ2Jvb2wAAAAAAENudENib29sAAAAAABMYmxzYm9vbAAAAAAATmd0dmJvb2wAAAAAAEVtbERib29sAAAAAABJbnRyYm9vbAAAAAAAQmNrZ09iamMAAAABAAAAAAAAUkdCQwAAAAMAAAAAUmQgIGRvdWJAb+AAAAAAAAAAAABHcm4gZG91YkBv4AAAAAAAAAAAAEJsICBkb3ViQG/gAAAAAAAAAAAAQnJkVFVudEYjUmx0AAAAAAAAAAAAAAAAQmxkIFVudEYjUmx0AAAAAAAAAAAAAAAAUnNsdFVudEYjUHhsP/AAAAAAAAAAAAAKdmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAAAAAABBjcm9wV2hlblByaW50aW5nYm9vbAAAAAAOY3JvcFJlY3RCb3R0b21sb25nAAAAAAAAAAxjcm9wUmVjdExlZnRsb25nAAAAAAAAAA1jcm9wUmVjdFJpZ2h0bG9uZwAAAAAAAAALY3JvcFJlY3RUb3Bsb25nAAAAAAA4QklNA+0AAAAAABAAAQAAAAEAAQABAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAABaOEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAABOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgABOEJJTQQCAAAAAAAEAAAAADhCSU0EMAAAAAAAAgEBOEJJTQQtAAAAAAAGAAEAAAACOEJJTQQIAAAAAAAQAAAAAQAAAkAAAAJAAAAAADhCSU0EHgAAAAAABAAAAAA4QklNBBoAAAAAA0sAAAAGAAAAAAAAAAAAAAABAAAAAQAAAAsEEQQ1BDcAIAQ4BDwENQQ9BDgALQAxAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAbnVsbAAAAAIAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAAAAQAAAABSZ2h0bG9uZwAAAAEAAAAGc2xpY2VzVmxMcwAAAAFPYmpjAAAAAQAAAAAABXNsaWNlAAAAEgAAAAdzbGljZUlEbG9uZwAAAAAAAAAHZ3JvdXBJRGxvbmcAAAAAAAAABm9yaWdpbmVudW0AAAAMRVNsaWNlT3JpZ2luAAAADWF1dG9HZW5lcmF0ZWQAAAAAVHlwZWVudW0AAAAKRVNsaWNlVHlwZQAAAABJbWcgAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0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IiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA1LTI5VDE5OjA3OjIyKzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wNS0yOVQxOTowNzoyMiswMzowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NTY5NTUzMi1mOTZmLTFiNGUtODIwNi01YjU3OTM4MjgyZmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoxZGYxNDEzOC0xZjU1LTYwNDUtYWE0YS0wMmZmYWRhN2NhMTQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozMzQ1MzQ0NC0xOTZkLTdiNGMtYmViYi05ZWNlNzJkMmRkOTUiIGRjOmZvcm1hdD0iaW1hZ2UvanBlZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyI+DQoJCQk8eG1wTU06SGlzdG9yeT4NCgkJCQk8cmRmOlNlcT4NCgkJCQkJPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MzM0NTM0NDQtMTk2ZC03YjRjLWJlYmItOWVjZTcyZDJkZDk1IiBzdEV2dDp3aGVuPSIyMDE4LTA1LTI5VDE5OjA3OjIyKzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+DQoJCQkJCTxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NTY5NTUzMi1mOTZmLTFiNGUtODIwNi01YjU3OTM4MjgyZmQiIHN0RXZ0OndoZW49IjIwMTgtMDUtMjlUMTk6MDc6MjIrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4NCgkJCQk8L3JkZjpTZXE+DQoJCQk8L3htcE1NOkhpc3Rvcnk+DQoJCTwvcmRmOkRlc2NyaXB0aW9uPg0KCTwvcmRmOlJERj4NCjwveDp4bXBtZXRhPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9J3cnPz7/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9/KKKKAP/2Q==\",\r\n      \"positionTop\": \"0\",\r\n      \"positionLeft\": \"0\",\r\n      \"size\": \"По ширине\"\r\n    },\r\n    \"orientation\": \"landscape\"\r\n  };\r\nconst elements = [{\r\n    workspace: $(\".cert-name\"),\r\n    control: $(\"#control-name\"),\r\n    data: \"name\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-number\"),\r\n    control: $(\"#control-number\"),\r\n    data: \"number\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-course\"),\r\n    control: $(\"#control-course\"),\r\n    data: \"course\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-date\"),\r\n    control: $(\"#control-date\"),\r\n    data: \"date\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-duration\"),\r\n    control: $(\"#control-duration\"),\r\n    data: \"duration\"\r\n  }\r\n];\r\n\r\n// GETTING DATA\r\n$.getJSON(\"json/data.json\")\r\n  .done(function (json) {\r\n    userData = defaultData = json;\r\n    renderWorkspace(defaultData);\r\n  })\r\n  .fail(function (jqxhr, textStatus, error) {\r\n    var err = textStatus + \", \" + error;\r\n    console.log(\"Request Failed: \" + err);\r\n    userData = jQuery.extend(true, {}, resetData);\r\n    defaultData = jQuery.extend(true, {}, resetData);\r\n    renderWorkspace(defaultData);\r\n  });\r\n\r\n$(document).ready(function () {\r\n  // default zoom by workspace width\r\n  scale = $(\".cert-wokrspace__content\").width() / $(\".cert-wokrspace\").width();\r\n  setWorkspaceZoom(scale);\r\n\r\n  // bg picker\r\n  $(\"#fileBg\").on(\"change\", function (e) {\r\n    let fr = new FileReader();\r\n    fr.readAsDataURL(this.files[0]);\r\n    fr.onload = function () {\r\n      let img = new Image();\r\n      img.onload = function () {\r\n        loadedImg = {\r\n          width: img.width,\r\n          height: img.height\r\n        };\r\n      };\r\n      img.src = fr.result;\r\n      $(\".cert-wokrspace__content\").css(\r\n        \"background-image\",\r\n        `url(\"${img.src}\")`\r\n      );\r\n      userData.background.image = img.src;\r\n    };\r\n\r\n    setBgSize();\r\n    setBgPosition(userData);\r\n  });\r\n  $(\"#control-bg\")\r\n    .find(\".control-bg-size\")\r\n    .on(\"change\", setBgSize);\r\n  $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .on(\"input\", changeBgPosition);\r\n  $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .on(\"input\", changeBgPosition);\r\n\r\n  $.each(elements, function (key, elem) {\r\n    // TOGGLE ACCORDITION\r\n    elem.workspace[0].addEventListener(\"click\", function () {\r\n      $(\".cert-controls .card-header a\")[key + 1].click();\r\n    });\r\n    // ACCORDITION (PANEL) CONTROLS\r\n    setBorder(\r\n      elem.control[0].querySelector(\".control-hidder\"),\r\n      elem.workspace[0]\r\n    );\r\n    setTop(\r\n      elem.control[0].querySelector(\".control-top\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setLeft(\r\n      elem.control[0].querySelector(\".control-left\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setWidth(\r\n      elem.control[0].querySelector(\".control-width\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontFamily(\r\n      elem.control[0].querySelector(\".control-font-family\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontSize(\r\n      elem.control[0].querySelector(\".control-font-size\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setLineHeight(\r\n      elem.control[0].querySelector(\".control-line-height\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setColor(\r\n      elem.control[0].querySelector(\".control-color\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontStyle(\r\n      elem.control[0].querySelector(\".control-font-style\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setTextAlign(\r\n      elem.control[0].querySelector(\".control-text-align\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    // if (key == 0 || key == 1) {\r\n    setValue(\r\n      elem.control[0].querySelector(\".control-value\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setMaxStr(\r\n      elem.control[0].querySelector(\".control-max-str\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    // }\r\n    // DRAG AND RESIZE\r\n    setDragResize(\r\n      $(elem.workspace[0]),\r\n      $(elem.control[0]).find(\".control-top\"),\r\n      $(elem.control[0]).find(\".control-left\"),\r\n      $(elem.control[0]).find(\".control-width\"),\r\n      userData[elem.data]\r\n    );\r\n  });\r\n  $.each($(\".cert-controls .card-header a\"), function (key, elem) {\r\n    elem.addEventListener(\"click\", function () {\r\n      $.each(elements, function (key1, elem1) {\r\n        elem1.workspace[0].classList.remove(\"cert-active\");\r\n      });\r\n\r\n      if (elem.getAttribute(\"aria-expanded\") === \"false\" && key >= 1) {\r\n        if (\r\n          elements[key - 1].workspace[0].classList.contains(\"cert-bordered\")\r\n        ) {\r\n          elements[key - 1].workspace[0].classList.add(\"cert-active\");\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  // Create PDF\r\n  $(\"#preview\").click(function () {\r\n    createPreviewPdf();\r\n  });\r\n\r\n  $(\"#save\").click(function () {\r\n    console.log(userData);\r\n  });\r\n\r\n  $(\"#reset\").click(function () {\r\n    userData = jQuery.extend(true, {}, resetData);\r\n    defaultData = jQuery.extend(true, {}, resetData);\r\n    renderWorkspace(resetData);\r\n    $.each(elements, function (key, elem) {\r\n      // DRAG AND RESIZE\r\n      setDragResize(\r\n        $(elem.workspace[0]),\r\n        $(elem.control[0]).find(\".control-top\"),\r\n        $(elem.control[0]).find(\".control-left\"),\r\n        $(elem.control[0]).find(\".control-width\"),\r\n        userData[elem.data]\r\n      );\r\n    });\r\n  });\r\n});\r\n/*\r\n * CONTROLS EVENTS\r\n */\r\n\r\n// WORKSPACE CONTROLS\r\n// resize workspace\r\n$(\".cert-wokrspace__zoom\").click(function () {\r\n  if (scale <= 3) {\r\n    scale += 0.5;\r\n    setWorkspaceZoom(scale);\r\n  }\r\n});\r\n// reset workspace\r\n$(\".cert-wokrspace__reset\").click(function () {\r\n  scale = $(\".cert-wokrspace__content\").width() / $(\".cert-wokrspace\").width();\r\n  setWorkspaceZoom(scale);\r\n});\r\n// reset original\r\n$(\".cert-wokrspace__original\").click(function () {\r\n  setWorkspaceZoom(1);\r\n  scale = 1;\r\n});\r\n// set landscape\r\n$(\".cert-wokrspace__landscape\").click(function () {\r\n  $(\".cert-wokrspace__content\").css({\r\n    height: \"793.7px\",\r\n    width: \"1122.5px\"\r\n  });\r\n  userData.orientation = \"landscape\";\r\n});\r\n// set portrait\r\n$(\".cert-wokrspace__portrait\").click(function () {\r\n  $(\".cert-wokrspace__content\").css({\r\n    height: \"1122.5px\",\r\n    width: \"793.7px\"\r\n  });\r\n  userData.orientation = \"portrait\";\r\n});\r\n\r\n/*\r\n * FUNCTIONS\r\n */\r\n// SET DEFAULT DATA INTO WORKSPACE\r\nfunction renderWorkspace(data) {\r\n  let i = 0;\r\n  for (let key in data) {\r\n    if (typeof data[key] === \"object\") {\r\n      // set workspace\r\n      if (key !== \"background\") {\r\n        setElement(elements[i].workspace, data[key]);\r\n        setControl(elements[i].control, data[key]);\r\n        i++;\r\n      } else {\r\n        $(\".cert-wokrspace__content\").css(\r\n          \"background-image\",\r\n          `url(\"${data.background.image}\")`\r\n        );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// background\r\nfunction setBgSize() {\r\n  let bgSize;\r\n  switch (\r\n    $(\"#control-bg\")\r\n    .find(\".control-bg-size\")\r\n    .val()\r\n  ) {\r\n    case \"По ширине\":\r\n      bgSize = \"100% auto\";\r\n      break;\r\n    case \"По высоте\":\r\n      bgSize = \"auto 100%\";\r\n      break;\r\n  }\r\n  $(\".cert-wokrspace__content\").css(\"background-size\", bgSize);\r\n  userData.background.size = $(\"#control-bg\")\r\n    .find(\".control-bg-size\")\r\n    .val();\r\n}\r\n\r\nfunction setBgPosition(data) {\r\n  let bgX = data.background.positionLeft,\r\n    bgY = data.background.positionTop;\r\n  $(\".cert-wokrspace__content\").css(\"background-position\", `${bgX}px ${bgY}px`);\r\n  $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .val(bgY);\r\n  $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .val(bgX);\r\n}\r\n\r\nfunction changeBgPosition() {\r\n  let bgY = $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .val();\r\n  let bgX = $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .val();\r\n  $(\".cert-wokrspace__content\").css(\"background-position\", `${bgX}px ${bgY}px`);\r\n  userData.background.positionTop = bgY;\r\n  userData.background.positionLeft = bgX;\r\n}\r\n\r\n// set css and text\r\nfunction setElement(elem, data) {\r\n  elem\r\n    .css({\r\n      top: `${data.positionTop}px`,\r\n      left: `${data.positionLeft}px`,\r\n      width: `${data.width}px`,\r\n      \"font-family\": data.fontFamily,\r\n      \"font-size\": `${data.fontSize}px`,\r\n      \"line-height\": data.lineHeight,\r\n      color: data.color,\r\n      \"text-align\": data.textAlign\r\n    })\r\n    .text(data.value);\r\n  // set font-style and font-weight\r\n  switch (data.fontStyle) {\r\n    case \"По умолчанию\":\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n      break;\r\n    case \"Жирный\":\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"bold\"\r\n      });\r\n      break;\r\n    case \"Курсив\":\r\n      elem.css({\r\n        \"font-style\": \"italic\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n      break;\r\n    case \"Жирный + курсив\":\r\n      elem.css({\r\n        \"font-style\": \"italic\",\r\n        \"font-weight\": \"bold\"\r\n      });\r\n      break;\r\n    default:\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n  }\r\n  // set alignment\r\n  switch (data.textAlign) {\r\n    case \"По левому краю\":\r\n      elem.css(\"text-align\", \"left\");\r\n      break;\r\n    case \"По правому краю\":\r\n      elem.css(\"text-align\", \"right\");\r\n      break;\r\n    case \"По центру\":\r\n      elem.css(\"text-align\", \"center\");\r\n      break;\r\n    case \"По ширине\":\r\n      elem.css(\"text-align\", \"justify\");\r\n      break;\r\n    default:\r\n      elem.css(\"text-align\", \"left\");\r\n      break;\r\n  }\r\n}\r\n// set controls values\r\nfunction setControl(elem, data) {\r\n  elem.find(\".control-top\").val(data.positionTop);\r\n  elem.find(\".control-left\").val(data.positionLeft);\r\n  elem.find(\".control-width\").val(data.width);\r\n  elem.find(\".control-font-family\").val(data.fontFamily);\r\n  elem.find(\".control-font-size\").val(data.fontSize);\r\n  elem.find(\".control-line-height\").val(data.lineHeight);\r\n  elem.find(\".control-color\").val(data.color);\r\n  elem.find(\".control-font-style\").val(data.fontStyle);\r\n  elem.find(\".control-text-align\").val(data.textAlign);\r\n  elem.find(\".control-value\").val(data.value);\r\n  elem.find(\".control-max-str\").val(data.maxStr);\r\n}\r\n// set workspace zoom\r\nfunction setWorkspaceZoom(scale) {\r\n  $(\".cert-wokrspace__content\").css({\r\n    zoom: 1 / scale,\r\n    \"-moz-transform\": 1 / scale\r\n  });\r\n}\r\n\r\n// functions for control panel\r\n// show border for workspace block\r\nfunction setBorder(switcher, element) {\r\n  switcher.addEventListener(\"click\", function (e) {\r\n    element.classList.toggle(\"cert-bordered\");\r\n    element.classList.toggle(\"cert-active\");\r\n  });\r\n}\r\n// top position\r\nfunction setTop(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.top = e.target.value + \"px\";\r\n    data.positionTop = e.target.value;\r\n  });\r\n}\r\n// left position\r\nfunction setLeft(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.left = e.target.value + \"px\";\r\n    data.positionLeft = e.target.value;\r\n  });\r\n}\r\n// width\r\nfunction setWidth(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.width = e.target.value + \"px\";\r\n    data.width = e.target.value;\r\n    // calc font\r\n    calcViewFont(element, data.maxStr, data.fontSize);\r\n  });\r\n}\r\n// font family\r\nfunction setFontFamily(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.fontFamily = e.target.value;\r\n    data.fontFamily = e.target.value;\r\n  });\r\n}\r\n// font size\r\nfunction setFontSize(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    if (parseInt(e.target.value) > 500) {\r\n      e.target.value = 500;\r\n    }\r\n    element.style.fontSize = e.target.value + \"px\";\r\n    data.fontSize = e.target.value;\r\n    // calc font\r\n    calcViewFont(element, data.maxStr, data.fontSize);\r\n  });\r\n}\r\n// line height\r\nfunction setLineHeight(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.lineHeight = e.target.value;\r\n    data.lineHeight = e.target.value;\r\n  });\r\n}\r\n// color picker\r\nfunction setColor(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.color = e.target.value;\r\n    data.color = e.target.value;\r\n  });\r\n}\r\n// font style\r\nfunction setFontStyle(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    let style = \"normal\",\r\n      weight = \"normal\";\r\n    switch (e.target.value) {\r\n      case \"По умолчанию\":\r\n        style = \"normal\";\r\n        weight = \"normal\";\r\n        break;\r\n      case \"Жирный\":\r\n        style = \"normal\";\r\n        weight = \"bold\";\r\n        break;\r\n      case \"Курсив\":\r\n        style = \"italic\";\r\n        weight = \"normal\";\r\n        break;\r\n      case \"Жирный + курсив\":\r\n        style = \"italic\";\r\n        weight = \"bold\";\r\n        break;\r\n      default:\r\n        style = \"normal\";\r\n        weight = \"normal\";\r\n    }\r\n    element.style.fontStyle = style;\r\n    element.style.fontWeight = weight;\r\n    data.fontStyle = e.target.value;\r\n  });\r\n}\r\n// text align\r\nfunction setTextAlign(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    let textAlign = \"left\";\r\n    switch (e.target.value) {\r\n      case \"По левому краю\":\r\n        textAlign = \"left\";\r\n        break;\r\n      case \"По правому краю\":\r\n        textAlign = \"right\";\r\n        break;\r\n      case \"По центру\":\r\n        textAlign = \"center\";\r\n        break;\r\n      case \"По ширине\":\r\n        textAlign = \"justify\";\r\n        break;\r\n    }\r\n    element.style.textAlign = textAlign;\r\n    data.textAlign = e.target.value;\r\n  });\r\n}\r\n// text value\r\nfunction setValue(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    $(element).text(e.target.value);\r\n    data.value = e.target.value;\r\n    calcViewFont(\r\n      element,\r\n      data.maxStr,\r\n      parseInt($(element).css(\"font-size\"), 10)\r\n    );\r\n    $(element).resizable({\r\n      handles: \"e, w\",\r\n      containment: \"parent\"\r\n    });\r\n  });\r\n}\r\n// max number strings in block\r\nfunction setMaxStr(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    $(element).css(\"font-size\", `${data.fontSize}px`);\r\n    calcViewFont(\r\n      element,\r\n      e.target.value,\r\n      parseInt($(element).css(\"font-size\"), 10)\r\n    );\r\n    data.maxStr = e.target.value;\r\n  });\r\n}\r\n\r\n// drag and resize\r\nfunction setDragResize(\r\n  element,\r\n  switcherTop,\r\n  switcherLeft,\r\n  switcherWidth,\r\n  data\r\n) {\r\n  element.draggable({\r\n    containment: \"parent\",\r\n    drag: function (event, ui) {\r\n      let top = Math.ceil(ui.position.top),\r\n        left = Math.ceil(ui.position.left);\r\n      switcherTop.val(top);\r\n      switcherLeft.val(left);\r\n      data.positionTop = `${top}`;\r\n      data.positionLeft = `${left}`;\r\n    }\r\n  });\r\n  element.resizable({\r\n    handles: \"e, w\",\r\n    containment: \"parent\",\r\n    resize: function (event, ui) {\r\n      let w = Math.ceil(ui.size.width);\r\n      event.target.style.maxWidth = `${w}px`;\r\n      switcherWidth.val(w);\r\n      data.width = `${w}`;\r\n      // calc font\r\n      calcViewFont(element, data.maxStr, data.fontSize);\r\n    }\r\n  });\r\n}\r\n\r\n// read file (for set background)\r\nfunction readFile(file, onLoadCallback) {\r\n  var reader = new FileReader();\r\n  reader.onload = onLoadCallback;\r\n  reader.readAsDataURL(file);\r\n}\r\n\r\n// create pdf\r\nfunction createPreviewPdf() {\r\n  // page size A4: [595.28, 841.89],\r\n  // https://github.com/bpampuch/pdfmake/blob/7b5675d5b9d5d7b815bd721e00504b16560a6382/src/standardPageSizes.js\r\n  const w = $(\".cert-wokrspace__content\").width(),\r\n    h = $(\".cert-wokrspace__content\").height(),\r\n    paperW = userData.orientation == \"landscape\" ? 841.89 : 595.28,\r\n    paperH = userData.orientation == \"landscape\" ? 595.28 : 841.89;\r\n\r\n  function getX(elem) {\r\n    return elem.position().left / w * paperW;\r\n  }\r\n\r\n  function getY(elem) {\r\n    return elem.position().top / h * paperH;\r\n  }\r\n\r\n  function getW(elem) {\r\n    return elem.width() / w * paperW;\r\n  }\r\n\r\n  function getFontFamily(elem) {\r\n    return elem.css(\"font-family\");\r\n  }\r\n\r\n  function getFontSize(elem) {\r\n    return parseInt(elem.css(\"font-size\"), 10) / w * paperW;\r\n  }\r\n\r\n  function getFontWeight(elem) {\r\n    return elem.css(\"font-weight\") >= 600;\r\n  }\r\n\r\n  function getFontStyle(elem) {\r\n    return elem.css(\"font-style\") === \"italic\";\r\n  }\r\n\r\n  function getLineHeight(elem) {\r\n    return (\r\n      parseInt(elem.css(\"line-height\"), 10) / getFontSize(elem) / w * paperW\r\n    );\r\n  }\r\n\r\n  function rgb2hex(rgb) {\r\n    if (rgb.search(\"rgb\") == -1) {\r\n      return rgb;\r\n    } else {\r\n      rgb = rgb.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+))?\\)$/);\r\n\r\n      function hex(x) {\r\n        return (\"0\" + parseInt(x).toString(16)).slice(-2);\r\n      }\r\n      return \"#\" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\r\n    }\r\n  }\r\n\r\n  function getColor(elem) {\r\n    return rgb2hex(elem.css(\"color\"));\r\n  }\r\n\r\n  function getAlignment(elem) {\r\n    return elem.css(\"text-align\");\r\n  }\r\n\r\n  function getBgW() {\r\n    return userData.background.size === \"По ширине\" ?\r\n      paperW :\r\n      paperH * loadedImg.width / loadedImg.height;\r\n  }\r\n\r\n  function getBgH() {\r\n    return userData.background.size === \"По высоте\" ?\r\n      paperH :\r\n      paperW * loadedImg.height / loadedImg.width;\r\n  }\r\n\r\n  const docDefinition = {\r\n    info: {\r\n      title: \"certificate\"\r\n    },\r\n    pageSize: \"A4\",\r\n    pageOrientation: userData.orientation,\r\n    background: [{\r\n      image: userData.background.image,\r\n      width: getBgW(),\r\n      height: getBgH(),\r\n      absolutePosition: {\r\n        x: Number(userData.background.positionLeft),\r\n        y: Number(userData.background.positionTop)\r\n      }\r\n    }],\r\n    content: [{\r\n        table: {\r\n          widths: [getW($(\".cert-name\"))],\r\n          body: [\r\n            [{\r\n              fontSize: getFontSize($(\".cert-name\")),\r\n              font: getFontFamily($(\".cert-name\")),\r\n              bold: getFontWeight($(\".cert-name\")),\r\n              italics: getFontStyle($(\".cert-name\")),\r\n              lineHeight: getLineHeight($(\".cert-name\")),\r\n              alignment: getAlignment($(\".cert-name\")),\r\n              color: getColor($(\".cert-name\")),\r\n              text: $(\".cert-name\").text(),\r\n              border: [false, false, false, false],\r\n              margin: [-5, -5, -5, -5]\r\n            }]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-name\")),\r\n          y: getY($(\".cert-name\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-number\"))],\r\n          body: [\r\n            [{\r\n              fontSize: getFontSize($(\".cert-number\")),\r\n              font: getFontFamily($(\".cert-number\")),\r\n              bold: getFontWeight($(\".cert-number\")),\r\n              italics: getFontStyle($(\".cert-number\")),\r\n              lineHeight: getLineHeight($(\".cert-number\")),\r\n              alignment: getAlignment($(\".cert-number\")),\r\n              color: getColor($(\".cert-number\")),\r\n              text: $(\".cert-number\").text(),\r\n              border: [false, false, false, false],\r\n              margin: [-5, -5, -5, -5]\r\n            }]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-number\")),\r\n          y: getY($(\".cert-number\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-course\"))],\r\n          body: [\r\n            [{\r\n              fontSize: getFontSize($(\".cert-course\")),\r\n              font: getFontFamily($(\".cert-course\")),\r\n              bold: getFontWeight($(\".cert-course\")),\r\n              italics: getFontStyle($(\".cert-course\")),\r\n              lineHeight: getLineHeight($(\".cert-course\")),\r\n              alignment: getAlignment($(\".cert-course\")),\r\n              color: getColor($(\".cert-course\")),\r\n              text: $(\".cert-course\").text(),\r\n              border: [false, false, false, false],\r\n              margin: [-5, -5, -5, -5]\r\n            }]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-course\")),\r\n          y: getY($(\".cert-course\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-date\"))],\r\n          body: [\r\n            [{\r\n              fontSize: getFontSize($(\".cert-date\")),\r\n              font: getFontFamily($(\".cert-date\")),\r\n              bold: getFontWeight($(\".cert-date\")),\r\n              italics: getFontStyle($(\".cert-date\")),\r\n              lineHeight: getLineHeight($(\".cert-date\")),\r\n              alignment: getAlignment($(\".cert-date\")),\r\n              color: getColor($(\".cert-date\")),\r\n              text: $(\".cert-date\").text(),\r\n              border: [false, false, false, false],\r\n              margin: [-5, -5, -5, -5]\r\n            }]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-date\")),\r\n          y: getY($(\".cert-date\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-duration\"))],\r\n          body: [\r\n            [{\r\n              fontSize: getFontSize($(\".cert-duration\")),\r\n              font: getFontFamily($(\".cert-duration\")),\r\n              bold: getFontWeight($(\".cert-duration\")),\r\n              italics: getFontStyle($(\".cert-duration\")),\r\n              lineHeight: getLineHeight($(\".cert-duration\")),\r\n              alignment: getAlignment($(\".cert-duration\")),\r\n              color: getColor($(\".cert-duration\")),\r\n              text: $(\".cert-duration\").text(),\r\n              border: [false, false, false, false],\r\n              margin: [-5, -5, -5, -5]\r\n            }]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-duration\")),\r\n          y: getY($(\".cert-duration\"))\r\n        }\r\n      }\r\n    ]\r\n  };\r\n\r\n  pdfMake.fonts = {\r\n    Roboto: {\r\n      normal: \"Roboto-Regular.ttf\",\r\n      bold: \"Roboto-Bold.ttf\",\r\n      italics: \"Roboto-Italic.ttf\",\r\n      bolditalics: \"Roboto-BoldItalic.ttf\"\r\n    },\r\n    \"Open Sans\": {\r\n      normal: \"OpenSans-Regular.ttf\",\r\n      bold: \"OpenSans-Bold.ttf\",\r\n      italics: \"OpenSans-Italic.ttf\",\r\n      bolditalics: \"OpenSans-BoldItalic.ttf\"\r\n    },\r\n    Montserrat: {\r\n      normal: \"Montserrat-Regular.ttf\",\r\n      bold: \"Montserrat-Bold.ttf\",\r\n      italics: \"Montserrat-Italic.ttf\",\r\n      bolditalics: \"Montserrat-BoldItalic.ttf\"\r\n    },\r\n    Lora: {\r\n      normal: \"Lora-Regular.ttf\",\r\n      bold: \"Lora-Bold.ttf\",\r\n      italics: \"Lora-Italic.ttf\",\r\n      bolditalics: \"Lora-BoldItalic.ttf\"\r\n    }\r\n  };\r\n\r\n  $(\r\n    \"#previewFancyLink\"\r\n  )[0].innerHTML = `<a data-fancybox data-type=\"iframe\" data-src=\"\" href=\"javascript:;\"></a>`;\r\n  pdfMake.createPdf(docDefinition).getBase64(data => {\r\n    $(\"#previewFancyLink a\")\r\n      .attr(\"data-src\", `data:application/pdf;base64,${data}`)\r\n      .click();\r\n  });\r\n\r\n  // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n}\r\n\r\n/* calculation font size with max strings number */\r\nfunction calcViewFont(element, inputValue, fontSize) {\r\n  $(element).css(\"font-size\", `${fontSize}px`); // reset\r\n  let numStr = elem => {\r\n    return $(elem).height() / parseInt($(elem).css(\"line-height\"), 10);\r\n  };\r\n  let i = 0;\r\n  while (numStr($(element)) > inputValue) {\r\n    i++;\r\n    $(element).css(\"font-size\", `${fontSize - i}px`);\r\n  }\r\n}"]}