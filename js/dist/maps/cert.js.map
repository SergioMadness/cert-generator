{"version":3,"sources":["cert.js"],"names":["params","name","positionLeft","fontSize","lineHeight","width","number","value","course","date","duration","scale","orientation","$","document","ready","elems","text","css","top","positionTop","left","font-size","line-height","font-family","val","setDragResize","each","key","elem","click","addEventListener","getAttribute","hasClass","toggleClass","setSizes","height","zoom","-moz-transform","element","switcher","target","e","setTop","on","setLeft","setFontSize","setLineHeight","setColor","setFontFamily","setFontStyle","style","weight","setTextAlign","textAlign","font-style","font-weight","draggable","containment","switcherLeft","ceil","handles","switcherTop","switcherWidth","resize","event","maxWidth","Math","ui","position","resizable","reader","FileReader","onload","onLoadCallback","readAsDataURL","file","size","w","h","paperW","paperH","createPreviewPdf","getY","getX","title","x","y","pageOrientation","table","widths","body","margin","absolutePosition","image","bgImage","createPdf","docDefinition","getBase64","attr","innerHTML","pdfMake","data","readFile","this","files","bgSize","result","setBorder"],"mappings":"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","file":"../cert.js","sourcesContent":["// default params\r\nconst params = {\r\n    name: {\r\n        'value': 'Иванов Иван Иванович',\r\n        'positionTop': '50',\r\n        'positionLeft': '50',\r\n        'fontSize': '20',\r\n        'lineHeight': '1.25',\r\n        'width': '500'\r\n    },\r\n    number: {\r\n        'value': '000-0000-000-01',\r\n        'positionTop': '50',\r\n        'positionLeft': '600',\r\n        'fontSize': '20',\r\n        'lineHeight': '1.25',\r\n        'width': '500'\r\n    },\r\n    course: {\r\n        'value': 'Технология блокчейн в сельском хозяйстве',\r\n        'positionTop': '300',\r\n        'positionLeft': '50',\r\n        'fontSize': '24',\r\n        'lineHeight': '1.25',\r\n        'width': '500'\r\n    },\r\n    date: {\r\n        'value': 'Дата окончания: 30.02.2007',\r\n        'positionTop': '600',\r\n        'positionLeft': '50',\r\n        'fontSize': '20',\r\n        'lineHeight': '1.25',\r\n        'width': '500'\r\n    },\r\n    duration: {\r\n        'value': 'Продолжительность: 1 час',\r\n        'positionTop': '700',\r\n        'positionLeft': '50',\r\n        'fontSize': '20',\r\n        'lineHeight': '1.25',\r\n        'width': '500'\r\n    },\r\n};\r\n\r\nlet scale = 1,\r\n    orientation = 'landscape',\r\n    bgImage = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9/KKKKAP/2Q==';\r\n\r\n\r\n$(document).ready(function () {\r\n    scale = ($('.cert-wokrspace__content').width() / $('.cert-wokrspace').width());\r\n    setSizes(scale);\r\n\r\n    // set name\r\n    $('.cert-name').text(params.name.value);\r\n    // set name style\r\n    $('.cert-name').css({\r\n        'top': `${params.name.positionTop}px`,\r\n        'left': `${params.name.positionLeft}px`,\r\n        'width': `${params.name.width}px`,\r\n        'font-size': `${params.name.fontSize}px`,\r\n        'line-height': params.name.lineHeight,\r\n        'font-family': 'Open Sans',\r\n    });\r\n    // set name controls\r\n    $('#name-number-top').val(params.name.positionTop);\r\n    $('#name-number-left').val(params.name.positionLeft);\r\n    $('#name-number-width').val(params.name.width);\r\n    $('#name-number-font-size').val(params.name.fontSize);\r\n    $('#name-number-line-height').val(params.name.lineHeight);\r\n\r\n\r\n    // set number\r\n    $('.cert-number').text(params.number.value);\r\n    // set number style\r\n    $('.cert-number').css({\r\n        'top': `${params.number.positionTop}px`,\r\n        'left': `${params.number.positionLeft}px`,\r\n        'width': `${params.number.width}px`,\r\n        'font-size': `${params.number.fontSize}px`,\r\n        'line-height': params.number.lineHeight,\r\n        'font-family': 'Open Sans',\r\n    });\r\n    // set number controls\r\n    $('#number-number-top').val(params.number.positionTop);\r\n    $('#number-number-left').val(params.number.positionLeft);\r\n    $('#number-number-width').val(params.number.width);\r\n    $('#number-number-font-size').val(params.number.fontSize);\r\n    $('#number-number-line-height').val(params.number.lineHeight);\r\n\r\n\r\n    // set course\r\n    $('.cert-course').text(params.course.value);\r\n    // set course style\r\n    $('.cert-course').css({\r\n        'top': `${params.course.positionTop}px`,\r\n        'left': `${params.course.positionLeft}px`,\r\n        'width': `${params.course.width}px`,\r\n        'font-size': `${params.course.fontSize}px`,\r\n        'line-height': params.course.lineHeight,\r\n        'font-family': 'Open Sans',\r\n    });\r\n    // set course controls\r\n    $('#course-number-top').val(params.course.positionTop);\r\n    $('#course-number-left').val(params.course.positionLeft);\r\n    $('#course-number-width').val(params.course.width);\r\n    $('#course-number-font-size').val(params.course.fontSize);\r\n    $('#course-number-line-height').val(params.course.lineHeight);\r\n\r\n\r\n    // set date\r\n    $('.cert-date').text(params.date.value);\r\n    // set date style\r\n    $('.cert-date').css({\r\n        'top': `${params.date.positionTop}px`,\r\n        'left': `${params.date.positionLeft}px`,\r\n        'width': `${params.date.width}px`,\r\n        'font-size': `${params.date.fontSize}px`,\r\n        'line-height': params.date.lineHeight,\r\n        'font-family': 'Open Sans',\r\n    });\r\n    // set date controls\r\n    $('#date-number-top').val(params.date.positionTop);\r\n    $('#date-number-left').val(params.date.positionLeft);\r\n    $('#date-number-width').val(params.date.width);\r\n    $('#date-number-font-size').val(params.date.fontSize);\r\n    $('#date-number-line-height').val(params.date.lineHeight);\r\n\r\n\r\n    // set duration\r\n    $('.cert-duration').text(params.duration.value);\r\n    // set date style\r\n    $('.cert-duration').css({\r\n        'top': `${params.duration.positionTop}px`,\r\n        'left': `${params.duration.positionLeft}px`,\r\n        'width': `${params.duration.width}px`,\r\n        'font-size': `${params.duration.fontSize}px`,\r\n        'line-height': params.duration.lineHeight,\r\n        'font-family': 'Open Sans',\r\n    });\r\n    // set duration controls\r\n    $('#duration-number-top').val(params.duration.positionTop);\r\n    $('#duration-number-left').val(params.duration.positionLeft);\r\n    $('#duration-number-width').val(params.duration.width);\r\n    $('#duration-number-font-size').val(params.duration.fontSize);\r\n    $('#duration-number-line-height').val(params.duration.lineHeight);\r\n\r\n\r\n    /*\r\n     * DRAG & RESIZE ELEMENTS\r\n     */\r\n    setDragResize($('.cert-name'), $('#name-number-top'), $('#name-number-left'), $('#name-number-width'));\r\n    setDragResize($('.cert-number'), $('#number-number-top'), $('#number-number-left'), $('#number-number-width'));\r\n    setDragResize($('.cert-course'), $('#course-number-top'), $('#course-number-left'), $('#course-number-width'));\r\n    setDragResize($('.cert-date'), $('#date-number-top'), $('#date-number-left'), $('#date-number-width'));\r\n    setDragResize($('.cert-duration'), $('#duration-number-top'), $('#duration-number-left'), $('#duration-number-width'));\r\n    /*\r\n     * ACTIVE ELEMENT\r\n     */\r\n    (() => {\r\n        const elems = [$('.cert-name'), $('.cert-number'), $('.cert-course'), $('.cert-date'), $('.cert-duration')];\r\n        $.each(elems, function (key, elem) {\r\n            elem.click(function () {\r\n                $('.cert-controls .card-header a')[key + 1].click();\r\n            });\r\n        });\r\n        $.each($('.cert-controls .card-header a'), function (key, elem) {\r\n            elem.addEventListener('click', function () {\r\n                $.each(elems, function (key1, elem1) {\r\n                    elem1.removeClass('cert-active');\r\n                });\r\n                if (elem.getAttribute('aria-expanded') === 'false' && key >= 1) {\r\n                    if (elems[key - 1].hasClass('cert-bordered')) {\r\n                        elems[key - 1].toggleClass('cert-active');\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    })();\r\n});\r\n\r\n// resize workspace\r\n$('.cert-wokrspace__zoom').click(function () {\r\n    if (scale <= 3) {\r\n        scale += 0.5;\r\n        setSizes(scale);\r\n    }\r\n});\r\n\r\n// reset workspace\r\n$('.cert-wokrspace__reset').click(function () {\r\n    scale = ($('.cert-wokrspace__content').width() / $('.cert-wokrspace').width());\r\n    setSizes(scale);\r\n});\r\n\r\n// reset original\r\n$('.cert-wokrspace__original').click(function () {\r\n    setSizes(1);\r\n    scale = 1;\r\n});\r\n\r\n// set landscape\r\n$('.cert-wokrspace__landscape').click(function () {\r\n    $('.cert-wokrspace__content').css({\r\n        'height': '793.7px',\r\n        'width': '1122.5px'\r\n    });\r\n    orientation = 'landscape';\r\n});\r\n\r\n// set portrait\r\n$('.cert-wokrspace__portrait').click(function () {\r\n    $('.cert-wokrspace__content').css({\r\n        'height': '1122.5px',\r\n        'width': '793.7px'\r\n    });\r\n    orientation = 'portrait';\r\n});\r\n\r\n\r\nconst setSizes = (scale) => {\r\n    $('.cert-wokrspace__content').css({\r\n        'zoom': 1 / scale,\r\n        '-moz-transform': 1 / scale\r\n    });\r\n};\r\n\r\n/*\r\n * CONTROL PANEL\r\n */\r\n// TAB-1\r\n// bg picker\r\n$('#file-0').on('change', function (e) {\r\n    readFile(this.files[0], function (e) {\r\n        bgImage = e.target.result;\r\n        $('.cert-wokrspace__content').css('background-image', `url(\"${bgImage}\")`);\r\n    });\r\n});\r\n$('#bg-number-size').on('change', function (e) {\r\n    let bgSize = 'cover';\r\n    switch (e.target.value) {\r\n        case 'Растянуть':\r\n            bgSize = 'cover';\r\n            break;\r\n        case 'По ширине':\r\n            bgSize = '100% auto';\r\n            break;\r\n        case 'По высоте':\r\n            bgSize = 'auto 100%';\r\n            break;\r\n    }\r\n    $('.cert-wokrspace__content').css('background-size', bgSize);\r\n});\r\n\r\n// TAB-2\r\nsetBorder($('#name-number-border'), $('.cert-name'));\r\nsetTop($('#name-number-top'), $('.cert-name'));\r\nsetLeft($('#name-number-left'), $('.cert-name'));\r\nsetWidth($('#name-number-width'), $('.cert-name'));\r\nsetFontSize($('#name-number-font-size'), $('.cert-name'));\r\nsetLineHeight($('#name-number-line-height'), $('.cert-name'));\r\nsetColor($('#name-number-color'), $('.cert-name'));\r\nsetFontFamily($('#name-select-font-family'), $('.cert-name'));\r\nsetFontStyle($('#name-select-font-style'), $('.cert-name'));\r\nsetTextAlign($('#name-select-text-align'), $('.cert-name'));\r\n\r\n// TAB-3\r\nsetBorder($('#number-number-border'), $('.cert-number'));\r\nsetTop($('#number-number-top'), $('.cert-number'));\r\nsetLeft($('#number-number-left'), $('.cert-number'));\r\nsetWidth($('#number-number-width'), $('.cert-number'));\r\nsetFontSize($('#number-number-font-size'), $('.cert-number'));\r\nsetLineHeight($('#number-number-line-height'), $('.cert-number'));\r\nsetColor($('#number-number-color'), $('.cert-number'));\r\nsetFontFamily($('#number-select-font-family'), $('.cert-number'));\r\nsetFontStyle($('#number-select-font-style'), $('.cert-number'));\r\nsetTextAlign($('#number-select-text-align'), $('.cert-number'));\r\n\r\n// TAB-4\r\nsetBorder($('#course-number-border'), $('.cert-course'));\r\nsetTop($('#course-number-top'), $('.cert-course'));\r\nsetLeft($('#course-number-left'), $('.cert-course'));\r\nsetWidth($('#course-number-width'), $('.cert-course'));\r\nsetFontSize($('#course-number-font-size'), $('.cert-course'));\r\nsetLineHeight($('#course-number-line-height'), $('.cert-course'));\r\nsetColor($('#course-number-color'), $('.cert-course'));\r\nsetFontFamily($('#course-select-font-family'), $('.cert-course'));\r\nsetFontStyle($('#course-select-font-style'), $('.cert-course'));\r\nsetTextAlign($('#course-select-text-align'), $('.cert-course'));\r\n\r\n// TAB-5\r\nsetBorder($('#date-number-border'), $('.cert-date'));\r\nsetTop($('#date-number-top'), $('.cert-date'));\r\nsetLeft($('#date-number-left'), $('.cert-date'));\r\nsetWidth($('#date-number-width'), $('.cert-date'));\r\nsetFontSize($('#date-number-font-size'), $('.cert-date'));\r\nsetLineHeight($('#date-number-line-height'), $('.cert-date'));\r\nsetColor($('#date-number-color'), $('.cert-date'));\r\nsetFontFamily($('#date-select-font-family'), $('.cert-date'));\r\nsetFontStyle($('#date-select-font-style'), $('.cert-date'));\r\nsetTextAlign($('#date-select-text-align'), $('.cert-date'));\r\n\r\n// TAB-5\r\nsetBorder($('#duration-number-border'), $('.cert-duration'));\r\nsetTop($('#duration-number-top'), $('.cert-duration'));\r\nsetLeft($('#duration-number-left'), $('.cert-duration'));\r\nsetWidth($('#duration-number-width'), $('.cert-duration'));\r\nsetFontSize($('#duration-number-font-size'), $('.cert-duration'));\r\nsetLineHeight($('#duration-number-line-height'), $('.cert-duration'));\r\nsetColor($('#duration-number-color'), $('.cert-duration'));\r\nsetFontFamily($('#duration-select-font-family'), $('.cert-duration'));\r\nsetFontStyle($('#duration-select-font-style'), $('.cert-duration'));\r\nsetTextAlign($('#duration-select-text-align'), $('.cert-duration'));\r\n\r\n\r\n// Create PDF\r\n$('#preview').click(function () {\r\n    createPreviewPdf()\r\n});\r\n\r\n\r\n\r\n\r\n// FUNCTIONS\r\n// name border block\r\nfunction setBorder(switcher, element) {\r\n    switcher.click(function (e) {\r\n        element.toggleClass('cert-bordered');\r\n        element.toggleClass('cert-active');\r\n    });\r\n};\r\n// top position\r\nfunction setTop(switcher, element) {\r\n    switcher.on('change paste keyup', function (e) {\r\n        element.css('top', e.target.value + 'px');\r\n    });\r\n};\r\n// left position\r\nfunction setLeft(switcher, element) {\r\n    switcher.on('change paste keyup', function (e) {\r\n        element.css('left', e.target.value + 'px');\r\n    });\r\n};\r\n// width\r\nfunction setWidth(switcher, element) {\r\n    switcher.on('change paste keyup', function (e) {\r\n        element.css({\r\n            'width': e.target.value + 'px',\r\n        });\r\n    });\r\n};\r\n// name font size\r\nfunction setFontSize(switcher, element) {\r\n    switcher.on('change paste keyup', function (e) {\r\n        element.css('font-size', e.target.value + 'px');\r\n    });\r\n};\r\n// line height\r\nfunction setLineHeight(switcher, element) {\r\n    switcher.on('change paste keyup', function (e) {\r\n        element.css('line-height', e.target.value);\r\n    });\r\n};\r\n// color picker\r\nfunction setColor(switcher, element) {\r\n    switcher.on('change', function (e) {\r\n        element.css('color', e.target.value);\r\n    });\r\n};\r\n// font family\r\nfunction setFontFamily(switcher, element) {\r\n    switcher.on('change', function (e) {\r\n        element.css('font-family', e.target.value);\r\n    });\r\n};\r\n// font style\r\nfunction setFontStyle(switcher, element) {\r\n    switcher.on('change', function (e) {\r\n        let style = 'normal',\r\n            weight = 'normal';\r\n        switch (e.target.value) {\r\n            case 'По умолчанию':\r\n                style = 'normal';\r\n                weight = 'normal';\r\n                break;\r\n            case 'Жирный':\r\n                style = 'normal';\r\n                weight = 'bold';\r\n                break;\r\n            case 'Курсив':\r\n                style = 'italic';\r\n                weight = 'normal';\r\n                break;\r\n            case 'Жирный + курсив':\r\n                style = 'italic';\r\n                weight = 'bold';\r\n                break;\r\n            default:\r\n                style = 'normal';\r\n                weight = 'normal';\r\n        }\r\n        element.css({\r\n            'font-style': style,\r\n            'font-weight': weight\r\n        });\r\n    });\r\n};\r\n// text align\r\nfunction setTextAlign(switcher, element) {\r\n    switcher.on('change', function (e) {\r\n        let textAlign = 'left';\r\n        switch (e.target.value) {\r\n            case 'По левому краю':\r\n                textAlign = 'left';\r\n                break;\r\n            case 'По правому краю':\r\n                textAlign = 'right';\r\n                break;\r\n            case 'По центру':\r\n                textAlign = 'center';\r\n                break;\r\n            case 'По ширине':\r\n                textAlign = 'justify';\r\n                break;\r\n        }\r\n        element.css('text-align', textAlign);\r\n    });\r\n};\r\n// drag and resize\r\nfunction setDragResize(element, switcherTop, switcherLeft, switcherWidth) {\r\n    element.draggable({\r\n        containment: 'parent',\r\n        drag: function (event, ui) {\r\n            switcherTop.val(Math.ceil(ui.position.top));\r\n            switcherLeft.val(Math.ceil(ui.position.left));\r\n        }\r\n    });\r\n    element.resizable({\r\n        handles: 'e, w',\r\n        containment: 'parent',\r\n        resize: function (event, ui) {\r\n            event.target.style.maxWidth = `${Math.ceil(ui.size.width)}px`;\r\n            switcherWidth.val(Math.ceil(ui.size.width));\r\n        }\r\n    });\r\n};\r\n// read file\r\nfunction readFile(file, onLoadCallback) {\r\n    var reader = new FileReader();\r\n    reader.onload = onLoadCallback;\r\n    reader.readAsDataURL(file);\r\n}\r\n// create pdf\r\nfunction createPreviewPdf() {\r\n    // page size A4: [595.28, 841.89],\r\n    // https://github.com/bpampuch/pdfmake/blob/7b5675d5b9d5d7b815bd721e00504b16560a6382/src/standardPageSizes.js\r\n    const w = $('.cert-wokrspace__content').width(),\r\n        h = $('.cert-wokrspace__content').height(),\r\n        paperW = (orientation == 'landscape') ? 841.89 : 595.28,\r\n        paperH = (orientation == 'landscape') ? 595.28 : 841.89;\r\n\r\n    function getX(elem) {\r\n        return elem.position().left / w * paperW;\r\n    };\r\n\r\n    function getY(elem) {\r\n        return elem.position().top / h * paperH;\r\n    };\r\n\r\n    function getW(elem) {\r\n        return elem.width() / w * paperW;\r\n    }\r\n    const docDefinition = {\r\n        info: {\r\n            title: 'certificate',\r\n        },\r\n        pageSize: 'A4',\r\n        pageOrientation: orientation,\r\n        content: [{\r\n                image: bgImage,\r\n                absolutePosition: {\r\n                    x: 0,\r\n                    y: 0\r\n                },\r\n                width: paperW,\r\n                height: paperH,\r\n            },\r\n            {\r\n                table: {\r\n                    widths: [getW($('.cert-name'))],\r\n                    body: [\r\n                        [{\r\n                            fontSize: 24,\r\n                            text: $('.cert-name').text(),\r\n                            border: [false, false, false, false],\r\n                            margin: [-5, -5, -5, -5],\r\n                            \r\n                        }]\r\n                    ],\r\n                },\r\n                absolutePosition: {\r\n                    x: getX($('.cert-name')),\r\n                    y: getY($('.cert-name'))\r\n                },\r\n            },\r\n            {\r\n                text: $('.cert-number').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-number')),\r\n                    y: getY($('.cert-number'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-course').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-course')),\r\n                    y: getY($('.cert-course'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-date').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-date')),\r\n                    y: getY($('.cert-date'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-duration').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-duration')),\r\n                    y: getY($('.cert-duration'))\r\n                }\r\n            }\r\n        ],\r\n    };\r\n\r\n    $('#previewFancyLink')[0].innerHTML = `<a data-fancybox data-type=\"iframe\" data-src=\"\" href=\"javascript:;\"></a>`;\r\n    pdfMake.createPdf(docDefinition).getBase64((data) => {\r\n        $('#previewFancyLink a').attr('data-src', `data:application/pdf;base64,${data}`).click();\r\n    });\r\n\r\n    // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n}"]}