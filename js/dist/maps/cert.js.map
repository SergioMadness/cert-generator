{"version":3,"sources":["cert.js"],"names":["defaultData","userData","scale","elements","$","workspace","control","renderWorkspace","data","setElement","setControl","i","key","css","background","image","setBgSize","bgSize","find","val","size","setBgPosition","bgPosition","elem","position","top","left","color","width","text","fontFamily","font-size","fontSize","line-height","fontStyle","lineHeight","textAlign","value","font-weight","setWorkspaceZoom","zoom","-moz-transform","setBorder","switcher","element","addEventListener","e","setTop","setLeft","target","setWidth","setFontFamily","setFontSize","setLineHeight","setColor","setFontStyle","style","weight","setTextAlign","setDragResize","switcherTop","switcherLeft","Math","switcherWidth","draggable","containment","resizable","event","ui","handles","ceil","resize","maxWidth","readFile","file","onLoadCallback","reader","FileReader","createPreviewPdf","readAsDataURL","paperW","w","getX","h","orientation","paperH","getY","getBgW","pageSize","content","table","widths","getW","body","border","margin","absolutePosition","y","x","innerHTML","pdfMake","createPdf","docDefinition","getBase64","attr","click","console","done","log","on","result","each","querySelector","key1","elem1","getAttribute","classList","contains","add","height"],"mappings":"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","file":"../cert.js","sourcesContent":["// GLOBALS\r\nlet defaultData = {},\r\n    userData = {},\r\n    scale = 1;\r\nconst elements = [{\r\n        workspace: $('.cert-name'),\r\n        control: $('#control-name'),\r\n    },\r\n    {\r\n        workspace: $('.cert-number'),\r\n        control: $('#control-number'),\r\n    },\r\n    {\r\n        workspace: $('.cert-course'),\r\n        control: $('#control-course'),\r\n    },\r\n    {\r\n        workspace: $('.cert-date'),\r\n        control: $('#control-date'),\r\n    },\r\n    {\r\n        workspace: $('.cert-duration'),\r\n        control: $('#control-duration'),\r\n    },\r\n];\r\n\r\n// GETTING DATA\r\n// $.getJSON(\"https://gk061090.github.io/cert-generator/json/data.json\")\r\n//     .done(function (json) {\r\n//         console.log(json);\r\n//         userData = defaultData = json;\r\n//     })\r\n//     .fail(function (jqxhr, textStatus, error) {\r\n//         var err = textStatus + \", \" + error;\r\n//         console.log(\"Request Failed: \" + err);\r\n//     });\r\n\r\n$.getJSON(\"https://bioinfobot.github.io/data/2017-05.json\")\r\n.done(function( data ) {\r\n   console.log(data)\r\n});\r\n\r\n\r\n\r\n$(document).ready(function () {\r\n    renderWorkspace(defaultData);\r\n    // default zoom by workspace width\r\n    scale = ($('.cert-wokrspace__content').width() / $('.cert-wokrspace').width());\r\n    setWorkspaceZoom(scale);\r\n\r\n    // bg picker\r\n    $('#fileBg').on('change', function (e) {\r\n        readFile(this.files[0], function (e) {\r\n            $('.cert-wokrspace__content').css('background-image', `url(\"${e.target.result}\")`);\r\n            userData.background.image = e.target.result;\r\n        });\r\n        setBgSize();\r\n        setBgPosition();\r\n    });\r\n    $('#control-bg').find('.control-bg-size').on('change', setBgSize);\r\n    $('#control-bg').find('.control-bg-position').on('change', setBgPosition);\r\n\r\n    $.each(elements, function (key, elem) {\r\n        // TOGGLE ACCORDITION\r\n        elem.workspace[0].addEventListener('click', function () {\r\n            $('.cert-controls .card-header a')[key + 1].click();\r\n        });\r\n        // ACCORDITION (PANEL) CONTROLS\r\n        setBorder(elem.control[0].querySelector('.control-hidder'), elem.workspace[0]);\r\n        setTop(elem.control[0].querySelector('.control-top'), elem.workspace[0]);\r\n        setLeft(elem.control[0].querySelector('.control-left'), elem.workspace[0]);\r\n        setWidth(elem.control[0].querySelector('.control-width'), elem.workspace[0]);\r\n        setFontFamily(elem.control[0].querySelector('.control-font-family'), elem.workspace[0]);\r\n        setFontSize(elem.control[0].querySelector('.control-font-size'), elem.workspace[0]);\r\n        setLineHeight(elem.control[0].querySelector('.control-line-height'), elem.workspace[0]);\r\n        setColor(elem.control[0].querySelector('.control-color'), elem.workspace[0]);\r\n        setFontStyle(elem.control[0].querySelector('.control-font-style'), elem.workspace[0]);\r\n        setTextAlign(elem.control[0].querySelector('.control-text-align'), elem.workspace[0]);\r\n        // DRAG AND RESIZE\r\n        setDragResize($(elem.workspace[0]), $(elem.control[0]).find('.control-top'), $(elem.control[0]).find('.control-left'), $(elem.control[0]).find('.control-width'));\r\n    });\r\n    $.each($('.cert-controls .card-header a'), function (key, elem) {\r\n        elem.addEventListener('click', function () {\r\n            $.each(elements, function (key1, elem1) {\r\n                elem1.workspace[0].classList.remove('cert-active');\r\n            });\r\n\r\n            if (elem.getAttribute('aria-expanded') === 'false' && key >= 1) {\r\n                if (elements[key - 1].workspace[0].classList.contains('cert-bordered')) {\r\n                    elements[key - 1].workspace[0].classList.add('cert-active');\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    // Create PDF\r\n    $('#preview').click(function () {\r\n        createPreviewPdf()\r\n    });\r\n});\r\n\r\n/*\r\n * CONTROLS EVENTS\r\n */\r\n\r\n// WORKSPACE CONTROLS\r\n// resize workspace\r\n$('.cert-wokrspace__zoom').click(function () {\r\n    if (scale <= 3) {\r\n        scale += 0.5;\r\n        setWorkspaceZoom(scale);\r\n    }\r\n});\r\n// reset workspace\r\n$('.cert-wokrspace__reset').click(function () {\r\n    scale = ($('.cert-wokrspace__content').width() / $('.cert-wokrspace').width());\r\n    setWorkspaceZoom(scale);\r\n});\r\n// reset original\r\n$('.cert-wokrspace__original').click(function () {\r\n    setWorkspaceZoom(1);\r\n    scale = 1;\r\n});\r\n// set landscape\r\n$('.cert-wokrspace__landscape').click(function () {\r\n    $('.cert-wokrspace__content').css({\r\n        'height': '793.7px',\r\n        'width': '1122.5px'\r\n    });\r\n    userData.orientation = 'landscape';\r\n});\r\n// set portrait\r\n$('.cert-wokrspace__portrait').click(function () {\r\n    $('.cert-wokrspace__content').css({\r\n        'height': '1122.5px',\r\n        'width': '793.7px'\r\n    });\r\n    userData.orientation = 'portrait';\r\n});\r\n\r\n\r\n/*\r\n * FUNCTIONS\r\n */\r\n// SET DEFAULT DATA INTO WORKSPACE\r\nfunction renderWorkspace(data) {\r\n    let i = 0;\r\n    for (let key in data) {\r\n        if (typeof data[key] === \"object\") {\r\n            // set workspace\r\n            if (key !== \"background\") {\r\n                setElement(elements[i].workspace, data[key]);\r\n                setControl(elements[i].control, data[key]);\r\n                i++;\r\n            } else {\r\n                $('.cert-wokrspace__content').css('background-image', `url(\"${data.background.image}\")`);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// background\r\nfunction setBgSize() {\r\n    let bgSize;\r\n    switch ($('#control-bg').find('.control-bg-size').val()) {\r\n        case 'По ширине':\r\n            bgSize = '100% auto';\r\n            break;\r\n        case 'По высоте':\r\n            bgSize = 'auto 100%';\r\n            break;\r\n    }\r\n    $('.cert-wokrspace__content').css('background-size', bgSize);\r\n    userData.background.size = $('#control-bg').find('.control-bg-size').val();\r\n};\r\n\r\nfunction setBgPosition() {\r\n    let bgPosition;\r\n    switch ($('#control-bg').find('.control-bg-position').val()) {\r\n        case 'Верх / Лево':\r\n            bgPosition = 'top left';\r\n            break;\r\n        case 'Верх / Центр':\r\n            bgPosition = 'top center';\r\n            break;\r\n        case 'Верх / Право':\r\n            bgPosition = 'top right';\r\n            break;\r\n        case 'Право / Центр':\r\n            bgPosition = 'center right';\r\n            break;\r\n        case 'Право / Низ':\r\n            bgPosition = 'bottom right';\r\n            break;\r\n        case 'Низ / Центр':\r\n            bgPosition = 'bottom center';\r\n            break;\r\n        case 'Низ / Лево':\r\n            bgPosition = 'bottom left';\r\n            break;\r\n        case 'Лево / Центр':\r\n            bgPosition = 'center left';\r\n            break;\r\n        case 'Центр':\r\n            bgPosition = 'center center';\r\n            break;\r\n    }\r\n    $('.cert-wokrspace__content').css('background-position', bgPosition);\r\n    userData.background.position = $('#control-bg').find('.control-bg-position').val();\r\n};\r\n\r\n// set css and text\r\nfunction setElement(elem, data) {\r\n    elem.css({\r\n        'top': `${data.positionTop}px`,\r\n        'left': `${data.positionLeft}px`,\r\n        'width': `${data.width}px`,\r\n        'font-family': data.fontFamily,\r\n        'font-size': `${data.fontSize}px`,\r\n        'line-height': data.lineHeight,\r\n        'color': data.color,\r\n        'text-align': data.textAlign,\r\n    }).text(data.value);\r\n    // set font-style and font-weight\r\n    switch (data.fontStyle) {\r\n        case 'По умолчанию':\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'normal'\r\n            });\r\n            break;\r\n        case 'Жирный':\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'bold'\r\n            });\r\n            break;\r\n        case 'Курсив':\r\n            elem.css({\r\n                'font-style': 'italic',\r\n                'font-weight': 'normal'\r\n            });\r\n            break;\r\n        case 'Жирный + курсив':\r\n            elem.css({\r\n                'font-style': 'italic',\r\n                'font-weight': 'bold'\r\n            });\r\n            break;\r\n        default:\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'normal'\r\n            });\r\n    }\r\n    // set alignment\r\n    switch (data.textAlign) {\r\n        case 'По левому краю':\r\n            elem.css('text-align', 'left');\r\n            break;\r\n        case 'По правому краю':\r\n            elem.css('text-align', 'right');\r\n            break;\r\n        case 'По центру':\r\n            elem.css('text-align', 'center');\r\n            break;\r\n        case 'По ширине':\r\n            elem.css('text-align', 'justify');\r\n            break;\r\n        default:\r\n            elem.css('text-align', 'left');\r\n            break;\r\n    }\r\n};\r\n// set controls values\r\nfunction setControl(elem, data) {\r\n    elem.find(\".control-top\").val(data.positionTop);\r\n    elem.find(\".control-left\").val(data.positionLeft);\r\n    elem.find(\".control-width\").val(data.width);\r\n    elem.find(\".control-font-family\").val(data.fontFamily);\r\n    elem.find(\".control-font-size\").val(data.fontSize);\r\n    elem.find(\".control-line-height\").val(data.lineHeight);\r\n    elem.find(\".control-color\").val(data.color);\r\n    elem.find(\".control-font-style\").val(data.fontStyle);\r\n    elem.find(\".control-text-align\").val(data.textAlign);\r\n};\r\n// set workspace zoom\r\nfunction setWorkspaceZoom(scale) {\r\n    $('.cert-wokrspace__content').css({\r\n        'zoom': 1 / scale,\r\n        '-moz-transform': 1 / scale\r\n    });\r\n};\r\n\r\n// functions for control panel\r\n// show border for workspace block\r\nfunction setBorder(switcher, element) {\r\n    switcher.addEventListener('click', function (e) {\r\n        element.classList.toggle('cert-bordered');\r\n        element.classList.toggle('cert-active');\r\n    });\r\n};\r\n// top position\r\nfunction setTop(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.top = e.target.value + 'px';\r\n    });\r\n};\r\n// left position\r\nfunction setLeft(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.left = e.target.value + 'px';\r\n    });\r\n};\r\n// width\r\nfunction setWidth(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.width = e.target.value + 'px';\r\n    });\r\n};\r\n// font family\r\nfunction setFontFamily(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.fontFamily = e.target.value;\r\n    });\r\n};\r\n// font size\r\nfunction setFontSize(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.fontSize = e.target.value + 'px';\r\n    });\r\n};\r\n// line height\r\nfunction setLineHeight(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.lineHeight = e.target.value;\r\n    });\r\n};\r\n// color picker\r\nfunction setColor(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.color = e.target.value;\r\n    });\r\n};\r\n// font style\r\nfunction setFontStyle(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        let style = 'normal',\r\n            weight = 'normal';\r\n        switch (e.target.value) {\r\n            case 'По умолчанию':\r\n                style = 'normal';\r\n                weight = 'normal';\r\n                break;\r\n            case 'Жирный':\r\n                style = 'normal';\r\n                weight = 'bold';\r\n                break;\r\n            case 'Курсив':\r\n                style = 'italic';\r\n                weight = 'normal';\r\n                break;\r\n            case 'Жирный + курсив':\r\n                style = 'italic';\r\n                weight = 'bold';\r\n                break;\r\n            default:\r\n                style = 'normal';\r\n                weight = 'normal';\r\n        }\r\n        element.style.fontStyle = style;\r\n        element.style.fontWeight = weight;\r\n    });\r\n};\r\n// text align\r\nfunction setTextAlign(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        let textAlign = 'left';\r\n        switch (e.target.value) {\r\n            case 'По левому краю':\r\n                textAlign = 'left';\r\n                break;\r\n            case 'По правому краю':\r\n                textAlign = 'right';\r\n                break;\r\n            case 'По центру':\r\n                textAlign = 'center';\r\n                break;\r\n            case 'По ширине':\r\n                textAlign = 'justify';\r\n                break;\r\n        }\r\n        element.style.textAlign = textAlign;\r\n    });\r\n};\r\n\r\n// drag and resize\r\nfunction setDragResize(element, switcherTop, switcherLeft, switcherWidth) {\r\n    element.draggable({\r\n        containment: 'parent',\r\n        drag: function (event, ui) {\r\n            switcherTop.val(Math.ceil(ui.position.top));\r\n            switcherLeft.val(Math.ceil(ui.position.left));\r\n        }\r\n    });\r\n    element.resizable({\r\n        handles: 'e, w',\r\n        containment: 'parent',\r\n        resize: function (event, ui) {\r\n            event.target.style.maxWidth = `${Math.ceil(ui.size.width)}px`;\r\n            switcherWidth.val(Math.ceil(ui.size.width));\r\n        }\r\n    });\r\n};\r\n\r\n// read file (for set background)\r\nfunction readFile(file, onLoadCallback) {\r\n    var reader = new FileReader();\r\n    reader.onload = onLoadCallback;\r\n    reader.readAsDataURL(file);\r\n}\r\n\r\n// create pdf\r\nfunction createPreviewPdf() {\r\n    // page size A4: [595.28, 841.89],\r\n    // https://github.com/bpampuch/pdfmake/blob/7b5675d5b9d5d7b815bd721e00504b16560a6382/src/standardPageSizes.js\r\n    const w = $('.cert-wokrspace__content').width(),\r\n        h = $('.cert-wokrspace__content').height(),\r\n        paperW = (userData.orientation == 'landscape') ? 841.89 : 595.28,\r\n        paperH = (userData.orientation == 'landscape') ? 595.28 : 841.89;\r\n\r\n    function getX(elem) {\r\n        return elem.position().left / w * paperW;\r\n    };\r\n\r\n    function getY(elem) {\r\n        return elem.position().top / h * paperH;\r\n    };\r\n\r\n    function getW(elem) {\r\n        return elem.width() / w * paperW;\r\n    };\r\n\r\n    function getFont(elem) {\r\n        return elem.css('')\r\n    };\r\n\r\n    function getBgW() {      \r\n        return (userData.background.size === 'По ширине') ? paperW : '';\r\n    }\r\n    function getBgH() {\r\n        return (userData.background.size === 'По высоте') ? paperH : '';\r\n    }\r\n\r\n    function getBgX() {\r\n        let bgPosition;\r\n        switch (userData.background.position) {\r\n            case 'Верх / Лево':\r\n                bgPosition = 'top left';\r\n                break;\r\n            case 'Верх / Центр':\r\n                bgPosition = 'top center';\r\n                break;\r\n            case 'Верх / Право':\r\n                bgPosition = 'top right';\r\n                break;\r\n            case 'Право / Центр':\r\n                bgPosition = 'center right';\r\n                break;\r\n            case 'Право / Низ':\r\n                bgPosition = 'bottom right';\r\n                break;\r\n            case 'Низ / Центр':\r\n                bgPosition = 'bottom center';\r\n                break;\r\n            case 'Низ / Лево':\r\n                bgPosition = 'bottom left';\r\n                break;\r\n            case 'Лево / Центр':\r\n                bgPosition = 'center left';\r\n                break;\r\n            case 'Центр':\r\n                bgPosition = 'center center';\r\n                break;\r\n            default:\r\n                bgPosition = 'top left';\r\n                break;\r\n        }\r\n        console.log(bgPosition);\r\n        return 0;\r\n\r\n    };\r\n\r\n    // !!! НУЖНО ИСПРАВИТЬ РАЗМЕРЫ ФОНА\r\n    const docDefinition = {\r\n        info: {\r\n            title: 'certificate',\r\n        },\r\n        pageSize: 'A4',\r\n        pageOrientation: userData.orientation,\r\n        background: [{\r\n            image: userData.background.image,\r\n            width: getBgW(),\r\n            height: getBgH(),\r\n        }],\r\n        content: [{\r\n                table: {\r\n                    widths: [getW($('.cert-name'))],\r\n                    body: [\r\n                        [{\r\n                            fontSize: 24,\r\n                            text: $('.cert-name').text(),\r\n                            border: [false, false, false, false],\r\n                            margin: [-5, -5, -5, -5],\r\n\r\n                        }]\r\n                    ],\r\n                },\r\n                absolutePosition: {\r\n                    x: getX($('.cert-name')),\r\n                    y: getY($('.cert-name'))\r\n                },\r\n            },\r\n            {\r\n                text: $('.cert-number').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-number')),\r\n                    y: getY($('.cert-number'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-course').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-course')),\r\n                    y: getY($('.cert-course'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-date').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-date')),\r\n                    y: getY($('.cert-date'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-duration').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-duration')),\r\n                    y: getY($('.cert-duration'))\r\n                }\r\n            }\r\n        ],\r\n    };\r\n\r\n    $('#previewFancyLink')[0].innerHTML = `<a data-fancybox data-type=\"iframe\" data-src=\"\" href=\"javascript:;\"></a>`;\r\n    pdfMake.createPdf(docDefinition).getBase64((data) => {\r\n        $('#previewFancyLink a').attr('data-src', `data:application/pdf;base64,${data}`).click();\r\n    });\r\n\r\n    // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n}"]}