{"version":3,"sources":["cert.js"],"names":["defaultData","userData","loadedImg","scale","$","elements","control","data","workspace","elem","i","key","_typeof","setControl","css","background","image","setBgSize","bgSize","find","val","size","setBgPosition","bgX","positionLeft","bgY","positionTop","setWorkspaceZoom","zoom","setElement","switcher","element","classList","width","font-family","fontFamily","font-size","fontSize","line-height","addEventListener","top","e","text","value","fontStyle","setLeft","setWidth","font-style","font-weight","lineHeight","setColor","color","setFontStyle","weight","style","textAlign","maxStr","setTextAlign","toggle","setTop","target","left","setValue","handles","containment","calcViewFont","parseInt","setLineHeight","setDragResize","switcherTop","switcherLeft","draggable","resize","Math","event","switcherWidth","reader","readAsDataURL","createPreviewPdf","h","w","paperH","orientation","fontWeight","getW","getFontFamily","getLineHeight","resizable","rgb2hex","setMaxStr","rgb","match","hex","drag","ui","ceil","position","getBgH","docDefinition","pageSize","pageOrientation","getBgW","maxWidth","height","absolutePosition","table","file","onLoadCallback","widths","body","getFontSize","border","margin","x","getX","paperW","getY","font","alignment","getFontStyle","bold","getFontWeight","getColor","toString","slice","italics","Number","content","fonts","Roboto","normal","bolditalics","getAlignment","createPdf","inputValue","numStr","y","pdfMake","Open Sans","Montserrat","Lora","innerHTML","getBase64","attr","click","getJSON","done","err","textStatus","console","json","fail","jqxhr","error","document","ready","renderWorkspace","img","onload","FileReader","this","files","src","fr","result","each","on","setBorder","setFontFamily","setFontSize","querySelector","elem1","getAttribute","key1","remove","contains","add","changeBgPosition"],"mappings":"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","file":"../cert.js","sourcesContent":["// GLOBALS\r\nlet defaultData = {},\r\n  userData = {},\r\n  loadedImg = {},\r\n  scale = 1;\r\nconst elements = [\r\n  {\r\n    workspace: $(\".cert-name\"),\r\n    control: $(\"#control-name\"),\r\n    data: \"name\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-number\"),\r\n    control: $(\"#control-number\"),\r\n    data: \"number\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-course\"),\r\n    control: $(\"#control-course\"),\r\n    data: \"course\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-date\"),\r\n    control: $(\"#control-date\"),\r\n    data: \"date\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-duration\"),\r\n    control: $(\"#control-duration\"),\r\n    data: \"duration\"\r\n  }\r\n];\r\n\r\n// GETTING DATA\r\n$.getJSON(\"cert-generator/json/data.json\")\r\n  .done(function(json) {\r\n    userData = defaultData = json;\r\n  })\r\n  .fail(function(jqxhr, textStatus, error) {\r\n    var err = textStatus + \", \" + error;\r\n    console.log(\"Request Failed: \" + err);\r\n  });\r\n\r\n$(document).ready(function() {\r\n  renderWorkspace(defaultData);\r\n  // default zoom by workspace width\r\n  scale = $(\".cert-wokrspace__content\").width() / $(\".cert-wokrspace\").width();\r\n  setWorkspaceZoom(scale);\r\n\r\n  // bg picker\r\n  $(\"#fileBg\").on(\"change\", function(e) {\r\n    let fr = new FileReader();\r\n    fr.readAsDataURL(this.files[0]);\r\n    fr.onload = function() {\r\n      let img = new Image();\r\n      img.onload = function() {\r\n        loadedImg = {\r\n          width: img.width,\r\n          height: img.height\r\n        };\r\n      };\r\n      img.src = fr.result;\r\n      $(\".cert-wokrspace__content\").css(\r\n        \"background-image\",\r\n        `url(\"${img.src}\")`\r\n      );\r\n      userData.background.image = img.src;\r\n    };\r\n\r\n    setBgSize();\r\n    setBgPosition(userData);\r\n  });\r\n  $(\"#control-bg\")\r\n    .find(\".control-bg-size\")\r\n    .on(\"change\", setBgSize);\r\n  $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .on(\"input\", changeBgPosition);\r\n  $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .on(\"input\", changeBgPosition);\r\n\r\n  $.each(elements, function(key, elem) {\r\n    // TOGGLE ACCORDITION\r\n    elem.workspace[0].addEventListener(\"click\", function() {\r\n      $(\".cert-controls .card-header a\")[key + 1].click();\r\n    });\r\n    // ACCORDITION (PANEL) CONTROLS\r\n    setBorder(\r\n      elem.control[0].querySelector(\".control-hidder\"),\r\n      elem.workspace[0]\r\n    );\r\n    setTop(\r\n      elem.control[0].querySelector(\".control-top\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setLeft(\r\n      elem.control[0].querySelector(\".control-left\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setWidth(\r\n      elem.control[0].querySelector(\".control-width\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontFamily(\r\n      elem.control[0].querySelector(\".control-font-family\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontSize(\r\n      elem.control[0].querySelector(\".control-font-size\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setLineHeight(\r\n      elem.control[0].querySelector(\".control-line-height\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setColor(\r\n      elem.control[0].querySelector(\".control-color\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontStyle(\r\n      elem.control[0].querySelector(\".control-font-style\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setTextAlign(\r\n      elem.control[0].querySelector(\".control-text-align\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    if (key == 0) {\r\n      setValue(\r\n        elem.control[0].querySelector(\".control-value\"),\r\n        elem.workspace[0],\r\n        userData[elem.data]\r\n      );\r\n      setMaxStr(\r\n        elem.control[0].querySelector(\".control-max-str\"),\r\n        elem.workspace[0],\r\n        userData[elem.data]\r\n      );\r\n    }\r\n    // DRAG AND RESIZE\r\n    setDragResize(\r\n      $(elem.workspace[0]),\r\n      $(elem.control[0]).find(\".control-top\"),\r\n      $(elem.control[0]).find(\".control-left\"),\r\n      $(elem.control[0]).find(\".control-width\"),\r\n      userData[elem.data]\r\n    );\r\n  });\r\n  $.each($(\".cert-controls .card-header a\"), function(key, elem) {\r\n    elem.addEventListener(\"click\", function() {\r\n      $.each(elements, function(key1, elem1) {\r\n        elem1.workspace[0].classList.remove(\"cert-active\");\r\n      });\r\n\r\n      if (elem.getAttribute(\"aria-expanded\") === \"false\" && key >= 1) {\r\n        if (\r\n          elements[key - 1].workspace[0].classList.contains(\"cert-bordered\")\r\n        ) {\r\n          elements[key - 1].workspace[0].classList.add(\"cert-active\");\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  // Create PDF\r\n  $(\"#preview\").click(function() {\r\n    createPreviewPdf();\r\n  });\r\n\r\n  $(\"#save\").click(function() {\r\n    console.log(userData);\r\n  });\r\n});\r\n\r\n/*\r\n * CONTROLS EVENTS\r\n */\r\n\r\n// WORKSPACE CONTROLS\r\n// resize workspace\r\n$(\".cert-wokrspace__zoom\").click(function() {\r\n  if (scale <= 3) {\r\n    scale += 0.5;\r\n    setWorkspaceZoom(scale);\r\n  }\r\n});\r\n// reset workspace\r\n$(\".cert-wokrspace__reset\").click(function() {\r\n  scale = $(\".cert-wokrspace__content\").width() / $(\".cert-wokrspace\").width();\r\n  setWorkspaceZoom(scale);\r\n});\r\n// reset original\r\n$(\".cert-wokrspace__original\").click(function() {\r\n  setWorkspaceZoom(1);\r\n  scale = 1;\r\n});\r\n// set landscape\r\n$(\".cert-wokrspace__landscape\").click(function() {\r\n  $(\".cert-wokrspace__content\").css({\r\n    height: \"793.7px\",\r\n    width: \"1122.5px\"\r\n  });\r\n  userData.orientation = \"landscape\";\r\n});\r\n// set portrait\r\n$(\".cert-wokrspace__portrait\").click(function() {\r\n  $(\".cert-wokrspace__content\").css({\r\n    height: \"1122.5px\",\r\n    width: \"793.7px\"\r\n  });\r\n  userData.orientation = \"portrait\";\r\n});\r\n\r\n/*\r\n * FUNCTIONS\r\n */\r\n// SET DEFAULT DATA INTO WORKSPACE\r\nfunction renderWorkspace(data) {\r\n  let i = 0;\r\n  for (let key in data) {\r\n    if (typeof data[key] === \"object\") {\r\n      // set workspace\r\n      if (key !== \"background\") {\r\n        setElement(elements[i].workspace, data[key]);\r\n        setControl(elements[i].control, data[key]);\r\n        i++;\r\n      } else {\r\n        $(\".cert-wokrspace__content\").css(\r\n          \"background-image\",\r\n          `url(\"${data.background.image}\")`\r\n        );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// background\r\nfunction setBgSize() {\r\n  let bgSize;\r\n  switch (\r\n    $(\"#control-bg\")\r\n      .find(\".control-bg-size\")\r\n      .val()\r\n  ) {\r\n    case \"По ширине\":\r\n      bgSize = \"100% auto\";\r\n      break;\r\n    case \"По высоте\":\r\n      bgSize = \"auto 100%\";\r\n      break;\r\n  }\r\n  $(\".cert-wokrspace__content\").css(\"background-size\", bgSize);\r\n  userData.background.size = $(\"#control-bg\")\r\n    .find(\".control-bg-size\")\r\n    .val();\r\n}\r\n\r\nfunction setBgPosition(data) {\r\n  let bgX = data.background.positionLeft,\r\n    bgY = data.background.positionTop;\r\n  $(\".cert-wokrspace__content\").css(\"background-position\", `${bgX}px ${bgY}px`);\r\n  $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .val(bgY);\r\n  $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .val(bgX);\r\n}\r\n\r\nfunction changeBgPosition() {\r\n  let bgY = $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .val();\r\n  let bgX = $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .val();\r\n  $(\".cert-wokrspace__content\").css(\"background-position\", `${bgX}px ${bgY}px`);\r\n  userData.background.positionTop = bgY;\r\n  userData.background.positionLeft = bgX;\r\n}\r\n\r\n// set css and text\r\nfunction setElement(elem, data) {\r\n  elem\r\n    .css({\r\n      top: `${data.positionTop}px`,\r\n      left: `${data.positionLeft}px`,\r\n      width: `${data.width}px`,\r\n      \"font-family\": data.fontFamily,\r\n      \"font-size\": `${data.fontSize}px`,\r\n      \"line-height\": data.lineHeight,\r\n      color: data.color,\r\n      \"text-align\": data.textAlign\r\n    })\r\n    .text(data.value);\r\n  // set font-style and font-weight\r\n  switch (data.fontStyle) {\r\n    case \"По умолчанию\":\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n      break;\r\n    case \"Жирный\":\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"bold\"\r\n      });\r\n      break;\r\n    case \"Курсив\":\r\n      elem.css({\r\n        \"font-style\": \"italic\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n      break;\r\n    case \"Жирный + курсив\":\r\n      elem.css({\r\n        \"font-style\": \"italic\",\r\n        \"font-weight\": \"bold\"\r\n      });\r\n      break;\r\n    default:\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n  }\r\n  // set alignment\r\n  switch (data.textAlign) {\r\n    case \"По левому краю\":\r\n      elem.css(\"text-align\", \"left\");\r\n      break;\r\n    case \"По правому краю\":\r\n      elem.css(\"text-align\", \"right\");\r\n      break;\r\n    case \"По центру\":\r\n      elem.css(\"text-align\", \"center\");\r\n      break;\r\n    case \"По ширине\":\r\n      elem.css(\"text-align\", \"justify\");\r\n      break;\r\n    default:\r\n      elem.css(\"text-align\", \"left\");\r\n      break;\r\n  }\r\n}\r\n// set controls values\r\nfunction setControl(elem, data) {\r\n  elem.find(\".control-top\").val(data.positionTop);\r\n  elem.find(\".control-left\").val(data.positionLeft);\r\n  elem.find(\".control-width\").val(data.width);\r\n  elem.find(\".control-font-family\").val(data.fontFamily);\r\n  elem.find(\".control-font-size\").val(data.fontSize);\r\n  elem.find(\".control-line-height\").val(data.lineHeight);\r\n  elem.find(\".control-color\").val(data.color);\r\n  elem.find(\".control-font-style\").val(data.fontStyle);\r\n  elem.find(\".control-text-align\").val(data.textAlign);\r\n  elem.find(\".control-value\").val(data.value);\r\n  elem.find(\".control-max-str\").val(data.maxStr);\r\n}\r\n// set workspace zoom\r\nfunction setWorkspaceZoom(scale) {\r\n  $(\".cert-wokrspace__content\").css({\r\n    zoom: 1 / scale,\r\n    \"-moz-transform\": 1 / scale\r\n  });\r\n}\r\n\r\n// functions for control panel\r\n// show border for workspace block\r\nfunction setBorder(switcher, element) {\r\n  switcher.addEventListener(\"click\", function(e) {\r\n    element.classList.toggle(\"cert-bordered\");\r\n    element.classList.toggle(\"cert-active\");\r\n  });\r\n}\r\n// top position\r\nfunction setTop(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.top = e.target.value + \"px\";\r\n    data.positionTop = e.target.value;\r\n  });\r\n}\r\n// left position\r\nfunction setLeft(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.left = e.target.value + \"px\";\r\n    data.positionLeft = e.target.value;\r\n  });\r\n}\r\n// width\r\nfunction setWidth(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.width = e.target.value + \"px\";\r\n    data.width = e.target.value;\r\n  });\r\n}\r\n// font family\r\nfunction setFontFamily(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.fontFamily = e.target.value;\r\n    data.fontFamily = e.target.value;\r\n  });\r\n}\r\n// font size\r\nfunction setFontSize(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.fontSize = e.target.value + \"px\";\r\n    data.fontSize = e.target.value;\r\n  });\r\n}\r\n// line height\r\nfunction setLineHeight(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.lineHeight = e.target.value;\r\n    data.lineHeight = e.target.value;\r\n  });\r\n}\r\n// color picker\r\nfunction setColor(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.color = e.target.value;\r\n    data.color = e.target.value;\r\n  });\r\n}\r\n// font style\r\nfunction setFontStyle(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    let style = \"normal\",\r\n      weight = \"normal\";\r\n    switch (e.target.value) {\r\n      case \"По умолчанию\":\r\n        style = \"normal\";\r\n        weight = \"normal\";\r\n        break;\r\n      case \"Жирный\":\r\n        style = \"normal\";\r\n        weight = \"bold\";\r\n        break;\r\n      case \"Курсив\":\r\n        style = \"italic\";\r\n        weight = \"normal\";\r\n        break;\r\n      case \"Жирный + курсив\":\r\n        style = \"italic\";\r\n        weight = \"bold\";\r\n        break;\r\n      default:\r\n        style = \"normal\";\r\n        weight = \"normal\";\r\n    }\r\n    element.style.fontStyle = style;\r\n    element.style.fontWeight = weight;\r\n    data.fontStyle = e.target.value;\r\n  });\r\n}\r\n// text align\r\nfunction setTextAlign(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    let textAlign = \"left\";\r\n    switch (e.target.value) {\r\n      case \"По левому краю\":\r\n        textAlign = \"left\";\r\n        break;\r\n      case \"По правому краю\":\r\n        textAlign = \"right\";\r\n        break;\r\n      case \"По центру\":\r\n        textAlign = \"center\";\r\n        break;\r\n      case \"По ширине\":\r\n        textAlign = \"justify\";\r\n        break;\r\n    }\r\n    element.style.textAlign = textAlign;\r\n    data.textAlign = e.target.value;\r\n  });\r\n}\r\n// text value\r\nfunction setValue(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    $(element).text(e.target.value);\r\n    data.value = e.target.value;\r\n    calcViewFont(element, data.maxStr, parseInt($(element).css('font-size'), 10));\r\n    $(element).resizable({\r\n      handles: \"e, w\",\r\n      containment: \"parent\",\r\n    });\r\n  });\r\n}\r\n// max number strings in block\r\nfunction setMaxStr(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    $(element).css('font-size', `${data.fontSize}px`);\r\n    calcViewFont(element, e.target.value, parseInt($(element).css('font-size'), 10));\r\n    data.maxStr = e.target.value;\r\n  });\r\n}\r\n\r\n// drag and resize\r\nfunction setDragResize(\r\n  element,\r\n  switcherTop,\r\n  switcherLeft,\r\n  switcherWidth,\r\n  data\r\n) {\r\n  element.draggable({\r\n    containment: \"parent\",\r\n    drag: function(event, ui) {\r\n      let top = Math.ceil(ui.position.top),\r\n        left = Math.ceil(ui.position.left);\r\n      switcherTop.val(top);\r\n      switcherLeft.val(left);\r\n      data.positionTop = `${top}`;\r\n      data.positionLeft = `${left}`;\r\n    }\r\n  });\r\n  element.resizable({\r\n    handles: \"e, w\",\r\n    containment: \"parent\",\r\n    resize: function(event, ui) {\r\n      let w = Math.ceil(ui.size.width);\r\n      event.target.style.maxWidth = `${w}px`;\r\n      switcherWidth.val(w);\r\n      data.width = `${w}`;\r\n    }\r\n  });\r\n}\r\n\r\n// read file (for set background)\r\nfunction readFile(file, onLoadCallback) {\r\n  var reader = new FileReader();\r\n  reader.onload = onLoadCallback;\r\n  reader.readAsDataURL(file);\r\n}\r\n\r\n// create pdf\r\nfunction createPreviewPdf() {\r\n  // page size A4: [595.28, 841.89],\r\n  // https://github.com/bpampuch/pdfmake/blob/7b5675d5b9d5d7b815bd721e00504b16560a6382/src/standardPageSizes.js\r\n  const w = $(\".cert-wokrspace__content\").width(),\r\n    h = $(\".cert-wokrspace__content\").height(),\r\n    paperW = userData.orientation == \"landscape\" ? 841.89 : 595.28,\r\n    paperH = userData.orientation == \"landscape\" ? 595.28 : 841.89;\r\n\r\n  function getX(elem) {\r\n    return elem.position().left / w * paperW;\r\n  }\r\n\r\n  function getY(elem) {\r\n    return elem.position().top / h * paperH;\r\n  }\r\n\r\n  function getW(elem) {\r\n    return elem.width() / w * paperW;\r\n  }\r\n\r\n  function getFontFamily(elem) {\r\n    return elem.css(\"font-family\");\r\n  }\r\n\r\n  function getFontSize(elem) {\r\n    return parseInt(elem.css(\"font-size\"), 10) / w * paperW;\r\n  }\r\n\r\n  function getFontWeight(elem) {\r\n    return elem.css(\"font-weight\") >= 600;\r\n  }\r\n\r\n  function getFontStyle(elem) {\r\n    return elem.css(\"font-style\") === \"italic\";\r\n  }\r\n\r\n  function getLineHeight(elem) {\r\n    return (\r\n      parseInt(elem.css(\"line-height\"), 10) / getFontSize(elem) / w * paperW\r\n    );\r\n  }\r\n\r\n  function rgb2hex(rgb) {\r\n    if (rgb.search(\"rgb\") == -1) {\r\n      return rgb;\r\n    } else {\r\n      rgb = rgb.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+))?\\)$/);\r\n\r\n      function hex(x) {\r\n        return (\"0\" + parseInt(x).toString(16)).slice(-2);\r\n      }\r\n      return \"#\" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\r\n    }\r\n  }\r\n\r\n  function getColor(elem) {\r\n    return rgb2hex(elem.css(\"color\"));\r\n  }\r\n\r\n  function getAlignment(elem) {\r\n    return elem.css(\"text-align\");\r\n  }\r\n\r\n  function getBgW() {\r\n    return userData.background.size === \"По ширине\"\r\n      ? paperW\r\n      : paperH * loadedImg.width / loadedImg.height;\r\n  }\r\n\r\n  function getBgH() {\r\n    return userData.background.size === \"По высоте\"\r\n      ? paperH\r\n      : paperW * loadedImg.height / loadedImg.width;\r\n  }\r\n\r\n  const docDefinition = {\r\n    info: {\r\n      title: \"certificate\"\r\n    },\r\n    pageSize: \"A4\",\r\n    pageOrientation: userData.orientation,\r\n    background: [\r\n      {\r\n        image: userData.background.image,\r\n        width: getBgW(),\r\n        height: getBgH(),\r\n        absolutePosition: {\r\n          x: Number(userData.background.positionLeft),\r\n          y: Number(userData.background.positionTop)\r\n        }\r\n      }\r\n    ],\r\n    content: [\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-name\"))],\r\n          body: [\r\n            [\r\n              {\r\n                fontSize: getFontSize($(\".cert-name\")),\r\n                font: getFontFamily($(\".cert-name\")),\r\n                bold: getFontWeight($(\".cert-name\")),\r\n                italics: getFontStyle($(\".cert-name\")),\r\n                lineHeight: getLineHeight($(\".cert-name\")),\r\n                alignment: getAlignment($(\".cert-name\")),\r\n                color: getColor($(\".cert-name\")),\r\n                text: $(\".cert-name\").text(),\r\n                border: [false, false, false, false],\r\n                margin: [-5, -5, -5, -5]\r\n              }\r\n            ]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-name\")),\r\n          y: getY($(\".cert-name\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-number\"))],\r\n          body: [\r\n            [\r\n              {\r\n                fontSize: getFontSize($(\".cert-number\")),\r\n                font: getFontFamily($(\".cert-number\")),\r\n                bold: getFontWeight($(\".cert-number\")),\r\n                italics: getFontStyle($(\".cert-number\")),\r\n                lineHeight: getLineHeight($(\".cert-number\")),\r\n                alignment: getAlignment($(\".cert-number\")),\r\n                color: getColor($(\".cert-number\")),\r\n                text: $(\".cert-number\").text(),\r\n                border: [false, false, false, false],\r\n                margin: [-5, -5, -5, -5]\r\n              }\r\n            ]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-number\")),\r\n          y: getY($(\".cert-number\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-course\"))],\r\n          body: [\r\n            [\r\n              {\r\n                fontSize: getFontSize($(\".cert-course\")),\r\n                font: getFontFamily($(\".cert-course\")),\r\n                bold: getFontWeight($(\".cert-course\")),\r\n                italics: getFontStyle($(\".cert-course\")),\r\n                lineHeight: getLineHeight($(\".cert-course\")),\r\n                alignment: getAlignment($(\".cert-course\")),\r\n                color: getColor($(\".cert-course\")),\r\n                text: $(\".cert-course\").text(),\r\n                border: [false, false, false, false],\r\n                margin: [-5, -5, -5, -5]\r\n              }\r\n            ]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-course\")),\r\n          y: getY($(\".cert-course\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-date\"))],\r\n          body: [\r\n            [\r\n              {\r\n                fontSize: getFontSize($(\".cert-date\")),\r\n                font: getFontFamily($(\".cert-date\")),\r\n                bold: getFontWeight($(\".cert-date\")),\r\n                italics: getFontStyle($(\".cert-date\")),\r\n                lineHeight: getLineHeight($(\".cert-date\")),\r\n                alignment: getAlignment($(\".cert-date\")),\r\n                color: getColor($(\".cert-date\")),\r\n                text: $(\".cert-date\").text(),\r\n                border: [false, false, false, false],\r\n                margin: [-5, -5, -5, -5]\r\n              }\r\n            ]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-date\")),\r\n          y: getY($(\".cert-date\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-duration\"))],\r\n          body: [\r\n            [\r\n              {\r\n                fontSize: getFontSize($(\".cert-duration\")),\r\n                font: getFontFamily($(\".cert-duration\")),\r\n                bold: getFontWeight($(\".cert-duration\")),\r\n                italics: getFontStyle($(\".cert-duration\")),\r\n                lineHeight: getLineHeight($(\".cert-duration\")),\r\n                alignment: getAlignment($(\".cert-duration\")),\r\n                color: getColor($(\".cert-duration\")),\r\n                text: $(\".cert-duration\").text(),\r\n                border: [false, false, false, false],\r\n                margin: [-5, -5, -5, -5]\r\n              }\r\n            ]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-duration\")),\r\n          y: getY($(\".cert-duration\"))\r\n        }\r\n      }\r\n    ]\r\n  };\r\n\r\n  pdfMake.fonts = {\r\n    Roboto: {\r\n      normal: \"Roboto-Regular.ttf\",\r\n      bold: \"Roboto-Bold.ttf\",\r\n      italics: \"Roboto-Italic.ttf\",\r\n      bolditalics: \"Roboto-BoldItalic.ttf\"\r\n    },\r\n    \"Open Sans\": {\r\n      normal: \"OpenSans-Regular.ttf\",\r\n      bold: \"OpenSans-Bold.ttf\",\r\n      italics: \"OpenSans-Italic.ttf\",\r\n      bolditalics: \"OpenSans-BoldItalic.ttf\"\r\n    },\r\n    Montserrat: {\r\n      normal: \"Montserrat-Regular.ttf\",\r\n      bold: \"Montserrat-Bold.ttf\",\r\n      italics: \"Montserrat-Italic.ttf\",\r\n      bolditalics: \"Montserrat-BoldItalic.ttf\"\r\n    },\r\n    Lora: {\r\n      normal: \"Lora-Regular.ttf\",\r\n      bold: \"Lora-Bold.ttf\",\r\n      italics: \"Lora-Italic.ttf\",\r\n      bolditalics: \"Lora-BoldItalic.ttf\"\r\n    }\r\n  };\r\n\r\n  $(\r\n    \"#previewFancyLink\"\r\n  )[0].innerHTML = `<a data-fancybox data-type=\"iframe\" data-src=\"\" href=\"javascript:;\"></a>`;\r\n  pdfMake.createPdf(docDefinition).getBase64(data => {\r\n    $(\"#previewFancyLink a\")\r\n      .attr(\"data-src\", `data:application/pdf;base64,${data}`)\r\n      .click();\r\n  });\r\n\r\n  // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n}\r\n\r\n/* calculation font size with max strings number */\r\nfunction calcViewFont(element, inputValue, fontSize) {\r\n  let numStr = (elem) => {\r\n    return $(elem).height() / parseInt($(elem).css('line-height'), 10);\r\n  }\r\n  let i = 0;\r\n  while (numStr($(element)) > inputValue) {\r\n    i++;\r\n    $(element).css('font-size', `${fontSize - i}px`);\r\n  }\r\n}"]}