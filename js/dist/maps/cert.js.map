{"version":3,"sources":["cert.js"],"names":["defaultData","userData","loadedImg","scale","$","elements","control","data","workspace","elem","i","key","_typeof","setControl","css","background","image","setBgSize","bgSize","find","val","size","setBgPosition","bgX","positionLeft","bgY","positionTop","setWorkspaceZoom","zoom","setElement","switcher","element","classList","width","font-family","fontFamily","font-size","fontSize","line-height","addEventListener","top","e","text","value","fontStyle","setLeft","setWidth","calcViewFont","font-style","font-weight","parseInt","target","setLineHeight","lineHeight","setColor","color","style","weight","textAlign","maxStr","setBorder","fontWeight","setTextAlign","left","setFontSize","setDragResize","switcherTop","switcherLeft","draggable","containment","handles","resize","Math","event","switcherWidth","readFile","reader","readAsDataURL","paperW","orientation","paperH","position","getFontFamily","getFontSize","getFontWeight","setValue","getFontStyle","search","rgb","match","hex","getColor","drag","docDefinition","ui","info","ceil","title","pageSize","pageOrientation","height","getBgH","absolutePosition","x","Number","y","w","maxWidth","content","table","body","alignment","getAlignment","onLoadCallback","border","file","h","widths","font","margin","getX","getLineHeight","toString","slice","italics","getW","bold","fonts","Roboto","bolditalics","normal","createPdf","getY","pdfMake","Open Sans","Montserrat","Lora","innerHTML","getBase64","attr","click","inputValue","getJSON","done","err","textStatus","console","json","fail","jqxhr","error","document","ready","renderWorkspace","img","onload","FileReader","this","files","src","fr","result","each","on","setTop","setFontFamily","querySelector","elem1","getAttribute","createPreviewPdf","setFontStyle","setMaxStr","key1","remove","contains","add","changeBgPosition"],"mappings":"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","file":"../cert.js","sourcesContent":["// GLOBALS\r\nlet defaultData = {},\r\n  userData = {},\r\n  loadedImg = {},\r\n  scale = 1;\r\nconst elements = [\r\n  {\r\n    workspace: $(\".cert-name\"),\r\n    control: $(\"#control-name\"),\r\n    data: \"name\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-number\"),\r\n    control: $(\"#control-number\"),\r\n    data: \"number\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-course\"),\r\n    control: $(\"#control-course\"),\r\n    data: \"course\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-date\"),\r\n    control: $(\"#control-date\"),\r\n    data: \"date\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-duration\"),\r\n    control: $(\"#control-duration\"),\r\n    data: \"duration\"\r\n  }\r\n];\r\n\r\n// GETTING DATA\r\n$.getJSON(\"/json/data.json\")\r\n  .done(function(json) {\r\n    userData = defaultData = json;\r\n  })\r\n  .fail(function(jqxhr, textStatus, error) {\r\n    var err = textStatus + \", \" + error;\r\n    console.log(\"Request Failed: \" + err);\r\n  });\r\n\r\n$(document).ready(function() {\r\n  renderWorkspace(defaultData);\r\n  // default zoom by workspace width\r\n  scale = $(\".cert-wokrspace__content\").width() / $(\".cert-wokrspace\").width();\r\n  setWorkspaceZoom(scale);\r\n\r\n  // bg picker\r\n  $(\"#fileBg\").on(\"change\", function(e) {\r\n    let fr = new FileReader();\r\n    fr.readAsDataURL(this.files[0]);\r\n    fr.onload = function() {\r\n      let img = new Image();\r\n      img.onload = function() {\r\n        loadedImg = {\r\n          width: img.width,\r\n          height: img.height\r\n        };\r\n      };\r\n      img.src = fr.result;\r\n      $(\".cert-wokrspace__content\").css(\r\n        \"background-image\",\r\n        `url(\"${img.src}\")`\r\n      );\r\n      userData.background.image = img.src;\r\n    };\r\n\r\n    setBgSize();\r\n    setBgPosition(userData);\r\n  });\r\n  $(\"#control-bg\")\r\n    .find(\".control-bg-size\")\r\n    .on(\"change\", setBgSize);\r\n  $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .on(\"input\", changeBgPosition);\r\n  $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .on(\"input\", changeBgPosition);\r\n\r\n  $.each(elements, function(key, elem) {\r\n    // TOGGLE ACCORDITION\r\n    elem.workspace[0].addEventListener(\"click\", function() {\r\n      $(\".cert-controls .card-header a\")[key + 1].click();\r\n    });\r\n    // ACCORDITION (PANEL) CONTROLS\r\n    setBorder(\r\n      elem.control[0].querySelector(\".control-hidder\"),\r\n      elem.workspace[0]\r\n    );\r\n    setTop(\r\n      elem.control[0].querySelector(\".control-top\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setLeft(\r\n      elem.control[0].querySelector(\".control-left\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setWidth(\r\n      elem.control[0].querySelector(\".control-width\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontFamily(\r\n      elem.control[0].querySelector(\".control-font-family\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontSize(\r\n      elem.control[0].querySelector(\".control-font-size\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setLineHeight(\r\n      elem.control[0].querySelector(\".control-line-height\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setColor(\r\n      elem.control[0].querySelector(\".control-color\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontStyle(\r\n      elem.control[0].querySelector(\".control-font-style\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setTextAlign(\r\n      elem.control[0].querySelector(\".control-text-align\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    // if (key == 0 || key == 1) {\r\n      setValue(\r\n        elem.control[0].querySelector(\".control-value\"),\r\n        elem.workspace[0],\r\n        userData[elem.data]\r\n      );\r\n      setMaxStr(\r\n        elem.control[0].querySelector(\".control-max-str\"),\r\n        elem.workspace[0],\r\n        userData[elem.data]\r\n      );\r\n    // }\r\n    // DRAG AND RESIZE\r\n    setDragResize(\r\n      $(elem.workspace[0]),\r\n      $(elem.control[0]).find(\".control-top\"),\r\n      $(elem.control[0]).find(\".control-left\"),\r\n      $(elem.control[0]).find(\".control-width\"),\r\n      userData[elem.data]\r\n    );\r\n  });\r\n  $.each($(\".cert-controls .card-header a\"), function(key, elem) {\r\n    elem.addEventListener(\"click\", function() {\r\n      $.each(elements, function(key1, elem1) {\r\n        elem1.workspace[0].classList.remove(\"cert-active\");\r\n      });\r\n\r\n      if (elem.getAttribute(\"aria-expanded\") === \"false\" && key >= 1) {\r\n        if (\r\n          elements[key - 1].workspace[0].classList.contains(\"cert-bordered\")\r\n        ) {\r\n          elements[key - 1].workspace[0].classList.add(\"cert-active\");\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  // Create PDF\r\n  $(\"#preview\").click(function() {\r\n    createPreviewPdf();\r\n  });\r\n\r\n  $(\"#save\").click(function() {\r\n    console.log(userData);\r\n  });\r\n});\r\n\r\n/*\r\n * CONTROLS EVENTS\r\n */\r\n\r\n// WORKSPACE CONTROLS\r\n// resize workspace\r\n$(\".cert-wokrspace__zoom\").click(function() {\r\n  if (scale <= 3) {\r\n    scale += 0.5;\r\n    setWorkspaceZoom(scale);\r\n  }\r\n});\r\n// reset workspace\r\n$(\".cert-wokrspace__reset\").click(function() {\r\n  scale = $(\".cert-wokrspace__content\").width() / $(\".cert-wokrspace\").width();\r\n  setWorkspaceZoom(scale);\r\n});\r\n// reset original\r\n$(\".cert-wokrspace__original\").click(function() {\r\n  setWorkspaceZoom(1);\r\n  scale = 1;\r\n});\r\n// set landscape\r\n$(\".cert-wokrspace__landscape\").click(function() {\r\n  $(\".cert-wokrspace__content\").css({\r\n    height: \"793.7px\",\r\n    width: \"1122.5px\"\r\n  });\r\n  userData.orientation = \"landscape\";\r\n});\r\n// set portrait\r\n$(\".cert-wokrspace__portrait\").click(function() {\r\n  $(\".cert-wokrspace__content\").css({\r\n    height: \"1122.5px\",\r\n    width: \"793.7px\"\r\n  });\r\n  userData.orientation = \"portrait\";\r\n});\r\n\r\n/*\r\n * FUNCTIONS\r\n */\r\n// SET DEFAULT DATA INTO WORKSPACE\r\nfunction renderWorkspace(data) {\r\n  let i = 0;\r\n  for (let key in data) {\r\n    if (typeof data[key] === \"object\") {\r\n      // set workspace\r\n      if (key !== \"background\") {\r\n        setElement(elements[i].workspace, data[key]);\r\n        setControl(elements[i].control, data[key]);\r\n        i++;\r\n      } else {\r\n        $(\".cert-wokrspace__content\").css(\r\n          \"background-image\",\r\n          `url(\"${data.background.image}\")`\r\n        );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// background\r\nfunction setBgSize() {\r\n  let bgSize;\r\n  switch (\r\n    $(\"#control-bg\")\r\n      .find(\".control-bg-size\")\r\n      .val()\r\n  ) {\r\n    case \"По ширине\":\r\n      bgSize = \"100% auto\";\r\n      break;\r\n    case \"По высоте\":\r\n      bgSize = \"auto 100%\";\r\n      break;\r\n  }\r\n  $(\".cert-wokrspace__content\").css(\"background-size\", bgSize);\r\n  userData.background.size = $(\"#control-bg\")\r\n    .find(\".control-bg-size\")\r\n    .val();\r\n}\r\n\r\nfunction setBgPosition(data) {\r\n  let bgX = data.background.positionLeft,\r\n    bgY = data.background.positionTop;\r\n  $(\".cert-wokrspace__content\").css(\"background-position\", `${bgX}px ${bgY}px`);\r\n  $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .val(bgY);\r\n  $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .val(bgX);\r\n}\r\n\r\nfunction changeBgPosition() {\r\n  let bgY = $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .val();\r\n  let bgX = $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .val();\r\n  $(\".cert-wokrspace__content\").css(\"background-position\", `${bgX}px ${bgY}px`);\r\n  userData.background.positionTop = bgY;\r\n  userData.background.positionLeft = bgX;\r\n}\r\n\r\n// set css and text\r\nfunction setElement(elem, data) {\r\n  elem\r\n    .css({\r\n      top: `${data.positionTop}px`,\r\n      left: `${data.positionLeft}px`,\r\n      width: `${data.width}px`,\r\n      \"font-family\": data.fontFamily,\r\n      \"font-size\": `${data.fontSize}px`,\r\n      \"line-height\": data.lineHeight,\r\n      color: data.color,\r\n      \"text-align\": data.textAlign\r\n    })\r\n    .text(data.value);\r\n  // set font-style and font-weight\r\n  switch (data.fontStyle) {\r\n    case \"По умолчанию\":\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n      break;\r\n    case \"Жирный\":\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"bold\"\r\n      });\r\n      break;\r\n    case \"Курсив\":\r\n      elem.css({\r\n        \"font-style\": \"italic\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n      break;\r\n    case \"Жирный + курсив\":\r\n      elem.css({\r\n        \"font-style\": \"italic\",\r\n        \"font-weight\": \"bold\"\r\n      });\r\n      break;\r\n    default:\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n  }\r\n  // set alignment\r\n  switch (data.textAlign) {\r\n    case \"По левому краю\":\r\n      elem.css(\"text-align\", \"left\");\r\n      break;\r\n    case \"По правому краю\":\r\n      elem.css(\"text-align\", \"right\");\r\n      break;\r\n    case \"По центру\":\r\n      elem.css(\"text-align\", \"center\");\r\n      break;\r\n    case \"По ширине\":\r\n      elem.css(\"text-align\", \"justify\");\r\n      break;\r\n    default:\r\n      elem.css(\"text-align\", \"left\");\r\n      break;\r\n  }\r\n}\r\n// set controls values\r\nfunction setControl(elem, data) {\r\n  elem.find(\".control-top\").val(data.positionTop);\r\n  elem.find(\".control-left\").val(data.positionLeft);\r\n  elem.find(\".control-width\").val(data.width);\r\n  elem.find(\".control-font-family\").val(data.fontFamily);\r\n  elem.find(\".control-font-size\").val(data.fontSize);\r\n  elem.find(\".control-line-height\").val(data.lineHeight);\r\n  elem.find(\".control-color\").val(data.color);\r\n  elem.find(\".control-font-style\").val(data.fontStyle);\r\n  elem.find(\".control-text-align\").val(data.textAlign);\r\n  elem.find(\".control-value\").val(data.value);\r\n  elem.find(\".control-max-str\").val(data.maxStr);\r\n}\r\n// set workspace zoom\r\nfunction setWorkspaceZoom(scale) {\r\n  $(\".cert-wokrspace__content\").css({\r\n    zoom: 1 / scale,\r\n    \"-moz-transform\": 1 / scale\r\n  });\r\n}\r\n\r\n// functions for control panel\r\n// show border for workspace block\r\nfunction setBorder(switcher, element) {\r\n  switcher.addEventListener(\"click\", function(e) {\r\n    element.classList.toggle(\"cert-bordered\");\r\n    element.classList.toggle(\"cert-active\");\r\n  });\r\n}\r\n// top position\r\nfunction setTop(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.top = e.target.value + \"px\";\r\n    data.positionTop = e.target.value;\r\n  });\r\n}\r\n// left position\r\nfunction setLeft(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.left = e.target.value + \"px\";\r\n    data.positionLeft = e.target.value;\r\n  });\r\n}\r\n// width\r\nfunction setWidth(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.width = e.target.value + \"px\";\r\n    data.width = e.target.value;\r\n    // calc font\r\n    calcViewFont(element, data.maxStr, data.fontSize);\r\n  });\r\n}\r\n// font family\r\nfunction setFontFamily(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.fontFamily = e.target.value;\r\n    data.fontFamily = e.target.value;\r\n  });\r\n}\r\n// font size\r\nfunction setFontSize(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    if (parseInt(e.target.value) > 500) {\r\n      e.target.value = 500;\r\n    }\r\n    element.style.fontSize = e.target.value + \"px\";\r\n    data.fontSize = e.target.value;\r\n    // calc font\r\n    calcViewFont(element, data.maxStr, data.fontSize);\r\n  });\r\n}\r\n// line height\r\nfunction setLineHeight(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.lineHeight = e.target.value;\r\n    data.lineHeight = e.target.value;\r\n  });\r\n}\r\n// color picker\r\nfunction setColor(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    element.style.color = e.target.value;\r\n    data.color = e.target.value;\r\n  });\r\n}\r\n// font style\r\nfunction setFontStyle(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    let style = \"normal\",\r\n      weight = \"normal\";\r\n    switch (e.target.value) {\r\n      case \"По умолчанию\":\r\n        style = \"normal\";\r\n        weight = \"normal\";\r\n        break;\r\n      case \"Жирный\":\r\n        style = \"normal\";\r\n        weight = \"bold\";\r\n        break;\r\n      case \"Курсив\":\r\n        style = \"italic\";\r\n        weight = \"normal\";\r\n        break;\r\n      case \"Жирный + курсив\":\r\n        style = \"italic\";\r\n        weight = \"bold\";\r\n        break;\r\n      default:\r\n        style = \"normal\";\r\n        weight = \"normal\";\r\n    }\r\n    element.style.fontStyle = style;\r\n    element.style.fontWeight = weight;\r\n    data.fontStyle = e.target.value;\r\n  });\r\n}\r\n// text align\r\nfunction setTextAlign(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    let textAlign = \"left\";\r\n    switch (e.target.value) {\r\n      case \"По левому краю\":\r\n        textAlign = \"left\";\r\n        break;\r\n      case \"По правому краю\":\r\n        textAlign = \"right\";\r\n        break;\r\n      case \"По центру\":\r\n        textAlign = \"center\";\r\n        break;\r\n      case \"По ширине\":\r\n        textAlign = \"justify\";\r\n        break;\r\n    }\r\n    element.style.textAlign = textAlign;\r\n    data.textAlign = e.target.value;\r\n  });\r\n}\r\n// text value\r\nfunction setValue(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    $(element).text(e.target.value);\r\n    data.value = e.target.value;\r\n    calcViewFont(\r\n      element,\r\n      data.maxStr,\r\n      parseInt($(element).css(\"font-size\"), 10)\r\n    );\r\n    $(element).resizable({\r\n      handles: \"e, w\",\r\n      containment: \"parent\"\r\n    });\r\n  });\r\n}\r\n// max number strings in block\r\nfunction setMaxStr(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function(e) {\r\n    $(element).css(\"font-size\", `${data.fontSize}px`);\r\n    calcViewFont(\r\n      element,\r\n      e.target.value,\r\n      parseInt($(element).css(\"font-size\"), 10)\r\n    );\r\n    data.maxStr = e.target.value;\r\n  });\r\n}\r\n\r\n// drag and resize\r\nfunction setDragResize(\r\n  element,\r\n  switcherTop,\r\n  switcherLeft,\r\n  switcherWidth,\r\n  data\r\n) {\r\n  element.draggable({\r\n    containment: \"parent\",\r\n    drag: function(event, ui) {\r\n      let top = Math.ceil(ui.position.top),\r\n        left = Math.ceil(ui.position.left);\r\n      switcherTop.val(top);\r\n      switcherLeft.val(left);\r\n      data.positionTop = `${top}`;\r\n      data.positionLeft = `${left}`;\r\n    }\r\n  });\r\n  element.resizable({\r\n    handles: \"e, w\",\r\n    containment: \"parent\",\r\n    resize: function(event, ui) {\r\n      let w = Math.ceil(ui.size.width);\r\n      event.target.style.maxWidth = `${w}px`;\r\n      switcherWidth.val(w);\r\n      data.width = `${w}`;\r\n      // calc font\r\n      calcViewFont(element, data.maxStr, data.fontSize);\r\n    }\r\n  });\r\n}\r\n\r\n// read file (for set background)\r\nfunction readFile(file, onLoadCallback) {\r\n  var reader = new FileReader();\r\n  reader.onload = onLoadCallback;\r\n  reader.readAsDataURL(file);\r\n}\r\n\r\n// create pdf\r\nfunction createPreviewPdf() {\r\n  // page size A4: [595.28, 841.89],\r\n  // https://github.com/bpampuch/pdfmake/blob/7b5675d5b9d5d7b815bd721e00504b16560a6382/src/standardPageSizes.js\r\n  const w = $(\".cert-wokrspace__content\").width(),\r\n    h = $(\".cert-wokrspace__content\").height(),\r\n    paperW = userData.orientation == \"landscape\" ? 841.89 : 595.28,\r\n    paperH = userData.orientation == \"landscape\" ? 595.28 : 841.89;\r\n\r\n  function getX(elem) {\r\n    return elem.position().left / w * paperW;\r\n  }\r\n\r\n  function getY(elem) {\r\n    return elem.position().top / h * paperH;\r\n  }\r\n\r\n  function getW(elem) {\r\n    return elem.width() / w * paperW;\r\n  }\r\n\r\n  function getFontFamily(elem) {\r\n    return elem.css(\"font-family\");\r\n  }\r\n\r\n  function getFontSize(elem) {\r\n    return parseInt(elem.css(\"font-size\"), 10) / w * paperW;\r\n  }\r\n\r\n  function getFontWeight(elem) {\r\n    return elem.css(\"font-weight\") >= 600;\r\n  }\r\n\r\n  function getFontStyle(elem) {\r\n    return elem.css(\"font-style\") === \"italic\";\r\n  }\r\n\r\n  function getLineHeight(elem) {\r\n    return (\r\n      parseInt(elem.css(\"line-height\"), 10) / getFontSize(elem) / w * paperW\r\n    );\r\n  }\r\n\r\n  function rgb2hex(rgb) {\r\n    if (rgb.search(\"rgb\") == -1) {\r\n      return rgb;\r\n    } else {\r\n      rgb = rgb.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+))?\\)$/);\r\n\r\n      function hex(x) {\r\n        return (\"0\" + parseInt(x).toString(16)).slice(-2);\r\n      }\r\n      return \"#\" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\r\n    }\r\n  }\r\n\r\n  function getColor(elem) {\r\n    return rgb2hex(elem.css(\"color\"));\r\n  }\r\n\r\n  function getAlignment(elem) {\r\n    return elem.css(\"text-align\");\r\n  }\r\n\r\n  function getBgW() {\r\n    return userData.background.size === \"По ширине\"\r\n      ? paperW\r\n      : paperH * loadedImg.width / loadedImg.height;\r\n  }\r\n\r\n  function getBgH() {\r\n    return userData.background.size === \"По высоте\"\r\n      ? paperH\r\n      : paperW * loadedImg.height / loadedImg.width;\r\n  }\r\n\r\n  const docDefinition = {\r\n    info: {\r\n      title: \"certificate\"\r\n    },\r\n    pageSize: \"A4\",\r\n    pageOrientation: userData.orientation,\r\n    background: [\r\n      {\r\n        image: userData.background.image,\r\n        width: getBgW(),\r\n        height: getBgH(),\r\n        absolutePosition: {\r\n          x: Number(userData.background.positionLeft),\r\n          y: Number(userData.background.positionTop)\r\n        }\r\n      }\r\n    ],\r\n    content: [\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-name\"))],\r\n          body: [\r\n            [\r\n              {\r\n                fontSize: getFontSize($(\".cert-name\")),\r\n                font: getFontFamily($(\".cert-name\")),\r\n                bold: getFontWeight($(\".cert-name\")),\r\n                italics: getFontStyle($(\".cert-name\")),\r\n                lineHeight: getLineHeight($(\".cert-name\")),\r\n                alignment: getAlignment($(\".cert-name\")),\r\n                color: getColor($(\".cert-name\")),\r\n                text: $(\".cert-name\").text(),\r\n                border: [false, false, false, false],\r\n                margin: [-5, -5, -5, -5]\r\n              }\r\n            ]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-name\")),\r\n          y: getY($(\".cert-name\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-number\"))],\r\n          body: [\r\n            [\r\n              {\r\n                fontSize: getFontSize($(\".cert-number\")),\r\n                font: getFontFamily($(\".cert-number\")),\r\n                bold: getFontWeight($(\".cert-number\")),\r\n                italics: getFontStyle($(\".cert-number\")),\r\n                lineHeight: getLineHeight($(\".cert-number\")),\r\n                alignment: getAlignment($(\".cert-number\")),\r\n                color: getColor($(\".cert-number\")),\r\n                text: $(\".cert-number\").text(),\r\n                border: [false, false, false, false],\r\n                margin: [-5, -5, -5, -5]\r\n              }\r\n            ]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-number\")),\r\n          y: getY($(\".cert-number\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-course\"))],\r\n          body: [\r\n            [\r\n              {\r\n                fontSize: getFontSize($(\".cert-course\")),\r\n                font: getFontFamily($(\".cert-course\")),\r\n                bold: getFontWeight($(\".cert-course\")),\r\n                italics: getFontStyle($(\".cert-course\")),\r\n                lineHeight: getLineHeight($(\".cert-course\")),\r\n                alignment: getAlignment($(\".cert-course\")),\r\n                color: getColor($(\".cert-course\")),\r\n                text: $(\".cert-course\").text(),\r\n                border: [false, false, false, false],\r\n                margin: [-5, -5, -5, -5]\r\n              }\r\n            ]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-course\")),\r\n          y: getY($(\".cert-course\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-date\"))],\r\n          body: [\r\n            [\r\n              {\r\n                fontSize: getFontSize($(\".cert-date\")),\r\n                font: getFontFamily($(\".cert-date\")),\r\n                bold: getFontWeight($(\".cert-date\")),\r\n                italics: getFontStyle($(\".cert-date\")),\r\n                lineHeight: getLineHeight($(\".cert-date\")),\r\n                alignment: getAlignment($(\".cert-date\")),\r\n                color: getColor($(\".cert-date\")),\r\n                text: $(\".cert-date\").text(),\r\n                border: [false, false, false, false],\r\n                margin: [-5, -5, -5, -5]\r\n              }\r\n            ]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-date\")),\r\n          y: getY($(\".cert-date\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-duration\"))],\r\n          body: [\r\n            [\r\n              {\r\n                fontSize: getFontSize($(\".cert-duration\")),\r\n                font: getFontFamily($(\".cert-duration\")),\r\n                bold: getFontWeight($(\".cert-duration\")),\r\n                italics: getFontStyle($(\".cert-duration\")),\r\n                lineHeight: getLineHeight($(\".cert-duration\")),\r\n                alignment: getAlignment($(\".cert-duration\")),\r\n                color: getColor($(\".cert-duration\")),\r\n                text: $(\".cert-duration\").text(),\r\n                border: [false, false, false, false],\r\n                margin: [-5, -5, -5, -5]\r\n              }\r\n            ]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-duration\")),\r\n          y: getY($(\".cert-duration\"))\r\n        }\r\n      }\r\n    ]\r\n  };\r\n\r\n  pdfMake.fonts = {\r\n    Roboto: {\r\n      normal: \"Roboto-Regular.ttf\",\r\n      bold: \"Roboto-Bold.ttf\",\r\n      italics: \"Roboto-Italic.ttf\",\r\n      bolditalics: \"Roboto-BoldItalic.ttf\"\r\n    },\r\n    \"Open Sans\": {\r\n      normal: \"OpenSans-Regular.ttf\",\r\n      bold: \"OpenSans-Bold.ttf\",\r\n      italics: \"OpenSans-Italic.ttf\",\r\n      bolditalics: \"OpenSans-BoldItalic.ttf\"\r\n    },\r\n    Montserrat: {\r\n      normal: \"Montserrat-Regular.ttf\",\r\n      bold: \"Montserrat-Bold.ttf\",\r\n      italics: \"Montserrat-Italic.ttf\",\r\n      bolditalics: \"Montserrat-BoldItalic.ttf\"\r\n    },\r\n    Lora: {\r\n      normal: \"Lora-Regular.ttf\",\r\n      bold: \"Lora-Bold.ttf\",\r\n      italics: \"Lora-Italic.ttf\",\r\n      bolditalics: \"Lora-BoldItalic.ttf\"\r\n    }\r\n  };\r\n\r\n  $(\r\n    \"#previewFancyLink\"\r\n  )[0].innerHTML = `<a data-fancybox data-type=\"iframe\" data-src=\"\" href=\"javascript:;\"></a>`;\r\n  pdfMake.createPdf(docDefinition).getBase64(data => {\r\n    $(\"#previewFancyLink a\")\r\n      .attr(\"data-src\", `data:application/pdf;base64,${data}`)\r\n      .click();\r\n  });\r\n\r\n  // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n}\r\n\r\n/* calculation font size with max strings number */\r\nfunction calcViewFont(element, inputValue, fontSize) {\r\n  $(element).css(\"font-size\", `${fontSize}px`); // reset\r\n  let numStr = elem => {\r\n    return $(elem).height() / parseInt($(elem).css(\"line-height\"), 10);\r\n  };\r\n  let i = 0;\r\n  while (numStr($(element)) > inputValue) {\r\n    i++;\r\n    $(element).css(\"font-size\", `${fontSize - i}px`);\r\n  }\r\n}\r\n"]}