{"version":3,"sources":["cert.js"],"names":["defaultData","userData","loadedImg","scale","resetData","fontFamily","fontSize","lineHeight","color","fontStyle","textAlign","value","maxStr","number","positionTop","positionLeft","width","course","date","duration","background","image","size","orientation","elements","workspace","$","control","data","i","text","_typeof","key","elem","setControl","find","css","setBgSize","bgSize","val","setBgPosition","bgX","bgY","zoom","setElement","setBorder","switcher","addEventListener","element","classList","font-family","font-size","line-height","setTop","setLeft","font-style","calcViewFont","font-weight","style","e","parseInt","target","setLineHeight","setFontStyle","weight","-moz-transform","fontWeight","setTextAlign","setWidth","setValue","containment","setMaxStr","setDragResize","switcherTop","setColor","Math","ui","position","switcherLeft","left","handles","resize","w","ceil","event","switcherWidth","reader","onload","readAsDataURL","createPreviewPdf","paperW","getY","getW","getFontFamily","getFontStyle","rgb2hex","search","rgb","draggable","drag","docDefinition","top","info","title","pageSize","pageOrientation","getBgW","height","absolutePosition","x","Number","y","maxWidth","content","widths","getLineHeight","alignment","getColor","file","h","table","body","getFontSize","italics","border","margin","hex","toString","slice","bold","getFontWeight","match","getAlignment","getX","font","normal","bolditalics","Montserrat","createPdf","inputValue","numStr","pdfMake","fonts","Roboto","Open Sans","Lora","innerHTML","getBase64","attr","click","json","renderWorkspace","fail","jQuery","extend","error","err","document","setWorkspaceZoom","fr","on","img","FileReader","this","files","src","result","each","setFontFamily","querySelector","elem1","console","setFontSize","remove","contains","add","log","changeBgPosition"],"mappings":"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","file":"../cert.js","sourcesContent":["// GLOBALS\r\nlet defaultData = {},\r\n  userData = {},\r\n  loadedImg = {},\r\n  scale = 1,\r\n  resetData = {\r\n    \"name\": {\r\n      \"positionTop\": \"50\",\r\n      \"positionLeft\": \"50\",\r\n      \"width\": \"500\",\r\n      \"fontFamily\": \"Roboto\",\r\n      \"fontSize\": \"20\",\r\n      \"lineHeight\": \"1.25\",\r\n      \"color\": \"#ff0000\",\r\n      \"fontStyle\": \"Жирный\",\r\n      \"textAlign\": \"По левому краю\",\r\n      \"value\": \"Иванов Иван Иванович\",\r\n      \"maxStr\": \"2\"\r\n    },\r\n    \"number\": {\r\n      \"positionTop\": \"50\",\r\n      \"positionLeft\": \"600\",\r\n      \"width\": \"500\",\r\n      \"fontFamily\": \"Roboto\",\r\n      \"fontSize\": \"20\",\r\n      \"lineHeight\": \"1.25\",\r\n      \"color\": \"#0000ff\",\r\n      \"fontStyle\": \"Жирный\",\r\n      \"textAlign\": \"По левому краю\",\r\n      \"value\": \"000-0000-000-01\",\r\n      \"maxStr\": \"1\"\r\n    },\r\n    \"course\": {\r\n      \"positionTop\": \"300\",\r\n      \"positionLeft\": \"50\",\r\n      \"width\": \"500\",\r\n      \"fontFamily\": \"Roboto\",\r\n      \"fontSize\": \"30\",\r\n      \"lineHeight\": \"1.25\",\r\n      \"color\": \"#00ff00\",\r\n      \"fontStyle\": \"По умолчанию\",\r\n      \"textAlign\": \"По левому краю\",\r\n      \"value\": \"Технология блокчейн в сельском хозяйстве\",\r\n      \"maxStr\": \"2\"\r\n    },\r\n    \"date\": {\r\n      \"positionTop\": \"600\",\r\n      \"positionLeft\": \"50\",\r\n      \"width\": \"500\",\r\n      \"fontFamily\": \"Roboto\",\r\n      \"fontSize\": \"20\",\r\n      \"lineHeight\": \"1.25\",\r\n      \"color\": \"#ff0000\",\r\n      \"fontStyle\": \"По умолчанию\",\r\n      \"textAlign\": \"По левому краю\",\r\n      \"value\": \"Дата окончания: 30.02.2007\",\r\n      \"maxStr\": \"1\"\r\n    },\r\n    \"duration\": {\r\n      \"positionTop\": \"700\",\r\n      \"positionLeft\": \"50\",\r\n      \"width\": \"500\",\r\n      \"fontFamily\": \"Roboto\",\r\n      \"fontSize\": \"20\",\r\n      \"lineHeight\": \"1.25\",\r\n      \"color\": \"#0000ff\",\r\n      \"fontStyle\": \"По умолчанию\",\r\n      \"textAlign\": \"По левому краю\",\r\n      \"value\": \"Продолжительность: 2 часа\",\r\n      \"maxStr\": \"1\"\r\n    },\r\n    \"background\": {\r\n      \"image\": \"data:image/jpeg;base64,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Y3JvcFJlY3RUb3Bsb25nAAAAAAA4QklNA+0AAAAAABAAAQAAAAEAAQABAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAABaOEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAABOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgABOEJJTQQCAAAAAAAEAAAAADhCSU0EMAAAAAAAAgEBOEJJTQQtAAAAAAAGAAEAAAACOEJJTQQIAAAAAAAQAAAAAQAAAkAAAAJAAAAAADhCSU0EHgAAAAAABAAAAAA4QklNBBoAAAAAA0sAAAAGAAAAAAAAAAAAAAABAAAAAQAAAAsEEQQ1BDcAIAQ4BDwENQQ9BDgALQAxAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAbnVsbAAAAAIAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAAAAQAAAABSZ2h0bG9uZwAAAAEAAAAGc2xpY2VzVmxMcwAAAAFPYmpjAAAAAQAAAAAABXNsaWNlAAAAEgAAAAdzbGljZUlEbG9uZwAAAAAAAAAHZ3JvdXBJRGxvbmcAAAAAAAAABm9yaWdpbmVudW0AAAAMRVNsaWNlT3JpZ2luAAAADWF1dG9HZW5lcmF0ZWQAAAAAVHlwZWVudW0AAAAKRVNsaWNlVHlwZQAAAABJbWcgAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0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IiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA1LTI5VDE5OjA3OjIyKzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wNS0yOVQxOTowNzoyMiswMzowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NTY5NTUzMi1mOTZmLTFiNGUtODIwNi01YjU3OTM4MjgyZmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoxZGYxNDEzOC0xZjU1LTYwNDUtYWE0YS0wMmZmYWRhN2NhMTQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozMzQ1MzQ0NC0xOTZkLTdiNGMtYmViYi05ZWNlNzJkMmRkOTUiIGRjOmZvcm1hdD0iaW1hZ2UvanBlZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyI+DQoJCQk8eG1wTU06SGlzdG9yeT4NCgkJCQk8cmRmOlNlcT4NCgkJCQkJPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MzM0NTM0NDQtMTk2ZC03YjRjLWJlYmItOWVjZTcyZDJkZDk1IiBzdEV2dDp3aGVuPSIyMDE4LTA1LTI5VDE5OjA3OjIyKzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+DQoJCQkJCTxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NTY5NTUzMi1mOTZmLTFiNGUtODIwNi01YjU3OTM4MjgyZmQiIHN0RXZ0OndoZW49IjIwMTgtMDUtMjlUMTk6MDc6MjIrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4NCgkJCQk8L3JkZjpTZXE+DQoJCQk8L3htcE1NOkhpc3Rvcnk+DQoJCTwvcmRmOkRlc2NyaXB0aW9uPg0KCTwvcmRmOlJERj4NCjwveDp4bXBtZXRhPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9J3cnPz7/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9/KKKKAP/2Q==\",\r\n      \"positionTop\": \"0\",\r\n      \"positionLeft\": \"0\",\r\n      \"size\": \"По ширине\"\r\n    },\r\n    \"orientation\": \"landscape\"\r\n  };\r\nconst elements = [{\r\n    workspace: $(\".cert-name\"),\r\n    control: $(\"#control-name\"),\r\n    data: \"name\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-number\"),\r\n    control: $(\"#control-number\"),\r\n    data: \"number\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-course\"),\r\n    control: $(\"#control-course\"),\r\n    data: \"course\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-date\"),\r\n    control: $(\"#control-date\"),\r\n    data: \"date\"\r\n  },\r\n  {\r\n    workspace: $(\".cert-duration\"),\r\n    control: $(\"#control-duration\"),\r\n    data: \"duration\"\r\n  }\r\n];\r\n\r\n// GETTING DATA\r\n$.getJSON(\"json/data.json\")\r\n  .done(function (json) {\r\n    userData = json;\r\n    defaultData = json;\r\n    renderWorkspace(defaultData);\r\n  })\r\n  .fail(function (jqxhr, textStatus, error) {\r\n    var err = textStatus + \", \" + error;\r\n    console.log(\"Request Failed: \" + err);\r\n    userData = jQuery.extend(true, {}, resetData);\r\n    defaultData = jQuery.extend(true, {}, resetData);\r\n    renderWorkspace(defaultData);\r\n  });\r\n\r\n$(document).ready(function () {\r\n  // default zoom by workspace width\r\n  scale = $(\".cert-wokrspace__content\").width() / $(\".cert-wokrspace\").width();\r\n  setWorkspaceZoom(scale);\r\n\r\n  // bg picker\r\n  $(\"#fileBg\").on(\"change\", function (e) {\r\n    let fr = new FileReader();\r\n    fr.readAsDataURL(this.files[0]);\r\n    fr.onload = function () {\r\n      let img = new Image();\r\n      img.onload = function () {\r\n        loadedImg = {\r\n          width: img.width,\r\n          height: img.height\r\n        };\r\n      };\r\n      img.src = fr.result;\r\n      $(\".cert-wokrspace__content\").css(\r\n        \"background-image\",\r\n        `url(\"${img.src}\")`\r\n      );\r\n      userData.background.image = img.src;\r\n    };\r\n\r\n    setBgSize();\r\n    setBgPosition(userData);\r\n  });\r\n  $(\"#control-bg\")\r\n    .find(\".control-bg-size\")\r\n    .on(\"change\", setBgSize);\r\n  $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .on(\"input\", changeBgPosition);\r\n  $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .on(\"input\", changeBgPosition);\r\n\r\n  $.each(elements, function (key, elem) {\r\n    // TOGGLE ACCORDITION\r\n    elem.workspace[0].addEventListener(\"click\", function () {\r\n      $(\".cert-controls .card-header a\")[key + 1].click();\r\n    });\r\n    // ACCORDITION (PANEL) CONTROLS\r\n    setBorder(\r\n      elem.control[0].querySelector(\".control-hidder\"),\r\n      elem.workspace[0]\r\n    );\r\n    setTop(\r\n      elem.control[0].querySelector(\".control-top\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setLeft(\r\n      elem.control[0].querySelector(\".control-left\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setWidth(\r\n      elem.control[0].querySelector(\".control-width\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontFamily(\r\n      elem.control[0].querySelector(\".control-font-family\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontSize(\r\n      elem.control[0].querySelector(\".control-font-size\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setLineHeight(\r\n      elem.control[0].querySelector(\".control-line-height\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setColor(\r\n      elem.control[0].querySelector(\".control-color\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setFontStyle(\r\n      elem.control[0].querySelector(\".control-font-style\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setTextAlign(\r\n      elem.control[0].querySelector(\".control-text-align\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    // if (key == 0 || key == 1) {\r\n    setValue(\r\n      elem.control[0].querySelector(\".control-value\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n    setMaxStr(\r\n      elem.control[0].querySelector(\".control-max-str\"),\r\n      elem.workspace[0],\r\n      userData[elem.data]\r\n    );\r\n  });\r\n  $.each($(\".cert-controls .card-header a\"), function (key, elem) {\r\n    elem.addEventListener(\"click\", function () {\r\n      $.each(elements, function (key1, elem1) {\r\n        elem1.workspace[0].classList.remove(\"cert-active\");\r\n      });\r\n\r\n      if (elem.getAttribute(\"aria-expanded\") === \"false\" && key >= 1) {\r\n        if (\r\n          elements[key - 1].workspace[0].classList.contains(\"cert-bordered\")\r\n        ) {\r\n          elements[key - 1].workspace[0].classList.add(\"cert-active\");\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  // Create PDF\r\n  $(\"#preview\").click(function () {\r\n    createPreviewPdf();\r\n  });\r\n\r\n  $(\"#save\").click(function () {\r\n    console.log(userData);\r\n  });\r\n\r\n  $(\"#reset\").click(function () {\r\n    userData = jQuery.extend(true, {}, resetData);\r\n    defaultData = jQuery.extend(true, {}, resetData);\r\n    renderWorkspace(resetData);\r\n  });\r\n});\r\n/*\r\n * CONTROLS EVENTS\r\n */\r\n\r\n// WORKSPACE CONTROLS\r\n// resize workspace\r\n$(\".cert-wokrspace__zoom\").click(function () {\r\n  if (scale <= 3) {\r\n    scale += 0.5;\r\n    setWorkspaceZoom(scale);\r\n  }\r\n});\r\n// reset workspace\r\n$(\".cert-wokrspace__reset\").click(function () {\r\n  scale = $(\".cert-wokrspace__content\").width() / $(\".cert-wokrspace\").width();\r\n  setWorkspaceZoom(scale);\r\n});\r\n// reset original\r\n$(\".cert-wokrspace__original\").click(function () {\r\n  setWorkspaceZoom(1);\r\n  scale = 1;\r\n});\r\n// set landscape\r\n$(\".cert-wokrspace__landscape\").click(function () {\r\n  $(\".cert-wokrspace__content\").css({\r\n    height: \"793.7px\",\r\n    width: \"1122.5px\"\r\n  });\r\n  userData.orientation = \"landscape\";\r\n});\r\n// set portrait\r\n$(\".cert-wokrspace__portrait\").click(function () {\r\n  $(\".cert-wokrspace__content\").css({\r\n    height: \"1122.5px\",\r\n    width: \"793.7px\"\r\n  });\r\n  userData.orientation = \"portrait\";\r\n});\r\n\r\n/*\r\n * FUNCTIONS\r\n */\r\n// SET DEFAULT DATA INTO WORKSPACE\r\nfunction renderWorkspace(data) {\r\n  let i = 0;\r\n  for (let key in data) {\r\n    if (typeof data[key] === \"object\") {\r\n      // set workspace\r\n      if (key !== \"background\") {\r\n        setElement(elements[i].workspace, data[key]);\r\n        setControl(elements[i].control, data[key]);\r\n        // console.log(elements[i].workspace[0]);\r\n        // console.log(  $(elements[i].control[0]).find(\".control-top\"),  );\r\n\r\n        // set drag and resize\r\n        setDragResize(\r\n          $(elements[i].workspace[0]),\r\n          $(elements[i].control[0]).find(\".control-top\"),\r\n          $(elements[i].control[0]).find(\".control-left\"),\r\n          $(elements[i].control[0]).find(\".control-width\"),\r\n          userData[elements[i].data]\r\n        );\r\n        i++;\r\n      } else {\r\n        $(\".cert-wokrspace__content\").css(\r\n          \"background-image\",\r\n          `url(\"${data.background.image}\")`\r\n        );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// background\r\nfunction setBgSize() {\r\n  let bgSize;\r\n  switch (\r\n    $(\"#control-bg\")\r\n    .find(\".control-bg-size\")\r\n    .val()\r\n  ) {\r\n    case \"По ширине\":\r\n      bgSize = \"100% auto\";\r\n      break;\r\n    case \"По высоте\":\r\n      bgSize = \"auto 100%\";\r\n      break;\r\n  }\r\n  $(\".cert-wokrspace__content\").css(\"background-size\", bgSize);\r\n  userData.background.size = $(\"#control-bg\")\r\n    .find(\".control-bg-size\")\r\n    .val();\r\n}\r\n\r\nfunction setBgPosition(data) {\r\n  let bgX = data.background.positionLeft,\r\n    bgY = data.background.positionTop;\r\n  $(\".cert-wokrspace__content\").css(\"background-position\", `${bgX}px ${bgY}px`);\r\n  $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .val(bgY);\r\n  $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .val(bgX);\r\n}\r\n\r\nfunction changeBgPosition() {\r\n  let bgY = $(\"#control-bg\")\r\n    .find(\".control-top\")\r\n    .val();\r\n  let bgX = $(\"#control-bg\")\r\n    .find(\".control-left\")\r\n    .val();\r\n  $(\".cert-wokrspace__content\").css(\"background-position\", `${bgX}px ${bgY}px`);\r\n  userData.background.positionTop = bgY;\r\n  userData.background.positionLeft = bgX;\r\n}\r\n\r\n// set css and text\r\nfunction setElement(elem, data) {\r\n  elem\r\n    .css({\r\n      top: `${data.positionTop}px`,\r\n      left: `${data.positionLeft}px`,\r\n      width: `${data.width}px`,\r\n      \"font-family\": data.fontFamily,\r\n      \"font-size\": `${data.fontSize}px`,\r\n      \"line-height\": data.lineHeight,\r\n      color: data.color,\r\n      \"text-align\": data.textAlign\r\n    })\r\n    .text(data.value);\r\n  // set font-style and font-weight\r\n  switch (data.fontStyle) {\r\n    case \"По умолчанию\":\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n      break;\r\n    case \"Жирный\":\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"bold\"\r\n      });\r\n      break;\r\n    case \"Курсив\":\r\n      elem.css({\r\n        \"font-style\": \"italic\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n      break;\r\n    case \"Жирный + курсив\":\r\n      elem.css({\r\n        \"font-style\": \"italic\",\r\n        \"font-weight\": \"bold\"\r\n      });\r\n      break;\r\n    default:\r\n      elem.css({\r\n        \"font-style\": \"normal\",\r\n        \"font-weight\": \"normal\"\r\n      });\r\n  }\r\n  // set alignment\r\n  switch (data.textAlign) {\r\n    case \"По левому краю\":\r\n      elem.css(\"text-align\", \"left\");\r\n      break;\r\n    case \"По правому краю\":\r\n      elem.css(\"text-align\", \"right\");\r\n      break;\r\n    case \"По центру\":\r\n      elem.css(\"text-align\", \"center\");\r\n      break;\r\n    case \"По ширине\":\r\n      elem.css(\"text-align\", \"justify\");\r\n      break;\r\n    default:\r\n      elem.css(\"text-align\", \"left\");\r\n      break;\r\n  }\r\n}\r\n// set controls values\r\nfunction setControl(elem, data) {\r\n  elem.find(\".control-top\").val(data.positionTop);\r\n  elem.find(\".control-left\").val(data.positionLeft);\r\n  elem.find(\".control-width\").val(data.width);\r\n  elem.find(\".control-font-family\").val(data.fontFamily);\r\n  elem.find(\".control-font-size\").val(data.fontSize);\r\n  elem.find(\".control-line-height\").val(data.lineHeight);\r\n  elem.find(\".control-color\").val(data.color);\r\n  elem.find(\".control-font-style\").val(data.fontStyle);\r\n  elem.find(\".control-text-align\").val(data.textAlign);\r\n  elem.find(\".control-value\").val(data.value);\r\n  elem.find(\".control-max-str\").val(data.maxStr);\r\n}\r\n// set workspace zoom\r\nfunction setWorkspaceZoom(scale) {\r\n  $(\".cert-wokrspace__content\").css({\r\n    zoom: 1 / scale,\r\n    \"-moz-transform\": 1 / scale\r\n  });\r\n}\r\n\r\n// functions for control panel\r\n// show border for workspace block\r\nfunction setBorder(switcher, element) {\r\n  switcher.addEventListener(\"click\", function (e) {\r\n    element.classList.toggle(\"cert-bordered\");\r\n    element.classList.toggle(\"cert-active\");\r\n  });\r\n}\r\n// top position\r\nfunction setTop(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.top = e.target.value + \"px\";\r\n    data.positionTop = e.target.value;\r\n  });\r\n}\r\n// left position\r\nfunction setLeft(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.left = e.target.value + \"px\";\r\n    data.positionLeft = e.target.value;\r\n  });\r\n}\r\n// width\r\nfunction setWidth(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.width = e.target.value + \"px\";\r\n    data.width = e.target.value;\r\n    // calc font\r\n    calcViewFont(element, data.maxStr, data.fontSize);\r\n  });\r\n}\r\n// font family\r\nfunction setFontFamily(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.fontFamily = e.target.value;\r\n    data.fontFamily = e.target.value;\r\n  });\r\n}\r\n// font size\r\nfunction setFontSize(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    if (parseInt(e.target.value) > 500) {\r\n      e.target.value = 500;\r\n    }\r\n    element.style.fontSize = e.target.value + \"px\";\r\n    data.fontSize = e.target.value;\r\n    // calc font\r\n    calcViewFont(element, data.maxStr, data.fontSize);\r\n  });\r\n}\r\n// line height\r\nfunction setLineHeight(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.lineHeight = e.target.value;\r\n    data.lineHeight = e.target.value;\r\n  });\r\n}\r\n// color picker\r\nfunction setColor(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    element.style.color = e.target.value;\r\n    data.color = e.target.value;\r\n  });\r\n}\r\n// font style\r\nfunction setFontStyle(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    let style = \"normal\",\r\n      weight = \"normal\";\r\n    switch (e.target.value) {\r\n      case \"По умолчанию\":\r\n        style = \"normal\";\r\n        weight = \"normal\";\r\n        break;\r\n      case \"Жирный\":\r\n        style = \"normal\";\r\n        weight = \"bold\";\r\n        break;\r\n      case \"Курсив\":\r\n        style = \"italic\";\r\n        weight = \"normal\";\r\n        break;\r\n      case \"Жирный + курсив\":\r\n        style = \"italic\";\r\n        weight = \"bold\";\r\n        break;\r\n      default:\r\n        style = \"normal\";\r\n        weight = \"normal\";\r\n    }\r\n    element.style.fontStyle = style;\r\n    element.style.fontWeight = weight;\r\n    data.fontStyle = e.target.value;\r\n  });\r\n}\r\n// text align\r\nfunction setTextAlign(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    let textAlign = \"left\";\r\n    switch (e.target.value) {\r\n      case \"По левому краю\":\r\n        textAlign = \"left\";\r\n        break;\r\n      case \"По правому краю\":\r\n        textAlign = \"right\";\r\n        break;\r\n      case \"По центру\":\r\n        textAlign = \"center\";\r\n        break;\r\n      case \"По ширине\":\r\n        textAlign = \"justify\";\r\n        break;\r\n    }\r\n    element.style.textAlign = textAlign;\r\n    data.textAlign = e.target.value;\r\n  });\r\n}\r\n// text value\r\nfunction setValue(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    $(element).text(e.target.value);\r\n    data.value = e.target.value;\r\n    calcViewFont(\r\n      element,\r\n      data.maxStr,\r\n      parseInt($(element).css(\"font-size\"), 10)\r\n    );\r\n    $(element).resizable({\r\n      handles: \"e, w\",\r\n      containment: \"parent\"\r\n    });\r\n  });\r\n}\r\n// max number strings in block\r\nfunction setMaxStr(switcher, element, data) {\r\n  switcher.addEventListener(\"input\", function (e) {\r\n    $(element).css(\"font-size\", `${data.fontSize}px`);\r\n    calcViewFont(\r\n      element,\r\n      e.target.value,\r\n      parseInt($(element).css(\"font-size\"), 10)\r\n    );\r\n    data.maxStr = e.target.value;\r\n  });\r\n}\r\n\r\n// drag and resize\r\nfunction setDragResize(\r\n  element,\r\n  switcherTop,\r\n  switcherLeft,\r\n  switcherWidth,\r\n  data\r\n) {\r\n  element.draggable({\r\n    containment: \"parent\",\r\n    drag: function (event, ui) {\r\n      let top = Math.ceil(ui.position.top),\r\n        left = Math.ceil(ui.position.left);\r\n      switcherTop.val(top);\r\n      switcherLeft.val(left);\r\n      data.positionTop = `${top}`;\r\n      data.positionLeft = `${left}`;\r\n    }\r\n  });\r\n  element.resizable({\r\n    handles: \"e, w\",\r\n    containment: \"parent\",\r\n    resize: function (event, ui) {\r\n      let w = Math.ceil(ui.size.width);\r\n      event.target.style.maxWidth = `${w}px`;\r\n      switcherWidth.val(w);\r\n      data.width = `${w}`;\r\n      // calc font\r\n      calcViewFont(element, data.maxStr, data.fontSize);\r\n    }\r\n  });\r\n}\r\n\r\n// read file (for set background)\r\nfunction readFile(file, onLoadCallback) {\r\n  var reader = new FileReader();\r\n  reader.onload = onLoadCallback;\r\n  reader.readAsDataURL(file);\r\n}\r\n\r\n// create pdf\r\nfunction createPreviewPdf() {\r\n  // page size A4: [595.28, 841.89],\r\n  // https://github.com/bpampuch/pdfmake/blob/7b5675d5b9d5d7b815bd721e00504b16560a6382/src/standardPageSizes.js\r\n  const w = $(\".cert-wokrspace__content\").width(),\r\n    h = $(\".cert-wokrspace__content\").height(),\r\n    paperW = userData.orientation == \"landscape\" ? 841.89 : 595.28,\r\n    paperH = userData.orientation == \"landscape\" ? 595.28 : 841.89;\r\n\r\n  function getX(elem) {\r\n    return elem.position().left / w * paperW;\r\n  }\r\n\r\n  function getY(elem) {\r\n    return elem.position().top / h * paperH;\r\n  }\r\n\r\n  function getW(elem) {\r\n    return elem.width() / w * paperW;\r\n  }\r\n\r\n  function getFontFamily(elem) {\r\n    return elem.css(\"font-family\");\r\n  }\r\n\r\n  function getFontSize(elem) {\r\n    return parseInt(elem.css(\"font-size\"), 10) / w * paperW;\r\n  }\r\n\r\n  function getFontWeight(elem) {\r\n    return elem.css(\"font-weight\") >= 600;\r\n  }\r\n\r\n  function getFontStyle(elem) {\r\n    return elem.css(\"font-style\") === \"italic\";\r\n  }\r\n\r\n  function getLineHeight(elem) {\r\n    return (\r\n      parseInt(elem.css(\"line-height\"), 10) / getFontSize(elem) / w * paperW\r\n    );\r\n  }\r\n\r\n  function rgb2hex(rgb) {\r\n    if (rgb.search(\"rgb\") == -1) {\r\n      return rgb;\r\n    } else {\r\n      rgb = rgb.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+))?\\)$/);\r\n\r\n      function hex(x) {\r\n        return (\"0\" + parseInt(x).toString(16)).slice(-2);\r\n      }\r\n      return \"#\" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\r\n    }\r\n  }\r\n\r\n  function getColor(elem) {\r\n    return rgb2hex(elem.css(\"color\"));\r\n  }\r\n\r\n  function getAlignment(elem) {\r\n    return elem.css(\"text-align\");\r\n  }\r\n\r\n  function getBgW() {\r\n    return userData.background.size === \"По ширине\" ?\r\n      paperW :\r\n      paperH * loadedImg.width / loadedImg.height;\r\n  }\r\n\r\n  function getBgH() {\r\n    return userData.background.size === \"По высоте\" ?\r\n      paperH :\r\n      paperW * loadedImg.height / loadedImg.width;\r\n  }\r\n\r\n  const docDefinition = {\r\n    info: {\r\n      title: \"certificate\"\r\n    },\r\n    pageSize: \"A4\",\r\n    pageOrientation: userData.orientation,\r\n    background: [{\r\n      image: userData.background.image,\r\n      width: getBgW(),\r\n      height: getBgH(),\r\n      absolutePosition: {\r\n        x: Number(userData.background.positionLeft),\r\n        y: Number(userData.background.positionTop)\r\n      }\r\n    }],\r\n    content: [{\r\n        table: {\r\n          widths: [getW($(\".cert-name\"))],\r\n          body: [\r\n            [{\r\n              fontSize: getFontSize($(\".cert-name\")),\r\n              font: getFontFamily($(\".cert-name\")),\r\n              bold: getFontWeight($(\".cert-name\")),\r\n              italics: getFontStyle($(\".cert-name\")),\r\n              lineHeight: getLineHeight($(\".cert-name\")),\r\n              alignment: getAlignment($(\".cert-name\")),\r\n              color: getColor($(\".cert-name\")),\r\n              text: $(\".cert-name\").text(),\r\n              border: [false, false, false, false],\r\n              margin: [-5, -5, -5, -5]\r\n            }]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-name\")),\r\n          y: getY($(\".cert-name\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-number\"))],\r\n          body: [\r\n            [{\r\n              fontSize: getFontSize($(\".cert-number\")),\r\n              font: getFontFamily($(\".cert-number\")),\r\n              bold: getFontWeight($(\".cert-number\")),\r\n              italics: getFontStyle($(\".cert-number\")),\r\n              lineHeight: getLineHeight($(\".cert-number\")),\r\n              alignment: getAlignment($(\".cert-number\")),\r\n              color: getColor($(\".cert-number\")),\r\n              text: $(\".cert-number\").text(),\r\n              border: [false, false, false, false],\r\n              margin: [-5, -5, -5, -5]\r\n            }]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-number\")),\r\n          y: getY($(\".cert-number\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-course\"))],\r\n          body: [\r\n            [{\r\n              fontSize: getFontSize($(\".cert-course\")),\r\n              font: getFontFamily($(\".cert-course\")),\r\n              bold: getFontWeight($(\".cert-course\")),\r\n              italics: getFontStyle($(\".cert-course\")),\r\n              lineHeight: getLineHeight($(\".cert-course\")),\r\n              alignment: getAlignment($(\".cert-course\")),\r\n              color: getColor($(\".cert-course\")),\r\n              text: $(\".cert-course\").text(),\r\n              border: [false, false, false, false],\r\n              margin: [-5, -5, -5, -5]\r\n            }]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-course\")),\r\n          y: getY($(\".cert-course\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-date\"))],\r\n          body: [\r\n            [{\r\n              fontSize: getFontSize($(\".cert-date\")),\r\n              font: getFontFamily($(\".cert-date\")),\r\n              bold: getFontWeight($(\".cert-date\")),\r\n              italics: getFontStyle($(\".cert-date\")),\r\n              lineHeight: getLineHeight($(\".cert-date\")),\r\n              alignment: getAlignment($(\".cert-date\")),\r\n              color: getColor($(\".cert-date\")),\r\n              text: $(\".cert-date\").text(),\r\n              border: [false, false, false, false],\r\n              margin: [-5, -5, -5, -5]\r\n            }]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-date\")),\r\n          y: getY($(\".cert-date\"))\r\n        }\r\n      },\r\n      {\r\n        table: {\r\n          widths: [getW($(\".cert-duration\"))],\r\n          body: [\r\n            [{\r\n              fontSize: getFontSize($(\".cert-duration\")),\r\n              font: getFontFamily($(\".cert-duration\")),\r\n              bold: getFontWeight($(\".cert-duration\")),\r\n              italics: getFontStyle($(\".cert-duration\")),\r\n              lineHeight: getLineHeight($(\".cert-duration\")),\r\n              alignment: getAlignment($(\".cert-duration\")),\r\n              color: getColor($(\".cert-duration\")),\r\n              text: $(\".cert-duration\").text(),\r\n              border: [false, false, false, false],\r\n              margin: [-5, -5, -5, -5]\r\n            }]\r\n          ]\r\n        },\r\n        absolutePosition: {\r\n          x: getX($(\".cert-duration\")),\r\n          y: getY($(\".cert-duration\"))\r\n        }\r\n      }\r\n    ]\r\n  };\r\n\r\n  pdfMake.fonts = {\r\n    Roboto: {\r\n      normal: \"Roboto-Regular.ttf\",\r\n      bold: \"Roboto-Bold.ttf\",\r\n      italics: \"Roboto-Italic.ttf\",\r\n      bolditalics: \"Roboto-BoldItalic.ttf\"\r\n    },\r\n    \"Open Sans\": {\r\n      normal: \"OpenSans-Regular.ttf\",\r\n      bold: \"OpenSans-Bold.ttf\",\r\n      italics: \"OpenSans-Italic.ttf\",\r\n      bolditalics: \"OpenSans-BoldItalic.ttf\"\r\n    },\r\n    Montserrat: {\r\n      normal: \"Montserrat-Regular.ttf\",\r\n      bold: \"Montserrat-Bold.ttf\",\r\n      italics: \"Montserrat-Italic.ttf\",\r\n      bolditalics: \"Montserrat-BoldItalic.ttf\"\r\n    },\r\n    Lora: {\r\n      normal: \"Lora-Regular.ttf\",\r\n      bold: \"Lora-Bold.ttf\",\r\n      italics: \"Lora-Italic.ttf\",\r\n      bolditalics: \"Lora-BoldItalic.ttf\"\r\n    }\r\n  };\r\n\r\n  $(\r\n    \"#previewFancyLink\"\r\n  )[0].innerHTML = `<a data-fancybox data-type=\"iframe\" data-src=\"\" href=\"javascript:;\"></a>`;\r\n  pdfMake.createPdf(docDefinition).getBase64(data => {\r\n    $(\"#previewFancyLink a\")\r\n      .attr(\"data-src\", `data:application/pdf;base64,${data}`)\r\n      .click();\r\n  });\r\n\r\n  // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n}\r\n\r\n/* calculation font size with max strings number */\r\nfunction calcViewFont(element, inputValue, fontSize) {\r\n  $(element).css(\"font-size\", `${fontSize}px`); // reset\r\n  let numStr = elem => {\r\n    return $(elem).height() / parseInt($(elem).css(\"line-height\"), 10);\r\n  };\r\n  let i = 0;\r\n  while (numStr($(element)) > inputValue) {\r\n    i++;\r\n    $(element).css(\"font-size\", `${fontSize - i}px`);\r\n  }\r\n}"]}