{"version":3,"sources":["cert.js"],"names":["defaultData","userData","scale","elements","$","workspace","control","renderWorkspace","data","i","setElement","setControl","key","css","background","image","width","elem","top","left","color","font-family","textAlign","text","fontSize","line-height","lineHeight","fontStyle","text-align","font-style","find","val","positionTop","setWorkspaceZoom","zoom","-moz-transform","setBorder","switcher","element","addEventListener","e","classList","toggle","setTop","style","value","setLeft","setWidth","setFontFamily","target","setFontSize","setLineHeight","setColor","setFontStyle","weight","fontWeight","setTextAlign","switcherTop","Math","position","switcherWidth","switcherLeft","containment","drag","event","ui","resizable","ceil","handles","resize","maxWidth","size","readFile","file","onLoadCallback","reader","FileReader","onload","createPreviewPdf","h","w","getX","height","paperW","paperH","orientation","getY","getW","pageSize","getFont","pageOrientation","content","absolutePosition","x","y","widths","body","border","margin","innerHTML","pdfMake","createPdf","docDefinition","getBase64","attr","click","fail","jqxhr","err","textStatus","json","error","document","ready","this","files","result","on","bgSize","each","querySelector","setDragResize","elem1","remove","key1","getAttribute","contains","add"],"mappings":"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","file":"../cert.js","sourcesContent":["// GLOBALS\r\nlet defaultData = {},\r\n    userData = {},\r\n    scale = 1;\r\nconst elements = [{\r\n        workspace: $('.cert-name'),\r\n        control: $('#control-name'),\r\n    },\r\n    {\r\n        workspace: $('.cert-number'),\r\n        control: $('#control-number'),\r\n    },\r\n    {\r\n        workspace: $('.cert-course'),\r\n        control: $('#control-course'),\r\n    },\r\n    {\r\n        workspace: $('.cert-date'),\r\n        control: $('#control-date'),\r\n    },\r\n    {\r\n        workspace: $('.cert-duration'),\r\n        control: $('#control-duration'),\r\n    },\r\n];\r\n\r\n// GETTING DATA\r\n$.getJSON(\"/json/data.json\")\r\n    .done(function (json) {\r\n        userData = defaultData = json;\r\n    })\r\n    .fail(function (jqxhr, textStatus, error) {\r\n        var err = textStatus + \", \" + error;\r\n        console.log(\"Request Failed: \" + err);\r\n    });\r\n\r\n$(document).ready(function () {\r\n    renderWorkspace(defaultData);\r\n    // default zoom by workspace width\r\n    scale = ($('.cert-wokrspace__content').width() / $('.cert-wokrspace').width());\r\n    setWorkspaceZoom(scale);\r\n\r\n    // bg picker\r\n    $('#fileBg').on('change', function (e) {\r\n        readFile(this.files[0], function (e) {\r\n            $('.cert-wokrspace__content').css('background-image', `url(\"${e.target.result}\")`);\r\n            userData.background.image = e.target.result;\r\n        });\r\n    });\r\n    $('#bg-size').on('change', function (e) {\r\n        let bgSize = 'cover';\r\n        switch (e.target.value) {\r\n            case 'Растянуть':\r\n                bgSize = 'cover';\r\n                break;\r\n            case 'По ширине':\r\n                bgSize = '100% auto';\r\n                break;\r\n            case 'По высоте':\r\n                bgSize = 'auto 100%';\r\n                break;\r\n        }\r\n        $('.cert-wokrspace__content').css('background-size', bgSize);\r\n        userData.background.size = e.target.result;\r\n    });\r\n\r\n    $.each(elements, function (key, elem) {\r\n        // TOGGLE ACCORDITION\r\n        elem.workspace[0].addEventListener('click', function () {\r\n            $('.cert-controls .card-header a')[key + 1].click();\r\n        });\r\n        // ACCORDITION (PANEL) CONTROLS\r\n        setBorder(elem.control[0].querySelector('.control-hidder'), elem.workspace[0]);\r\n        setTop(elem.control[0].querySelector('.control-top'), elem.workspace[0]);\r\n        setLeft(elem.control[0].querySelector('.control-left'), elem.workspace[0]);\r\n        setWidth(elem.control[0].querySelector('.control-width'), elem.workspace[0]);\r\n        setFontFamily(elem.control[0].querySelector('.control-font-family'), elem.workspace[0]);\r\n        setFontSize(elem.control[0].querySelector('.control-font-size'), elem.workspace[0]);\r\n        setLineHeight(elem.control[0].querySelector('.control-line-height'), elem.workspace[0]);\r\n        setColor(elem.control[0].querySelector('.control-color'), elem.workspace[0]);\r\n        setFontStyle(elem.control[0].querySelector('.control-font-style'), elem.workspace[0]);\r\n        setTextAlign(elem.control[0].querySelector('.control-text-align'), elem.workspace[0]);\r\n        // DRAG AND RESIZE\r\n        setDragResize($(elem.workspace[0]), $(elem.control[0]).find('.control-top'), $(elem.control[0]).find('.control-left'), $(elem.control[0]).find('.control-width'));\r\n    });\r\n    $.each($('.cert-controls .card-header a'), function (key, elem) {\r\n        elem.addEventListener('click', function () {\r\n            $.each(elements, function (key1, elem1) {\r\n                elem1.workspace[0].classList.remove('cert-active');\r\n            });\r\n\r\n            if (elem.getAttribute('aria-expanded') === 'false' && key >= 1) {\r\n                if (elements[key - 1].workspace[0].classList.contains('cert-bordered')) {\r\n                    elements[key - 1].workspace[0].classList.add('cert-active');\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    // Create PDF\r\n    $('#preview').click(function () {\r\n        createPreviewPdf()\r\n    });\r\n});\r\n\r\n/*\r\n * CONTROLS EVENTS\r\n */\r\n\r\n// WORKSPACE CONTROLS\r\n// resize workspace\r\n$('.cert-wokrspace__zoom').click(function () {\r\n    if (scale <= 3) {\r\n        scale += 0.5;\r\n        setWorkspaceZoom(scale);\r\n    }\r\n});\r\n// reset workspace\r\n$('.cert-wokrspace__reset').click(function () {\r\n    scale = ($('.cert-wokrspace__content').width() / $('.cert-wokrspace').width());\r\n    setWorkspaceZoom(scale);\r\n});\r\n// reset original\r\n$('.cert-wokrspace__original').click(function () {\r\n    setWorkspaceZoom(1);\r\n    scale = 1;\r\n});\r\n// set landscape\r\n$('.cert-wokrspace__landscape').click(function () {\r\n    $('.cert-wokrspace__content').css({\r\n        'height': '793.7px',\r\n        'width': '1122.5px'\r\n    });\r\n    userData.orientation = 'landscape';\r\n});\r\n// set portrait\r\n$('.cert-wokrspace__portrait').click(function () {\r\n    $('.cert-wokrspace__content').css({\r\n        'height': '1122.5px',\r\n        'width': '793.7px'\r\n    });\r\n    userData.orientation = 'portrait';\r\n});\r\n\r\n\r\n/*\r\n * FUNCTIONS\r\n */\r\n// SET DEFAULT DATA INTO WORKSPACE\r\nfunction renderWorkspace(data) {\r\n    let i = 0;\r\n    for (let key in data) {\r\n        if (typeof data[key] === \"object\") {\r\n            // set workspace\r\n            if (key !== \"background\") {\r\n                setElement(elements[i].workspace, data[key]);\r\n                setControl(elements[i].control, data[key]);\r\n                i++;\r\n            } else {\r\n                $('.cert-wokrspace__content').css('background-image', `url(\"${data.background.image}\")`);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// set css and text\r\nfunction setElement(elem, data) {\r\n    elem.css({\r\n        'top': `${data.positionTop}px`,\r\n        'left': `${data.positionLeft}px`,\r\n        'width': `${data.width}px`,\r\n        'font-family': data.fontFamily,\r\n        'font-size': `${data.fontSize}px`,\r\n        'line-height': data.lineHeight,\r\n        'color': data.color,\r\n        'text-align': data.textAlign,\r\n    }).text(data.value);\r\n    // set font-style and font-weight\r\n    switch (data.fontStyle) {\r\n        case 'По умолчанию':\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'normal'\r\n            });\r\n            break;\r\n        case 'Жирный':\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'bold'\r\n            });\r\n            break;\r\n        case 'Курсив':\r\n            elem.css({\r\n                'font-style': 'italic',\r\n                'font-weight': 'normal'\r\n            });\r\n            break;\r\n        case 'Жирный + курсив':\r\n            elem.css({\r\n                'font-style': 'italic',\r\n                'font-weight': 'bold'\r\n            });\r\n            break;\r\n        default:\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'normal'\r\n            });\r\n    }\r\n    // set alignment\r\n    switch (data.textAlign) {\r\n        case 'По левому краю':\r\n            elem.css('text-align', 'left');\r\n            break;\r\n        case 'По правому краю':\r\n            elem.css('text-align', 'right');\r\n            break;\r\n        case 'По центру':\r\n            elem.css('text-align', 'center');\r\n            break;\r\n        case 'По ширине':\r\n            elem.css('text-align', 'justify');\r\n            break;\r\n        default:\r\n            elem.css('text-align', 'left');\r\n            break;\r\n    }\r\n};\r\n// set controls values\r\nfunction setControl(elem, data) {\r\n    elem.find(\".control-top\").val(data.positionTop);\r\n    elem.find(\".control-left\").val(data.positionLeft);\r\n    elem.find(\".control-width\").val(data.width);\r\n    elem.find(\".control-font-family\").val(data.fontFamily);\r\n    elem.find(\".control-font-size\").val(data.fontSize);\r\n    elem.find(\".control-line-height\").val(data.lineHeight);\r\n    elem.find(\".control-color\").val(data.color);\r\n    elem.find(\".control-font-style\").val(data.fontStyle);\r\n    elem.find(\".control-text-align\").val(data.textAlign);\r\n};\r\n// set workspace zoom\r\nfunction setWorkspaceZoom(scale) {\r\n    $('.cert-wokrspace__content').css({\r\n        'zoom': 1 / scale,\r\n        '-moz-transform': 1 / scale\r\n    });\r\n};\r\n\r\n// functions for control panel\r\n// show border for workspace block\r\nfunction setBorder(switcher, element) {\r\n    switcher.addEventListener('click', function (e) {\r\n        element.classList.toggle('cert-bordered');\r\n        element.classList.toggle('cert-active');\r\n    });\r\n};\r\n// top position\r\nfunction setTop(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.top = e.target.value + 'px';\r\n    });\r\n};\r\n// left position\r\nfunction setLeft(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.left = e.target.value + 'px';\r\n    });\r\n};\r\n// width\r\nfunction setWidth(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.width = e.target.value + 'px';\r\n    });\r\n};\r\n// font family\r\nfunction setFontFamily(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.fontFamily = e.target.value;\r\n    });\r\n};\r\n// font size\r\nfunction setFontSize(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.fontSize = e.target.value + 'px';\r\n    });\r\n};\r\n// line height\r\nfunction setLineHeight(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.lineHeight = e.target.value;\r\n    });\r\n};\r\n// color picker\r\nfunction setColor(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.color = e.target.value;\r\n    });\r\n};\r\n// font style\r\nfunction setFontStyle(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        let style = 'normal',\r\n            weight = 'normal';\r\n        switch (e.target.value) {\r\n            case 'По умолчанию':\r\n                style = 'normal';\r\n                weight = 'normal';\r\n                break;\r\n            case 'Жирный':\r\n                style = 'normal';\r\n                weight = 'bold';\r\n                break;\r\n            case 'Курсив':\r\n                style = 'italic';\r\n                weight = 'normal';\r\n                break;\r\n            case 'Жирный + курсив':\r\n                style = 'italic';\r\n                weight = 'bold';\r\n                break;\r\n            default:\r\n                style = 'normal';\r\n                weight = 'normal';\r\n        }\r\n        element.style.fontStyle = style;\r\n        element.style.fontWeight = weight;\r\n    });\r\n};\r\n// text align\r\nfunction setTextAlign(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        let textAlign = 'left';\r\n        switch (e.target.value) {\r\n            case 'По левому краю':\r\n                textAlign = 'left';\r\n                break;\r\n            case 'По правому краю':\r\n                textAlign = 'right';\r\n                break;\r\n            case 'По центру':\r\n                textAlign = 'center';\r\n                break;\r\n            case 'По ширине':\r\n                textAlign = 'justify';\r\n                break;\r\n        }\r\n        element.style.textAlign = textAlign;\r\n    });\r\n};\r\n\r\n// drag and resize\r\nfunction setDragResize(element, switcherTop, switcherLeft, switcherWidth) {\r\n    element.draggable({\r\n        containment: 'parent',\r\n        drag: function (event, ui) {\r\n            switcherTop.val(Math.ceil(ui.position.top));\r\n            switcherLeft.val(Math.ceil(ui.position.left));\r\n        }\r\n    });\r\n    element.resizable({\r\n        handles: 'e, w',\r\n        containment: 'parent',\r\n        resize: function (event, ui) {\r\n            event.target.style.maxWidth = `${Math.ceil(ui.size.width)}px`;\r\n            switcherWidth.val(Math.ceil(ui.size.width));\r\n        }\r\n    });\r\n};\r\n\r\n// read file (for set background)\r\nfunction readFile(file, onLoadCallback) {\r\n    var reader = new FileReader();\r\n    reader.onload = onLoadCallback;\r\n    reader.readAsDataURL(file);\r\n}\r\n\r\n// create pdf\r\nfunction createPreviewPdf() {\r\n    // page size A4: [595.28, 841.89],\r\n    // https://github.com/bpampuch/pdfmake/blob/7b5675d5b9d5d7b815bd721e00504b16560a6382/src/standardPageSizes.js\r\n    const w = $('.cert-wokrspace__content').width(),\r\n        h = $('.cert-wokrspace__content').height(),\r\n        paperW = (userData.orientation == 'landscape') ? 841.89 : 595.28,\r\n        paperH = (userData.orientation == 'landscape') ? 595.28 : 841.89;\r\n\r\n    function getX(elem) {\r\n        return elem.position().left / w * paperW;\r\n    };\r\n\r\n    function getY(elem) {\r\n        return elem.position().top / h * paperH;\r\n    };\r\n\r\n    function getW(elem) {\r\n        return elem.width() / w * paperW;\r\n    }\r\n\r\n    function getFont(elem) {\r\n        return elem.css('')\r\n    }\r\n\r\n    // !!! НУЖНО ИСПРАВИТЬ РАЗМЕРЫ ФОНА\r\n    const docDefinition = {\r\n        info: {\r\n            title: 'certificate',\r\n        },\r\n        pageSize: 'A4',\r\n        pageOrientation: userData.orientation,\r\n        content: [{\r\n                image: userData.background.image,\r\n                absolutePosition: {\r\n                    x: 0,\r\n                    y: 0\r\n                },\r\n                width: paperW,\r\n                height: paperH,\r\n            },\r\n            {\r\n                table: {\r\n                    widths: [getW($('.cert-name'))],\r\n                    body: [\r\n                        [{\r\n                            fontSize: 24,\r\n                            text: $('.cert-name').text(),\r\n                            border: [false, false, false, false],\r\n                            margin: [-5, -5, -5, -5],\r\n\r\n                        }]\r\n                    ],\r\n                },\r\n                absolutePosition: {\r\n                    x: getX($('.cert-name')),\r\n                    y: getY($('.cert-name'))\r\n                },\r\n            },\r\n            {\r\n                text: $('.cert-number').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-number')),\r\n                    y: getY($('.cert-number'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-course').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-course')),\r\n                    y: getY($('.cert-course'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-date').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-date')),\r\n                    y: getY($('.cert-date'))\r\n                }\r\n            },\r\n            {\r\n                text: $('.cert-duration').text(),\r\n                absolutePosition: {\r\n                    x: getX($('.cert-duration')),\r\n                    y: getY($('.cert-duration'))\r\n                }\r\n            }\r\n        ],\r\n    };\r\n\r\n    $('#previewFancyLink')[0].innerHTML = `<a data-fancybox data-type=\"iframe\" data-src=\"\" href=\"javascript:;\"></a>`;\r\n    pdfMake.createPdf(docDefinition).getBase64((data) => {\r\n        $('#previewFancyLink a').attr('data-src', `data:application/pdf;base64,${data}`).click();\r\n    });\r\n\r\n    // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n}"]}