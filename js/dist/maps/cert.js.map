{"version":3,"sources":["cert.js"],"names":["defaultData","userData","loadedImg","scale","$","elements","workspace","control","renderWorkspace","data","i","setElement","setControl","key","css","background","image","bgSize","find","val","bgX","positionLeft","setBgPosition","bgY","positionTop","changeBgPosition","width","elem","top","left","color","font-family","textAlign","text","fontSize","line-height","lineHeight","fontStyle","text-align","font-style","setWorkspaceZoom","zoom","-moz-transform","setBorder","switcher","element","addEventListener","e","classList","toggle","setTop","style","value","setLeft","setWidth","setFontFamily","target","setFontSize","setLineHeight","setColor","setFontStyle","weight","fontWeight","setTextAlign","switcherTop","Math","position","switcherWidth","switcherLeft","containment","drag","event","ui","resizable","ceil","handles","resize","maxWidth","size","readFile","file","onLoadCallback","reader","FileReader","onload","createPreviewPdf","h","w","getX","height","paperW","paperH","orientation","getY","getW","getFontFamily","getFontSize","parseInt","getFontWeight","getFontStyle","getLineHeight","rgb2hex","rgb","getColor","search","hex","x","toString","slice","match","getAlignment","getBgW","docDefinition","pageSize","pageOrientation","getBgH","absolutePosition","y","Number","content","body","font","bold","italics","alignment","margin","table","widths","border","bolditalics","pdfMake","fonts","Roboto","normal","Open Sans","createPdf","Montserrat","Lora","innerHTML","getBase64","attr","click","getJSON","err","textStatus","json","fail","jqxhr","error","document","ready","fr","on","img","this","files","result","src","setBgSize","each","querySelector","setDragResize","elem1","remove","key1","getAttribute","contains","add"],"mappings":"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","file":"../cert.js","sourcesContent":["// GLOBALS\r\nlet defaultData = {},\r\n    userData = {},\r\n    loadedImg = {},\r\n    scale = 1;\r\nconst elements = [{\r\n        workspace: $('.cert-name'),\r\n        control: $('#control-name'),\r\n    },\r\n    {\r\n        workspace: $('.cert-number'),\r\n        control: $('#control-number'),\r\n    },\r\n    {\r\n        workspace: $('.cert-course'),\r\n        control: $('#control-course'),\r\n    },\r\n    {\r\n        workspace: $('.cert-date'),\r\n        control: $('#control-date'),\r\n    },\r\n    {\r\n        workspace: $('.cert-duration'),\r\n        control: $('#control-duration'),\r\n    },\r\n];\r\n\r\n// GETTING DATA\r\n$.getJSON(\"/json/data.json\")\r\n    .done(function (json) {\r\n        // console.log(json);\r\n        userData = defaultData = json;\r\n    })\r\n    .fail(function (jqxhr, textStatus, error) {\r\n        var err = textStatus + \", \" + error;\r\n        console.log(\"Request Failed: \" + err);\r\n    });\r\n\r\n$(document).ready(function () {\r\n    renderWorkspace(defaultData);\r\n    // default zoom by workspace width\r\n    scale = ($('.cert-wokrspace__content').width() / $('.cert-wokrspace').width());\r\n    setWorkspaceZoom(scale);\r\n\r\n    // bg picker\r\n    $('#fileBg').on('change', function (e) {\r\n        let fr = new FileReader;\r\n        fr.readAsDataURL(this.files[0]);\r\n        fr.onload = function () {\r\n            let img = new Image;\r\n            img.onload = function () {\r\n                loadedImg = {\r\n                    width: img.width,\r\n                    height: img.height\r\n                };\r\n            };\r\n            img.src = fr.result;\r\n            $('.cert-wokrspace__content').css('background-image', `url(\"${img.src}\")`);\r\n            userData.background.image = img.src;\r\n        };\r\n\r\n        setBgSize();\r\n        setBgPosition(userData);\r\n    });\r\n    $('#control-bg').find('.control-bg-size').on('change', setBgSize);\r\n    $('#control-bg').find('.control-top').on('input', changeBgPosition);\r\n    $('#control-bg').find('.control-left').on('input', changeBgPosition);\r\n\r\n    $.each(elements, function (key, elem) {\r\n        // TOGGLE ACCORDITION\r\n        elem.workspace[0].addEventListener('click', function () {\r\n            $('.cert-controls .card-header a')[key + 1].click();\r\n        });\r\n        // ACCORDITION (PANEL) CONTROLS\r\n        setBorder(elem.control[0].querySelector('.control-hidder'), elem.workspace[0]);\r\n        setTop(elem.control[0].querySelector('.control-top'), elem.workspace[0]);\r\n        setLeft(elem.control[0].querySelector('.control-left'), elem.workspace[0]);\r\n        setWidth(elem.control[0].querySelector('.control-width'), elem.workspace[0]);\r\n        setFontFamily(elem.control[0].querySelector('.control-font-family'), elem.workspace[0]);\r\n        setFontSize(elem.control[0].querySelector('.control-font-size'), elem.workspace[0]);\r\n        setLineHeight(elem.control[0].querySelector('.control-line-height'), elem.workspace[0]);\r\n        setColor(elem.control[0].querySelector('.control-color'), elem.workspace[0]);\r\n        setFontStyle(elem.control[0].querySelector('.control-font-style'), elem.workspace[0]);\r\n        setTextAlign(elem.control[0].querySelector('.control-text-align'), elem.workspace[0]);\r\n        // DRAG AND RESIZE\r\n        setDragResize($(elem.workspace[0]), $(elem.control[0]).find('.control-top'), $(elem.control[0]).find('.control-left'), $(elem.control[0]).find('.control-width'));\r\n    });\r\n    $.each($('.cert-controls .card-header a'), function (key, elem) {\r\n        elem.addEventListener('click', function () {\r\n            $.each(elements, function (key1, elem1) {\r\n                elem1.workspace[0].classList.remove('cert-active');\r\n            });\r\n\r\n            if (elem.getAttribute('aria-expanded') === 'false' && key >= 1) {\r\n                if (elements[key - 1].workspace[0].classList.contains('cert-bordered')) {\r\n                    elements[key - 1].workspace[0].classList.add('cert-active');\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    // Create PDF\r\n    $('#preview').click(function () {\r\n        createPreviewPdf()\r\n    });\r\n});\r\n\r\n/*\r\n * CONTROLS EVENTS\r\n */\r\n\r\n// WORKSPACE CONTROLS\r\n// resize workspace\r\n$('.cert-wokrspace__zoom').click(function () {\r\n    if (scale <= 3) {\r\n        scale += 0.5;\r\n        setWorkspaceZoom(scale);\r\n    }\r\n});\r\n// reset workspace\r\n$('.cert-wokrspace__reset').click(function () {\r\n    scale = ($('.cert-wokrspace__content').width() / $('.cert-wokrspace').width());\r\n    setWorkspaceZoom(scale);\r\n});\r\n// reset original\r\n$('.cert-wokrspace__original').click(function () {\r\n    setWorkspaceZoom(1);\r\n    scale = 1;\r\n});\r\n// set landscape\r\n$('.cert-wokrspace__landscape').click(function () {\r\n    $('.cert-wokrspace__content').css({\r\n        'height': '793.7px',\r\n        'width': '1122.5px'\r\n    });\r\n    userData.orientation = 'landscape';\r\n});\r\n// set portrait\r\n$('.cert-wokrspace__portrait').click(function () {\r\n    $('.cert-wokrspace__content').css({\r\n        'height': '1122.5px',\r\n        'width': '793.7px'\r\n    });\r\n    userData.orientation = 'portrait';\r\n});\r\n\r\n\r\n/*\r\n * FUNCTIONS\r\n */\r\n// SET DEFAULT DATA INTO WORKSPACE\r\nfunction renderWorkspace(data) {\r\n    let i = 0;\r\n    for (let key in data) {\r\n        if (typeof data[key] === \"object\") {\r\n            // set workspace\r\n            if (key !== \"background\") {\r\n                setElement(elements[i].workspace, data[key]);\r\n                setControl(elements[i].control, data[key]);\r\n                i++;\r\n            } else {\r\n                $('.cert-wokrspace__content').css('background-image', `url(\"${data.background.image}\")`);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// background\r\nfunction setBgSize() {\r\n    let bgSize;\r\n    switch ($('#control-bg').find('.control-bg-size').val()) {\r\n        case 'По ширине':\r\n            bgSize = '100% auto';\r\n            break;\r\n        case 'По высоте':\r\n            bgSize = 'auto 100%';\r\n            break;\r\n    }\r\n    $('.cert-wokrspace__content').css('background-size', bgSize);\r\n    userData.background.size = $('#control-bg').find('.control-bg-size').val();\r\n};\r\n\r\nfunction setBgPosition(data) {\r\n    let bgX = data.background.positionLeft,\r\n        bgY = data.background.positionTop;\r\n    $('.cert-wokrspace__content').css('background-position', `${bgX}px ${bgY}px`);\r\n    $('#control-bg').find('.control-top').val(bgY);\r\n    $('#control-bg').find('.control-left').val(bgX);\r\n};\r\n\r\nfunction changeBgPosition() {\r\n    let bgY = $('#control-bg').find('.control-top').val();\r\n    let bgX = $('#control-bg').find('.control-left').val();\r\n    $('.cert-wokrspace__content').css('background-position', `${bgX}px ${bgY}px`);\r\n    userData.background.positionTop = bgY;\r\n    userData.background.positionLeft = bgX;\r\n}\r\n\r\n// set css and text\r\nfunction setElement(elem, data) {\r\n    elem.css({\r\n        'top': `${data.positionTop}px`,\r\n        'left': `${data.positionLeft}px`,\r\n        'width': `${data.width}px`,\r\n        'font-family': data.fontFamily,\r\n        'font-size': `${data.fontSize}px`,\r\n        'line-height': data.lineHeight,\r\n        'color': data.color,\r\n        'text-align': data.textAlign,\r\n    }).text(data.value);\r\n    // set font-style and font-weight\r\n    switch (data.fontStyle) {\r\n        case 'По умолчанию':\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'normal'\r\n            });\r\n            break;\r\n        case 'Жирный':\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'bold'\r\n            });\r\n            break;\r\n        case 'Курсив':\r\n            elem.css({\r\n                'font-style': 'italic',\r\n                'font-weight': 'normal'\r\n            });\r\n            break;\r\n        case 'Жирный + курсив':\r\n            elem.css({\r\n                'font-style': 'italic',\r\n                'font-weight': 'bold'\r\n            });\r\n            break;\r\n        default:\r\n            elem.css({\r\n                'font-style': 'normal',\r\n                'font-weight': 'normal'\r\n            });\r\n    }\r\n    // set alignment\r\n    switch (data.textAlign) {\r\n        case 'По левому краю':\r\n            elem.css('text-align', 'left');\r\n            break;\r\n        case 'По правому краю':\r\n            elem.css('text-align', 'right');\r\n            break;\r\n        case 'По центру':\r\n            elem.css('text-align', 'center');\r\n            break;\r\n        case 'По ширине':\r\n            elem.css('text-align', 'justify');\r\n            break;\r\n        default:\r\n            elem.css('text-align', 'left');\r\n            break;\r\n    }\r\n};\r\n// set controls values\r\nfunction setControl(elem, data) {\r\n    elem.find(\".control-top\").val(data.positionTop);\r\n    elem.find(\".control-left\").val(data.positionLeft);\r\n    elem.find(\".control-width\").val(data.width);\r\n    elem.find(\".control-font-family\").val(data.fontFamily);\r\n    elem.find(\".control-font-size\").val(data.fontSize);\r\n    elem.find(\".control-line-height\").val(data.lineHeight);\r\n    elem.find(\".control-color\").val(data.color);\r\n    elem.find(\".control-font-style\").val(data.fontStyle);\r\n    elem.find(\".control-text-align\").val(data.textAlign);\r\n};\r\n// set workspace zoom\r\nfunction setWorkspaceZoom(scale) {\r\n    $('.cert-wokrspace__content').css({\r\n        'zoom': 1 / scale,\r\n        '-moz-transform': 1 / scale\r\n    });\r\n};\r\n\r\n// functions for control panel\r\n// show border for workspace block\r\nfunction setBorder(switcher, element) {\r\n    switcher.addEventListener('click', function (e) {\r\n        element.classList.toggle('cert-bordered');\r\n        element.classList.toggle('cert-active');\r\n    });\r\n};\r\n// top position\r\nfunction setTop(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.top = e.target.value + 'px';\r\n    });\r\n};\r\n// left position\r\nfunction setLeft(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.left = e.target.value + 'px';\r\n    });\r\n};\r\n// width\r\nfunction setWidth(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.width = e.target.value + 'px';\r\n    });\r\n};\r\n// font family\r\nfunction setFontFamily(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.fontFamily = e.target.value;\r\n    });\r\n};\r\n// font size\r\nfunction setFontSize(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.fontSize = e.target.value + 'px';\r\n    });\r\n};\r\n// line height\r\nfunction setLineHeight(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.lineHeight = e.target.value;\r\n    });\r\n};\r\n// color picker\r\nfunction setColor(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        element.style.color = e.target.value;\r\n    });\r\n};\r\n// font style\r\nfunction setFontStyle(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        let style = 'normal',\r\n            weight = 'normal';\r\n        switch (e.target.value) {\r\n            case 'По умолчанию':\r\n                style = 'normal';\r\n                weight = 'normal';\r\n                break;\r\n            case 'Жирный':\r\n                style = 'normal';\r\n                weight = 'bold';\r\n                break;\r\n            case 'Курсив':\r\n                style = 'italic';\r\n                weight = 'normal';\r\n                break;\r\n            case 'Жирный + курсив':\r\n                style = 'italic';\r\n                weight = 'bold';\r\n                break;\r\n            default:\r\n                style = 'normal';\r\n                weight = 'normal';\r\n        }\r\n        element.style.fontStyle = style;\r\n        element.style.fontWeight = weight;\r\n    });\r\n};\r\n// text align\r\nfunction setTextAlign(switcher, element) {\r\n    switcher.addEventListener('input', function (e) {\r\n        let textAlign = 'left';\r\n        switch (e.target.value) {\r\n            case 'По левому краю':\r\n                textAlign = 'left';\r\n                break;\r\n            case 'По правому краю':\r\n                textAlign = 'right';\r\n                break;\r\n            case 'По центру':\r\n                textAlign = 'center';\r\n                break;\r\n            case 'По ширине':\r\n                textAlign = 'justify';\r\n                break;\r\n        }\r\n        element.style.textAlign = textAlign;\r\n    });\r\n};\r\n\r\n// drag and resize\r\nfunction setDragResize(element, switcherTop, switcherLeft, switcherWidth) {\r\n    element.draggable({\r\n        containment: 'parent',\r\n        drag: function (event, ui) {\r\n            switcherTop.val(Math.ceil(ui.position.top));\r\n            switcherLeft.val(Math.ceil(ui.position.left));\r\n        }\r\n    });\r\n    element.resizable({\r\n        handles: 'e, w',\r\n        containment: 'parent',\r\n        resize: function (event, ui) {\r\n            event.target.style.maxWidth = `${Math.ceil(ui.size.width)}px`;\r\n            switcherWidth.val(Math.ceil(ui.size.width));\r\n        }\r\n    });\r\n};\r\n\r\n// read file (for set background)\r\nfunction readFile(file, onLoadCallback) {\r\n    var reader = new FileReader();\r\n    reader.onload = onLoadCallback;\r\n    reader.readAsDataURL(file);\r\n}\r\n\r\n// create pdf\r\nfunction createPreviewPdf() {\r\n    // page size A4: [595.28, 841.89],\r\n    // https://github.com/bpampuch/pdfmake/blob/7b5675d5b9d5d7b815bd721e00504b16560a6382/src/standardPageSizes.js\r\n    const w = $('.cert-wokrspace__content').width(),\r\n        h = $('.cert-wokrspace__content').height(),\r\n        paperW = (userData.orientation == 'landscape') ? 841.89 : 595.28,\r\n        paperH = (userData.orientation == 'landscape') ? 595.28 : 841.89;\r\n\r\n    function getX(elem) {\r\n        return elem.position().left / w * paperW;\r\n    };\r\n\r\n    function getY(elem) {\r\n        return elem.position().top / h * paperH;\r\n    };\r\n\r\n    function getW(elem) {\r\n        return elem.width() / w * paperW;\r\n    };\r\n\r\n    function getFontFamily(elem) {\r\n        return elem.css('font-family');\r\n    }\r\n\r\n    function getFontSize(elem) {\r\n        return parseInt(elem.css('font-size'), 10) / w * paperW;\r\n    };\r\n\r\n    function getFontWeight(elem) {\r\n        return elem.css('font-weight') === 'bold';\r\n    }\r\n\r\n    function getFontStyle(elem) {\r\n        return elem.css('font-style') === 'italic';\r\n    }\r\n\r\n    function getLineHeight(elem) {\r\n        return parseInt(elem.css('line-height'), 10) / getFontSize(elem) / w * paperW;\r\n    }\r\n\r\n    function rgb2hex(rgb) {\r\n        if (rgb.search(\"rgb\") == -1) {\r\n            return rgb;\r\n        } else {\r\n            rgb = rgb.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+))?\\)$/);\r\n\r\n            function hex(x) {\r\n                return (\"0\" + parseInt(x).toString(16)).slice(-2);\r\n            }\r\n            return \"#\" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\r\n        }\r\n    }\r\n\r\n    function getColor(elem) {\r\n        return rgb2hex(elem.css('color'));\r\n    }\r\n\r\n    function getAlignment(elem) {\r\n        return elem.css('text-align');\r\n    }\r\n\r\n    function getBgW() {\r\n        return (userData.background.size === 'По ширине') ? paperW : paperH * loadedImg.width / loadedImg.height;\r\n    }\r\n\r\n    function getBgH() {\r\n        return (userData.background.size === 'По высоте') ? paperH : paperW * loadedImg.height / loadedImg.width;\r\n    }\r\n\r\n    const docDefinition = {\r\n        info: {\r\n            title: 'certificate',\r\n        },\r\n        pageSize: 'A4',\r\n        pageOrientation: userData.orientation,\r\n        background: [{\r\n            image: userData.background.image,\r\n            width: getBgW(),\r\n            height: getBgH(),\r\n            absolutePosition: {\r\n                x: Number(userData.background.positionLeft),\r\n                y: Number(userData.background.positionTop)\r\n            }\r\n        }],\r\n        content: [{\r\n                table: {\r\n                    widths: [getW($('.cert-name'))],\r\n                    body: [\r\n                        [{\r\n                            fontSize: getFontSize($('.cert-name')),\r\n                            font: getFontFamily($('.cert-name')),\r\n                            bold: getFontWeight($('.cert-name')),\r\n                            italics: getFontStyle($('.cert-name')),\r\n                            lineHeight: getLineHeight($('.cert-name')),\r\n                            alignment: getAlignment($('.cert-name')),\r\n                            color: getColor($('.cert-name')),\r\n                            text: $('.cert-name').text(),\r\n                            border: [false, false, false, false],\r\n                            margin: [-5, -5, -5, -5],\r\n                        }]\r\n                    ],\r\n                },\r\n                absolutePosition: {\r\n                    x: getX($('.cert-name')),\r\n                    y: getY($('.cert-name'))\r\n                },\r\n            },\r\n            {\r\n                table: {\r\n                    widths: [getW($('.cert-number'))],\r\n                    body: [\r\n                        [{\r\n                            fontSize: getFontSize($('.cert-number')),\r\n                            font: getFontFamily($('.cert-number')),\r\n                            bold: getFontWeight($('.cert-number')),\r\n                            italics: getFontStyle($('.cert-number')),\r\n                            lineHeight: getLineHeight($('.cert-number')),\r\n                            alignment: getAlignment($('.cert-number')),\r\n                            color: getColor($('.cert-number')),\r\n                            text: $('.cert-number').text(),\r\n                            border: [false, false, false, false],\r\n                            margin: [-5, -5, -5, -5],\r\n                        }]\r\n                    ],\r\n                },\r\n                absolutePosition: {\r\n                    x: getX($('.cert-number')),\r\n                    y: getY($('.cert-number'))\r\n                }\r\n            },\r\n            {\r\n                table: {\r\n                    widths: [getW($('.cert-course'))],\r\n                    body: [\r\n                        [{\r\n                            fontSize: getFontSize($('.cert-course')),\r\n                            font: getFontFamily($('.cert-course')),\r\n                            bold: getFontWeight($('.cert-course')),\r\n                            italics: getFontStyle($('.cert-course')),\r\n                            lineHeight: getLineHeight($('.cert-course')),\r\n                            alignment: getAlignment($('.cert-course')),\r\n                            color: getColor($('.cert-course')),\r\n                            text: $('.cert-course').text(),\r\n                            border: [false, false, false, false],\r\n                            margin: [-5, -5, -5, -5],\r\n                        }]\r\n                    ],\r\n                },\r\n                absolutePosition: {\r\n                    x: getX($('.cert-course')),\r\n                    y: getY($('.cert-course'))\r\n                }\r\n            },\r\n            {\r\n                table: {\r\n                    widths: [getW($('.cert-date'))],\r\n                    body: [\r\n                        [{\r\n                            fontSize: getFontSize($('.cert-date')),\r\n                            font: getFontFamily($('.cert-date')),\r\n                            bold: getFontWeight($('.cert-date')),\r\n                            italics: getFontStyle($('.cert-date')),\r\n                            lineHeight: getLineHeight($('.cert-date')),\r\n                            alignment: getAlignment($('.cert-date')),\r\n                            color: getColor($('.cert-date')),\r\n                            text: $('.cert-date').text(),\r\n                            border: [false, false, false, false],\r\n                            margin: [-5, -5, -5, -5],\r\n                        }]\r\n                    ],\r\n                },\r\n                absolutePosition: {\r\n                    x: getX($('.cert-date')),\r\n                    y: getY($('.cert-date'))\r\n                }\r\n            },\r\n            {\r\n                table: {\r\n                    widths: [getW($('.cert-duration'))],\r\n                    body: [\r\n                        [{\r\n                            fontSize: getFontSize($('.cert-duration')),\r\n                            font: getFontFamily($('.cert-duration')),\r\n                            bold: getFontWeight($('.cert-duration')),\r\n                            italics: getFontStyle($('.cert-duration')),\r\n                            lineHeight: getLineHeight($('.cert-duration')),\r\n                            alignment: getAlignment($('.cert-duration')),\r\n                            color: getColor($('.cert-duration')),\r\n                            text: $('.cert-duration').text(),\r\n                            border: [false, false, false, false],\r\n                            margin: [-5, -5, -5, -5],\r\n                        }]\r\n                    ],\r\n                },\r\n                absolutePosition: {\r\n                    x: getX($('.cert-duration')),\r\n                    y: getY($('.cert-duration'))\r\n                }\r\n            }\r\n        ],\r\n    };\r\n\r\n    pdfMake.fonts = {\r\n        'Roboto': {\r\n            normal: 'Roboto-Regular.ttf',\r\n            bold: 'Roboto-Bold.ttf',\r\n            italics: 'Roboto-Italic.ttf',\r\n            bolditalics: 'Roboto-BoldItalic.ttf'\r\n        },\r\n        'Open Sans': {\r\n            normal: 'OpenSans-Regular.ttf',\r\n            bold: 'OpenSans-Bold.ttf',\r\n            italics: 'OpenSans-Italic.ttf',\r\n            bolditalics: 'OpenSans-BoldItalic.ttf'\r\n        },\r\n        'Montserrat': {\r\n            normal: 'Montserrat-Regular.ttf',\r\n            bold: 'Montserrat-Bold.ttf',\r\n            italics: 'Montserrat-Italic.ttf',\r\n            bolditalics: 'Montserrat-BoldItalic.ttf'\r\n        },\r\n        'Lora': {\r\n            normal: 'Lora-Regular.ttf',\r\n            bold: 'Lora-Bold.ttf',\r\n            italics: 'Lora-Italic.ttf',\r\n            bolditalics: 'Lora-BoldItalic.ttf'\r\n        }\r\n    }\r\n\r\n    $('#previewFancyLink')[0].innerHTML = `<a data-fancybox data-type=\"iframe\" data-src=\"\" href=\"javascript:;\"></a>`;\r\n    pdfMake.createPdf(docDefinition).getBase64((data) => {\r\n        $('#previewFancyLink a').attr('data-src', `data:application/pdf;base64,${data}`).click();\r\n    });\r\n\r\n    // pdfMake.createPdf(docDefinition).download('optionalName.pdf');\r\n}"]}